var bsJquerySliderMethods,bs;(function(){var n=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(i){function u(){n||(this.initialize&&this.initialize.apply(this,arguments),this.init&&this.init.apply(this,arguments))}var e=this.prototype,f,r;n=!0;f=new this;n=!1;for(r in i)f[r]=typeof i[r]=="function"&&typeof e[r]=="function"&&t.test(i[r])?function(n,t){return function(){var r=this._super,i;return this._super=e[n],i=t.apply(this,arguments),this._super=r,i}}(r,i[r]):i[r];return u.prototype=f,u.prototype.constructor=u,u.extend=arguments.callee,u}})(),function(n){"use strict";n.EventClass=Class.extend({initialize:function(){this.events={}},addListener:function(n,t){return this.events.hasOwnProperty(n)||(this.events[n]=[]),this.events[n].push(t),this},addListenerOnce:function(n,t){var r=this,i=function(u){r.removeListener(n,i);t.call(this,u)};return this.addListener(n,i),this},removeListener:function(n,t){if(this.events.hasOwnProperty(n))for(var i=0;i<this.events[n].length;i++)this.events[n][i]===t&&this.events[n].splice(i,1);return this},removeListeners:function(n){return this.events.hasOwnProperty(n)&&(this.events[n]=[]),this},trigger:function(n,t){var r,i;if(this.events.hasOwnProperty(n))for(r=this.events[n].slice(0),i=0;i<r.length;i++)r[i].call(this,t)}})}(bs),function(n,t){"use strict";t.Model=t.EventClass.extend({initialize:function(){this.attributes={};this._super()},init:function(n){return this.set(n),this},set:function(n,t){var i,u,r;typeof n=="object"?i=n:(i={})[n]=t;u=this.attributes;for(r in i)i!=null&&i.hasOwnProperty(r)&&(t=i[r],u[r]=t,this.trigger("change:"+r,u[r]));return this.trigger("change",i),this},get:function(n){return n===undefined?this.attributes:this.attributes[n]},has:function(n){return this.get(n)!=null},unset:function(n){return this.set(n,void 0)}})}(window,bs),function(n,t){"use strict";t.trak=function(){var i={debug:!1},r=function(n){return n==undefined?n:(n=n.replace(/page.title/g,document.title),n=n.replace(/page.href/g,window.location.href),n=n.replace(/page.host/g,window.location.host),n=n.replace(/link.href/g,this.href?this.href:"No href"),n=n.replace(/link.title/g,this.title?this.title:"No title"),n=n.replace(/bs.pagename/g,t.pageName?t.pageName:"No bs.pagename"),n=n.replace(/bs.sitename/g,t.siteName?t.siteName:"No bs.siteName"),n.replace(/referrer/g,document.referrer?document.referrer:"No referrer"))},f=function(n){return{category:n&&n.category||"",action:n&&n.action||"",label:n&&n.label||"",value:n&&n.value||0}},u=function(n,t,u,e){var c=typeof n=="object"?n:{category:n,action:t,label:u,value:e},o=f(c),h,s;n=r.call(this,o.category);t=r.call(this,o.action);u=r.call(this,o.label.toString());e=o.value;h="Not fired";s="Not fired";typeof _gaq!="undefined"&&(h=["_trackEvent",n,t,u,e],_gaq.push(h));typeof window.dataLayer!="undefined"&&(s={event:"userInteraction",eventCategory:n,eventAction:t,eventLabel:u},window.dataLayer.push(s));i.debug&&console.debug("dataLayer",s)},e=function(){var n=[];return t.siteName!=undefined&&n.push(t.siteName),t.pageName!=undefined&&n.push(t.pageName),n.join(" ")},o=function(n){var i=typeof n!="undefined";n=n||t.pageName;typeof _gaq!="undefined"&&_gaq.push(["_trackPageview",n]);typeof window.dataLayer!="undefined"&&(i?(window.dataLayer.push({event:"virtualPageView",pageName:n}),window.dataLayer.push({pageName:t.pageName})):window.dataLayer.push({event:"virtualPageView"}));typeof pp_gemius_identifier!="undefined"&&typeof pp_gemius_hit!="undefined"&&window.pp_gemius_hit(window.pp_gemius_identifier)},s=function(n,t,r,u){var f="Not fired",e="Not fired";typeof _gaq!="undefined"&&(f=["_trackTiming",n,t,r,u],_gaq.push(f));typeof window.dataLayer!="undefined"&&(e={event:"userTiming",timingCategory:n,timingVariable:t,timingTime:r,timingLabel:u},window.dataLayer.push(e));i.debug&&(console.debug("_gaq",f),console.debug("dataLayer",e))},h=function(){n("[data-trak]").on("click",function(){var t=n(this).data("trak");u.call(this,t)})},c=function(){n("#menu-header a, #nav-bar a").on("click",function(){t.trak.ui.topmenu(n(this).text())})},l=function(){n(".header-header a, .header-nav-bar a").on("click",function(){t.trak.ui.topmenu(n(this).text())})},a=function(t,r){var u;return typeof t=="object"?u=t:(u={},u[t]=r),n.extend(i,u),this},v=function(n){typeof window.dataLayer!="undefined"&&window.dataLayer.push(n);i.debug&&console.debug(n)},y={_trackingOnce:[],alert:function(n){t.trak.event("Alert","Click",n)},advancedSearch:function(n,i){t.trak.event("AdvancedSearch",i||"Click",n)},advancedSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("AdvancedSearchDetails",n),this._trackingOnce.push(n))},advancedSearchFacility:function(n,i){t.trak.event("AdvancedSearchFacility",n,i)},advancedSearchFreetext:function(n,i){t.trak.event("AdvancedSearchFreetext",n,i)},advancedSearchItemTypeSelect:function(n,i){t.trak.event("AdvancedSearchItemTypeSelect",n,i)},agentResultTab:function(n){t.trak.event("AgentResultTab","Click",n.toString().upperCaseFirst())},chartDemandChange:function(n,i){t.trak.event("ChartDemandChange",n,i)},energyMarkLink:function(){t.trak.event("EnergyMarkLink","Click","page.host -> bs.pagename")},foreclosureItemTypeSelect:function(n,i){t.trak.event("ForeclosureItemTypeSelect",n,i)},foreclosureResultListSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("ForeclosureResultListSearchDetails",n),this._trackingOnce.push(n))},foreclosureResultListItemTypeSelect:function(n,i){t.trak.event("ForeclosureResultListItemTypeSelect",n?"Check":"Uncheck",i)},foreclosureResultListSorting:function(n){t.trak.event("ForeclosureResultListSorting","Click",n)},foreclosureResultListViewType:function(n){t.trak.event("ForeclosureResultListViewType","Click",n)},foreclosureMapSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("ForeclosureMapSearchDetails",n),this._trackingOnce.push(n))},foreclosureResultListAdjustSearch:function(n){t.trak.event("ForeclosureResultListAdjustSearch","Click",n)},unknownItemTypeSelect:function(n,i){t.trak.event("UnknownItemTypeSelect",n,i)},infoMessage:function(n){t.trak.event("InfoMessage","Click",n)},presentationPageShownByChainName:function(n){t.trak.event("PresentationPageShownByChainName","Shown",n)},presentationPageType:function(n){t.trak.event("PresentationPageType","Shown",n)},resultListItemTypeSelect:function(n,i){t.trak.event("ResultListItemTypeSelect",n?"Check":"Uncheck",i)},resultListFeaturedItem:function(n,i){t.trak.event("ResultListFeaturedItem",n,i)},resultListSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("ResultListSearchDetails",n),this._trackingOnce.push(n))},resultListItemDetails:function(n,i){t.trak.event("ResultListItemDetails",n,i)},resultListItemDetailsCalculateLoan:function(n){t.trak.event("ResultListItemDetailsCalculateLoan","Click",n)},resultListFacility:function(n,i){t.trak.event("ResultListFacility",n?"Check":"Uncheck",i)},resultListFreeText:function(n,i){t.trak.event("ResultListFreeText",n,i)},resultListSorting:function(n){t.trak.event("ResultListSorting","Click",n)},resultListViewType:function(n){t.trak.event("ResultListViewType","Click",n)},resultListTop:function(n){t.trak.event("ResultListTop","Click",n)},resultListRentForeclosure:function(n,i){t.trak.event("ResultListRentForeclosure",n?"Check":"Uncheck",i)},resultListBottom:function(n,i){t.trak.event("ResultListBottom",n,i)},resultListAdjustSearch:function(n){t.trak.event("ResultListAdjustSearch","Click",n)},resultListQuickSearch:function(n){t.trak.event("ResultListQuickSearch","Search bs.sitename-bs.pagename",n)},lockAdjustSearch:function(i){t.trak.event("LockAdjustSearch",i,"bs.sitename-bs.pagename-"+n("[data-active-tab]").data("active-tab"))},searchItemTypeSelect:function(n,i){t.trak.event("SearchItemTypeSelect",n,i)},searchHeader:function(n){t.trak.event("SearchHeader",n,"bs.pagename")},searchField:function(n){t.trak.event("SearchField","Search",n)},searchBy:function(n){t.trak.event("SearchBy","Click",n)},starMarking:function(n){t.trak.event("StarMarking","Click",n)},searchResultsList:function(n){t.trak.event("SearchResultsList","Click",n)},searchResultsMap:function(n){t.trak.event("SearchResultsMap","Click",n)},searchResultsGallery:function(n){t.trak.event("SearchResultsGallery","Click",n)},mapType:function(n){t.trak.event("MapType","Change",n)},mapLayer:function(n,i){t.trak.event("MapLayer",n?"Check":"Uncheck",i)},mapPoi:function(n,i){t.trak.event("MapPoi",n?"Check":"Uncheck",i)},mapTool:function(n,i){t.trak.event("MapTool",n,i)},mapItemTypeSelect:function(n,i){t.trak.event("MapItemTypeSelect",n?"Check":"Uncheck",i)},mapSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("MapSearchDetails",n),this._trackingOnce.push(n))},mapFacility:function(n,i){t.trak.event("MapFacility",n?"Check":"Uncheck",i)},mapFreeText:function(n,i){t.trak.event("MapFreeText",n,i)},mapRentForeclosure:function(n,i){t.trak.event("MapRentForeclosure",n?"Check":"Uncheck",i)},mapAdjustSearch:function(n){t.trak.event("MapAdjustSearch","Click",n)},rentalResultListSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("RentalResultListSearchDetails",n),this._trackingOnce.push(n))},rentalMapSearchDetails:function(n){this._trackingOnce.indexOf(n)===-1&&(t.trak.event("RentalMapSearchDetails",n),this._trackingOnce.push(n))},rentalResultListAdjustSearch:function(n){t.trak.event("RentalResultListAdjustSearch","Click",n)},rentalResultListSorting:function(n){t.trak.event("RentalResultListSorting","Click",n)},rentalResultListViewType:function(n){t.trak.event("RentalResultListViewType","Click",n)},presentationPage:function(n,i){t.trak.event("PresentationPage",n,i)},presentationPageMap:function(n,i){t.trak.event("PresentationPageMap",n,i)},presentationPageMapType:function(n){t.trak.event("PresentationPageMapType","Change",n)},presentationPageMapLayer:function(n,i){t.trak.event("PresentationPageMapLayer",n?"Check":"Uncheck",i)},presentationPageMapTool:function(n,i){t.trak.event("PresentationPageMapTool",n,i)},presentationPageMapToolRejsetid:function(n){t.trak.event("PresentationPageMapToolRejsetid","Click",n)},otherPageMap:function(n,i){t.trak.event("OtherPageMap",n,i)},otherPageMapType:function(n){t.trak.event("OtherPageMapType","Change",n)},otherPageMapLayer:function(n,i){t.trak.event("OtherPageMapLayer",n?"Check":"Uncheck",i)},otherPageMapTool:function(n,i){t.trak.event("OtherPageMapTool",n,i)},tipSystem:function(n,i){t.trak.event("TipSystem",n,i)},userLocation:function(n,i){t.trak.event("UserLocation",n,i)},wishProperty:function(n,i){t.trak.event("WishProperty",n,i)},visitStatistics:function(n,i){t.trak.event("VisitStatistics",n,i)},fibia:function(n,i){t.trak.event("Fibia",n,i)},favoriteMark:function(n,i){t.trak.event("FavoriteMark",n?"Check":"Uncheck",i||e())},searchBar:function(n){t.trak.event("SearchBar",n,"bs.pagename")},userSurvey:function(n,i){t.trak.event("UserSurvey",n,i)},wishPropertyPromotion:function(n){t.trak.event("WishPropertyPromotion","Click",n)},propertyReport:function(n,i){t.trak.event("PropertyReport",n,i)},propertyReportTrakOnce:function(n,i){this._trackingOnce.indexOf(n+i)===-1&&(t.trak.event("PropertyReport",n,i),this._trackingOnce.push(n+i))},promotionTip:function(n,i){t.trak.event("PromotionTip",n,i)},topmenu:function(n){t.trak.event("Topmenu","Click",n)},marketindexAndStatistics:function(n,i){t.trak.event("MarketindexAndStatistics",n,i)},loginPage:function(n){t.trak.event("LoginPage","Click bs.sitename",n)},heatmap:function(n){t.trak.event("Heatmap","Click on bs.sitename bs.pagename",n)},commentRatingBox:function(n,i){t.trak.event("CommentRatingBox bs.sitename bs.pagename",n,i)}},p={exitLink:function(n,i,r){var u=i+"_"+r;t.trak.event("ExitLink",u,n);typeof fbq!="undefined"&&window.fbq("trackCustom","ExitLink");typeof Adform!="undefined"&&window.Adform.Tracking.Track(46226,351291,"")},exitLinkTvang:function(n,i){var r=n+"_"+i;t.trak.event("ExitLinkTvang",r);typeof fbq!="undefined"&&window.fbq("trackCustom","ExitLink")},exitLinkOther:function(n,i){t.trak.event("ExitLink",n,i)}};return{options:i,setOptions:a,event:u,pageView:o,timing:s,start:h,topmenuV1:c,topmenuV2:l,dataLayer:v,ui:y,el:p}}()}(jQuery,bs),function(n,t,i){"use strict";t(function(){t(document).ajaxError(function(n,r,u){if(r.status==404&&i.utils.site.isLocalhost()){if(u.url.indexOf("surveymonkey")>0)return;t("<div />",{title:"Fejl 404"}).html("Vi kunne ikke finde: "+u.url).dialog({modal:!0,dialogClass:"border",width:800,height:200})}r.status==500&&t.get(i.url("~/error/error500"),function(n){i.dialog.normal(n,{width:600,height:350})})})});i.getJSON=function(n,r,u){return t.getJSON(i.url(n),r,u)};i.get=function(n,r,u){return t.get(i.url(n),r,u)};i.post=function(n,r,u){return t.post(i.url(n),r,u)};i.postJSON=function(n,r,u){return t.ajax({type:"POST",url:i.url(n),contentType:"application/json",data:JSON.stringify(r),dataType:"json",success:u})};t.postJSON=function(n,i,r){return t.ajax({type:"POST",url:n,contentType:"application/json",data:JSON.stringify(i),dataType:"json",success:r})};t.getJSONP=function(n,i,r,u){typeof i=="string"&&t.ajax(n,{dataType:"jsonp",jsonpCallback:i,cache:!0,success:r,complete:u});typeof i=="function"&&(r=i,t.ajax(n,{dataType:"jsonp",cache:!0,success:r,complete:u}))};t.getJSONCached=function(n,i,r){return t.isFunction(i)&&(r=i,i=undefined),t.ajax({url:n,cache:!0,type:"GET",dataType:"json",data:i,success:r})};t.getJSONSync=function(n,i,r){return t.ajax({url:n,dataType:"json",data:i,success:r,async:!1})}}(window,jQuery,bs);bs=bs||{};bs.json={status:{Ok:"Ok",Error:"Error",NotLoggedIn:"NotLoggedIn",InvalidModelState:"InvalidModelState"},checkResultErrors:function(n){switch(n.Status){case bs.json.status.Ok:return!0;case bs.json.status.InvalidModelState:case bs.json.status.Error:return bs.debug!=undefined&&bs.debug.printError(n.Errors),!1;case bs.json.status.NotLoggedIn:default:return!0}}},function(n,t){"use strict";t.check={requireNotNullOrUndefined:function(n,t,i){if(typeof n=="undefined"||n===null){var r="Parameter '"+t+"' kan ikke være  null eller undefined.";typeof i=="string"&&(r+=" "+i);throw r;}},requireNotNull:function(n,t){if(n===null)throw"Parameter '"+t+"' kan ikke være  null";},requireNotUndefined:function(n,t){if(typeof n=="undefined")throw"Parameter '"+t+"' kan ikke være undefined";},require:function(n,t){if(!n)throw"Parameter '"+t+"' er ikke go nok";}}}(window,bs),function(n,t){"use strict";t.q=function(){var i=null;t.timing!=undefined&&(i=t.timing.startNew("bs.q",t.pageName,!0));var a=500,o=!1,s=!1,h=!1,c=!1,r=[],u=[],f=[],e=[],v=function(){for(i&&i.lap("executeReady");r.length;)r.shift().call();o=!0},y=function(){for(i&&i.lap("excuteLoad");u.length;)u.shift().call();s=!0;p()},p=function(){for(i&&i.lap("executeAfterLoad");f.length;)f.shift().call();h=!0;window.setTimeout(function(){w()},a)},l=function(n){try{n.call()}catch(t){console&&console.error&&console.error(t)}},w=function(){for(i&&i.lap("executeThirdParties");e.length;)l(e.shift());c=!0};return n(function(){v()}),n(window).load(function(){y()}),{ready:function(n){o?n.call():r.push(n)},load:function(n){s?n.call():u.push(n)},afterLoad:function(n){h?n.call():f.push(n)},thirdParties:function(n){c?l(n):e.push(n)}}}()}(jQuery,bs),function(n,t){"use strict";t.kenne={url:{mostread:"//d2jxb5t9gk1bpc.cloudfront.net/boligsiden-boxes/news/news-v1.php/mostread/",latest:"//d2jxb5t9gk1bpc.cloudfront.net/boligsiden-boxes/news/news-v1.php/latest/",counseling:"//d2jxb5t9gk1bpc.cloudfront.net/boligsiden-boxes/raadgivning/links-v1.php",financing:"//d2jxb5t9gk1bpc.cloudfront.net/boligsiden-boxes/financing/financing-v1.js.php",newsletter:"//dvbtopjtk69z5.cloudfront.net/wp-content/themes/boligsiden-2012/banner.external.frontpage.boligsiden.js.php",newslettersignup:"//dvbtopjtk69z5.cloudfront.net/wp-content/themes/boligsiden-2012/banner.external.newsletter.agent.js.php",foreclosurehelp:"//dvbtopjtk69z5.cloudfront.net/wp-content/themes/boligsiden-2012/box.external.foreclosure.articles.js.php",foreclosurenews:"//dk0w0rx1h4cwi.cloudfront.net/wp-content/themes/boligsiden/box.external.foreclosure.latest.js.php",wpbannerproperty:"//dvbtopjtk69z5.cloudfront.net/wp-content/themes/boligsiden-2012/banner.external.property.large.js.php"},run:function(){if(n("#news").length){n(".news-tabs").on("click","button",function(){n(".news-tabs button").removeClass("btn-default").addClass("btn-gray");n(this).hasClass("latest")?(n(".news-tabs .latest").addClass("btn-default").removeClass("btn-gray"),t.kenne.getLatest()):(n(".news-tabs .mostread").addClass("btn-default").removeClass("btn-gray"),t.kenne.getMostread())});t.kenne.getLatest()}if(n("#news-small").length){n(".news-tabs").on("click","a",function(){n(".news-tabs a").removeClass("selected");n(this).hasClass("latest")?t.kenne.getLatest(!0):t.kenne.getMostread(!0)});t.kenne.getLatest(!0)}t.kenne.setWpBanners("external");t.kenne.setWpBanners("internal");n("#counseling").length&&t.kenne.getCounseling();n("#counseling-small").length&&t.kenne.getCounseling(!0);n("#newsletter").length&&t.kenne.getNewsLetter();n("#newslettersignup").length&&t.kenne.getNewsLetterSignUp();n("#foreclosurehelp").length&&t.kenne.getForecloureHelp();n("#foreclosurenews").length&&t.kenne.getForecloureNews();n("#wpbannerproperty").length&&t.kenne.getWpBannerProperty()},getLatest:function(i){n.getJSONP(t.kenne.url.latest+(i?"?template=small":""),"latestCallback",function(n){t.kenne.appendVersion2Stuff("#news",i,n)})},getMostread:function(i){n.getJSONP(t.kenne.url.mostread+(i?"?template=small":""),"mostreadCallback",function(n){t.kenne.appendVersion2Stuff("#news",i,n)})},getCounseling:function(i){n.getJSONP(t.kenne.url.counseling+(i?"?template=small":""),"counselingCallback",function(n){t.kenne.appendVersion2Stuff("#counseling",i,n).find("a").css("display","block")})},appendVersion2Stuff:function(t,i,r){var u=n(t+(i?"-small":""));return u.html(r).find(".section").addClass("box-section box-inner"),u.find(".foot").addClass("box-footer").find("a").addClass("box-footer-link").append('<span class="box-footer-arrow"><i class="a a-w-b-r"><\/i><\/span>'),u},getFinancing:function(i){n.getJSONP(t.kenne.url.financing+"?id="+i,"financingCallBack",function(t){n("#financing-box").html(t)})},getNewsLetter:function(){n.getJSONP(t.kenne.url.newsletter,"newsletterCallback",function(t){n("#newsletter").html(t.html)})},getNewsLetterSignUp:function(){n.getJSONP(t.kenne.url.newslettersignup,"newsletterSignUpCallback",function(t){n("#newslettersignup").html(t.html)})},getForecloureHelp:function(){n.getJSONP(t.kenne.url.foreclosurehelp,"jowTakForeclosure",function(t){n("#foreclosurehelp").html(t)})},getForecloureNews:function(){n.getJSONP(t.kenne.url.foreclosurenews,"jowTakForeclosureNews",function(t){n("#foreclosurenews").html(t)})},getWpBannerProperty:function(){n.getJSONP(t.kenne.url.wpbannerproperty,"wpbannerproperty",function(t){n("#wpbannerproperty").html(t.html)})},setWpBanners:function(t){var i=n(".wp-banner."+t),r,u;i.length&&(r=i.length,u="//dvbtopjtk69z5.cloudfront.net/wp-content/themes/boligsiden-2012/banner."+t+".js.php?n="+r,n.getJSONP(u,"wpbanner"+t,function(t){i.each(function(i){var r=t.banners[i];r&&n(this).html(r)})}))}}}(jQuery,bs),function(n){"use strict";n.Storage=Class.extend({init:function(n){this._storage=n;this.isSupported=typeof this._storage!="undefined"},getItem:function(n){var t=null;return this.isSupported&&(t=this._storage.getItem(n)),JSON.parse(t)},setItem:function(n,t){var i=JSON.stringify(t);this.isSupported&&this._storage.setItem(n,i)},removeItem:function(n){this.isSupported&&this._storage.removeItem(n)},getSize:function(){var n,t;if(this.isSupported){n={};for(t in this._storage)n[t]=(this._storage[t].length/524288).toFixed(2)+" MB";return n}return null}});n.sessionStorage=function(){return new n.Storage(window.sessionStorage)}();n.localStorage=function(){return new n.Storage(window.localStorage)}()}(bs);bs.lazyLoad.hasRun=!1;bs.lazyLoad.scripts.push=function(n,t){var i={file:n,parentId:t};bs.lazyLoad.hasRun?bs.lazyLoad.getScript(i):bs.lazyLoad.scripts.files.push(i)};bs.lazyLoad.getScript=function(n){var t=document.createElement("script"),i,r;if(t.type="text/javascript",t.src=n.file,n.parentId!=undefined&&(i=document.getElementById(n.parentId),i)){bs.lazyLoad.onStart();t.onreadystatechange=function(n){n&&n.readyState==="complete"&&bs.lazyLoad.onFinish()};t.onload=bs.lazyLoad.onFinish;i.appendChild(t);return}r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r)};bs.lazyLoad.asyncLoad=function(){bs.lazyLoad.hasRun=!0;for(var n=0;n<bs.lazyLoad.scripts.files.length;n++)bs.lazyLoad.getScript(bs.lazyLoad.scripts.files[n])};bs.lazyLoad.orgWrite=null;bs.lazyLoad.onStart=function(){bs.lazyLoad.orgWrite=document.write;document.write=function(n){bs.lazyLoad.onavailable("poll-daddy-wrap",function(t){t.innerHTML+=n});return!0}};bs.lazyLoad.onavailable=function(n,t){var i=document.getElementById(n);if(!i){window.setTimeout(function(){bs.lazyLoad.onavailable(n,t);n=t=null},100);return}t(i)};bs.lazyLoad.onFinish=function(){document.write=bs.lazyLoad.orgWrite},function(){window.attachEvent?window.attachEvent("onload",bs.lazyLoad.asyncLoad):window.addEventListener("load",bs.lazyLoad.asyncLoad,!1)}(),function(n,t){var r=null,i=function(i,r,u,f){n.BSBanners=r;n.BSTargeting=u;n.BSPageViewId=f;var o=navigator.userAgent.indexOf("Firefox")>=0,e=t.url("~/advertisement.htm?v=6");if(i.contentDocument&&o)try{i.contentDocument.location.replace(e)}catch(s){}else i.src=e};t.renderAds=function(t,u,f){var o,h,c,l,s,e;if(t&&(o=document.getElementById("advertisement"),o))if(r===null&&n.matchMedia){if(n.innerWidth<945){for(h=[],s=0;e=t[s];s++)e&&e.id==="bannerHeader"||e.id==="bannerRight"?(e.id==="bannerHeader"&&h.push({id:"bannerHeader",cu:"18688"}),e.id==="bannerRight"&&h.push({id:"bannerRight",cu:"18795"})):h.push(e);i(o,h,u,f)}else i(o,t,u,f);for(c=null,l=null,s=0;e=t[s];s++)(e&&e.id==="bannerHeader"||e.id==="bannerRight")&&(e.id==="bannerHeader"&&(c=e.cu),e.id==="bannerRight"&&(l=e.cu));if(c){function a(n){n.matches?i(o,[{id:"bannerHeader",cu:"18688"},{id:"bannerRight",cu:"18795"}],u,f):i(o,[{id:"bannerHeader",cu:c},{id:"bannerRight",cu:l}],u,f)}r=n.matchMedia("screen and (max-width : 945px)");r.addListener(a)}}else i(o,t,u,f)}}(window,bs);Number.prototype.toStringWithThousandSeparator=function(){for(var n=this.toString().replace(".",","),t=/(\d+)(\d{3})/;t.test(n);)n=n.replace(t,"$1.$2");return n};Number.prototype.toShortNumber=function(n){var t;return t=this>999999?(parseFloat(this)/1e6).toFixed(n)+"M":this>999?(parseFloat(this)/1e3).toFixed(n)+"K":this,t.toString().replace(".",",")};Number.prototype.of=function(n,t){return this+" "+(parseInt(this,10)===1?n:t)};String.prototype.toStringWithThousandSeparator=function(){for(var n=this.replace(".",","),t=/(\d+)(\d{3})/;t.test(n);)n=n.replace(t,"$1.$2");return n};String.prototype.upperCaseFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)};bs=bs||{};bs.utils=bs.utils||{};bs.utils.isKey=function(n,t){var i;return window.event?i=window.event.keyCode:n&&(i=n.which),i===t};bs.utils.ctrl={getCaretPosition:function(n){var t=0,i;return document.selection?(n.focus(),i=document.selection.createRange(),i.moveStart("character",-n.value.length),t=i.text.length):(n.selectionStart||n.selectionStart=="0")&&(t=n.selectionStart),t},setCaretPosition:function(n,t){if(n.setSelectionRange)n.focus(),n.setSelectionRange(t,t);else if(n.createTextRange){var i=n.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",t);i.select()}}};bs.utils.browser={is:function(n){return $(n).length>0},isSlowBrowser:function(){return bs.utils.browser.is("body.ie7,body.ie8,body.mobile")},isMobileBrowser:function(){return bs.utils.browser.is("body.mobile")},isIe7:function(){return bs.utils.browser.is("body.ie7,body.ie6,body.ie5")},isIe8OrLess:function(){return bs.utils.browser.is("body.ie8,body.ie7,body.ie6,body.ie5")},isIPad:function(){return bs.utils.browser.is("body.ipad")},isIos7:function(){return bs.utils.browser.is("body.ios7")},supportsPlaceholder:function(){var n=document.createElement("input");return"placeholder"in n},supportsCssTransitions:function(){for(var i=["transition","OTransition","WebkitTransition","MozTransition"],n=0,t;t=i[n];n++)if(t in document.body.style)return!0;return!1},supportsHistory:function(){return window.history&&"pushState"in window.history}};bs.utils.site={is:function(n){return $(n).length>0},isResponsive:function(){return bs.utils.site.is("body.responsive")},isWeb:function(){return bs.utils.site.is("body.web")},isTvang:function(){return bs.utils.site.is("body.tvang")},isMySite:function(){return bs.utils.site.is("body.minside")},isAgent:function(){return bs.utils.site.is("body.maegler")},isLocalhost:function(){return bs.utils.site.is("body.localhost")}};bs.utils.isElementInViewport=function(n){if(n instanceof jQuery&&(n=n[0]),n==undefined)return!1;var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};bs.utils.serializeParams=function(n){function i(n,t){var r=[],e,u,f;for(e in n)u=n[e],f=t.slice(0),f.push(e),u instanceof Object?r=r.concat(i(u,f)):r.push(f.join(".")+"="+u);return r}var r={},t,u;for(t in n)n[t]!=null&&(r[t]=n[t]);return u=i(r,[]),u.join("&")};bs.utils.location={getParameter:function(n){for(var i,u=window.location.search.substring(1),r=u.split("&"),t=0;t<r.length;t++)if(i=r[t].split("="),i[0]==n)return i[1];return null}};bs.utils.validateEmail=function(n){var t=new RegExp("^(([a-zA-Z]|[0-9])|([-]|[_]|[.]))+[@](([a-zA-Z0-9])|([-])){2,63}[.](([a-zA-Z0-9]){2,63})+$");return t.test(n)},function(){"use strict";Vue.filter("caseInsensitiveOrderBy",function(n,t,i){if(!t)return n;var r=i&&i<0?-1:1;return n.slice().sort(function(n,i){return t!=="$key"&&(Vue.util.isObject(n)&&"$value"in n&&(n=n.$value),Vue.util.isObject(i)&&"$value"in i&&(i=i.$value)),n=Vue.util.isObject(n)?Vue.parsers.path.getPath(n,t):n,i=Vue.util.isObject(i)?Vue.parsers.path.getPath(i,t):i,n=n.toLowerCase(),i=i.toLowerCase(),n===i?0:n>i?r:-r})})}(),function(n){"use strict";n.vue=n.vue||{};n.vue.FreeText=Vue.extend({data:function(){return{newword:"",words1:[],words2:[],facilities:[],showFacilites:!0,checkFilterLock:!1}},computed:{words:{get:function(){return this.words1.concat(this.words2)},set:function(n){var t=this;n==undefined||n.length===0?(t.words1=[],t.words2=[]):n.forEach(function(n){n.Handle!=undefined?t.words2.push(n):t.words1.push(n)})}}},methods:{wordIsInList:function(n){return this.words.some(function(t){return t.Name.toUpperCase()===n.trim().toUpperCase()})},findInFacilities:function(n){for(var r=n.Name.toUpperCase(),i=0,t;t=this.facilities[i];i++)if(t.Name.toUpperCase()===r)return t;return undefined},showTipInfo:function(t){n.tip.info("#free-text-text",t,{position:"top"})},hideTipInfo:function(){n.tip.hide("#free-text-text")},keyDown:function(){this.addWord()},clickFacility:function(t){var i=this,r=function(){i.addFacility(t)&&i.$emit("facility_clicked",t)};this.checkFilterLock&&n.filters.isLocked?n.filters.showLockedMessage($(".freetext-facilities")).then(r):r()},addWord:function(){var t=this,i=function(){t.addFacility({Name:t.newword})&&(t.$emit("word_typed",t.newword),t.newword="")};this.checkFilterLock&&n.filters.isLocked?n.filters.showLockedMessage($("#free-text-text").parent().parent()).then(i):i()},handleFocus:function(){if(this.checkFilterLock&&n.filters.isLocked){var t=this;n.filters.showLockedMessage($("#free-text-text").parent().parent()).then(function(){$(t.$els.wordinput).focus()});$(t.$els.wordinput).blur()}},addFacility:function(n){var t=n.Name.trim();if(t.length<1)this.hideTipInfo();else if(t.length<4)this.showTipInfo("Søgeord skal være min. 4 tegn");else if(this.wordIsInList(t))this.showTipInfo("Søgeordet er allerede tilføjet");else return this.hideTipInfo(),n=this.findInFacilities(n)||n,n.Handle==undefined?this.words1.push({Name:t}):this.words2.push({Name:t,Handle:n.Handle}),this.$emit("word_added",n),!0;return!1},removeWord:function(t){var i=this,r=function(){i.hideTipInfo();i.words1.$remove(t);i.words2.$remove(t);i.$emit("word_removed",t)};this.checkFilterLock&&n.filters.isLocked?n.filters.showLockedMessage($(".freetext-words")).then(r):r()}}})}(bs),function(n){"use strict";var t="#dfdfdf",u="#676464",i="#000",f=["Solid","Dot","Dash","DashDot"],r=["#CC3300","#FF9900","#339900","#663399"],e=function(){Highcharts.setOptions({lang:{shortMonths:["jan","feb","mar","apr","maj","jun","jul","aug","sep","okt","nov","dec"],decimalPoint:",",thousandsSep:"."},global:{useUTC:!1}})},o=function(n){var e=$.map(n.series,function(n){return{name:n.areaName+" - "+n.propertyType.name,areaName:n.areaName,propertyTypeName:n.propertyType.name,propertyTypeNameSingular:n.propertyType.singular,propertyTypeNamePlural:n.propertyType.plural,seriesType:"graph",color:r[n.color],fillColor:r[n.color],dashStyle:f[n.dashStyle],showInLegend:!1,type:"line",data:$.map(n.data,function(n){return{x:new Date(n.x),y:n.y,count:n.count}})}}),o={},s=$.map(e,function(n){return o[n.areaName]?null:(o[n.areaName]=!0,{name:n.areaName,seriesType:"areaLegend",color:n.color,fillColor:n.color,dashStyle:"Solid",type:"line",data:null})}),o={},h=$.map(e,function(n){return o[n.propertyTypeName]?null:(o[n.propertyTypeName]=!0,{name:n.propertyTypeName,seriesType:"typeLegend",color:i,fillColor:i,dashStyle:n.dashStyle,type:"line",marker:{enabled:!1},data:null})});return $.merge(e,s),$.merge(e,h),{chart:{type:"line",events:{beforePrint:function(){console.log("Hepper");this.resetParams=[this.chartWidth,this.chartHeight,!1];this.setSize(600,400,!1)},afterPrint:function(){console.log("Hepperd");this.setSize.apply(this,this.resetParams)}}},title:{text:null},xAxis:{type:"datetime",tickmarkPlacement:"on",labels:{formatter:function(){return Highcharts.dateFormat("%b<br/>%Y",this.value,!0)}},tickcolor:t,linecolor:t},yAxis:{title:{align:"middle",text:n.statisticType.valueLabel,rotation:270,style:{"font-family":"Arial","font-weight":"bold",color:u}},floor:0,tickColor:t,tickWidth:1,lineColor:t,lineWidth:1,gridLineColor:t,plotLines:[{value:0,width:1}]},tooltip:{formatter:function(){var i=new Date(this.x),t=[Highcharts.dateFormat("%b %Y",i,!0),this.series.options.areaName];return n.statisticType.unitSingular!=null&&n.statisticType.unitPlural!=null?(t.push([n.statisticType.unitPlural==="%"?Highcharts.numberFormat(this.y*100,2):Highcharts.numberFormat(this.y,0),this.y==1?n.statisticType.unitSingular:n.statisticType.unitPlural].join(" ")),this.point.count?t.push(["baseret på",Highcharts.numberFormat(this.point.count,0),this.point.count==1?this.series.options.propertyTypeNameSingular:this.series.options.propertyTypeNamePlural].join(" ")):t.push(this.series.options.propertyTypeName)):t.push([Highcharts.numberFormat(this.y,0),this.y==1?this.series.options.propertyTypeNameSingular:this.series.options.propertyTypeNamePlural].join(" ")),t.join("<br/>")},backgroundColor:"#333333",borderWidth:0,style:{color:"#fff"}},legend:{enabled:!0,verticalAlign:"bottom",borderWidth:0,itemStyle:{"font-family":"Arial"}},plotOptions:{series:{marker:{lineWidth:2,symbol:"circle",enabled:!0},animation:!1,events:{legendItemClick:function(n){this.visible?this.hide():this.show();var t=this.chart,i=$.map($.grep(t.series,function(n){return n.options.seriesType=="areaLegend"&&n.visible==!1}),function(n){return n.name}),r=$.map($.grep(t.series,function(n){return n.options.seriesType=="typeLegend"&&n.visible==!1}),function(n){return n.name}),u=$.grep(t.series,function(n){return n.options.seriesType=="graph"});$.each(u,function(n,t){var u=$.inArray(t.options.areaName,i)>-1||$.inArray(t.options.propertyTypeName,r)>-1;u^!t.visible&&(t.visible?t.hide():t.show())});n.preventDefault()}}}},credits:{enabled:!1},series:e}};n.vue=n.vue||{};n.vue.Chart=Vue.extend({template:'<div class="box"><div class="box-header">{{statisticTitle}}<\/div><div class="box-inner" style="height: 315px;">{{{message}}}<div v-if="showErrorMessage"><p>Der er desværre ikke data for den valgte geografi og boligtype<\/p><p>Gå til <a :href="markedindexlink">Boligsidens Markedsindeks og statistik<\/a> for at dykke ned i andre tal for boligmarkedet<\/p><\/div><div v-if="hasData" class="chart" style="height: 300px"><\/div><\/div><\/div>',props:{statisticType:{type:String,required:!0},areas:{type:Array,required:!0},propertyTypes:{type:Array,required:!0}},data:function(){return{statisticTitle:"Henter graf...",message:"Henter data...",hasData:!1,showErrorMessage:!1}},watch:{"statisticType + areas + propertyTypes":function(){this.fetchData()}},ready:function(){var n,t,i;e();this.fetchData();n=this;t=function(){n.chart&&n.chart.reflow()};window.matchMedia&&(i=window.matchMedia("print"),i.addListener(function(){t()}))},attached:function(){this.chart&&this.chart.reflow()},computed:{markedindexlink:function(){var n="&areas="+this.areas.join("&areas="),t="&propertyTypes="+this.propertyTypes.join("&propertyTypes=");return"http://markedsindeks.boligsiden.dk/?statisticType="+this.statisticType+n+t}},methods:{fetchData:function(){var t=this,i;this.propertyTypes.length===0||this.propertyTypes[0]===0?(t.statisticTitle="Der er desværre ingen data",t.message="",t.showErrorMessage=!0,t.hasData=!1):(i=$.param({statistictype:this.statisticType,areas:this.areas,propertytypes:this.propertyTypes},!0),n.getJSON("~/marketindex/getdata",i,function(i){n.json.checkResultErrors(i)?(t.message="",t.showErrorMessage=!1,t.hasData=i.data.hasData,t.statisticTitle=i.data.statisticType.name,t.hasData?(t.chart!=null&&t.chart.destroy(),Vue.nextTick(function(){t.chart=$(t.$el).find(".chart").highcharts(o(i.data)).highcharts()})):t.showErrorMessage=!0):t.message="Der er sket en fejl under hentning af data"}))}}})}(bs),function(n){"use strict";n.vue=n.vue||{};n.vue.StarRating=Vue.extend({template:'<div class="star-rating"><label class="star-rating-star"v-for="rating in ratings":class="{ \'is-selected\': ((value >= rating) && value != null), \'is-disabled\': disabled, half: rating % 20 == 10, \'star-rating-star-s\': size == \'small\' }"@mouseover="starOver(rating)"@mouseout="starOut"@click.prevent="set(rating)"><input class="star-rating star-rating-radio"type="radio":name="name":value="rating":required="required":id="id":disabled="disabled"v-model="value"/><\/label><\/div>',data:function(){return{tempValue:null,ratings:[10,20,30,40,50,60,70,80,90,100]}},props:{name:String,value:null,id:String,disabled:Boolean,required:Boolean,size:String},methods:{starOver:function(n){this.disabled||(this.tempValue=this.value,this.value=n)},starOut:function(){this.disabled||(this.value=this.tempValue)},set:function(n){this.disabled||(this.tempValue===n&&(n=null),this.tempValue=n,this.value=n,this.$dispatch("starrating:set",{name:this.name,value:n}))}}})}(bs),function(n){"use strict";n.vue=n.vue||{};n.vue.CommentRating=Vue.extend({data:function(){return{starSetTracked:{},commentTracked:!1,propertyId:"",averageRating:null,roundAverageRating:null,ratings:{ConditionRating:null,KitchenRating:null,LocationRating:null,BathRating:null},comment:{Comment:null,Propertyid:null},errorMessage:null,saving:!1}},components:{"star-rating":n.vue.StarRating},ready:function(){var t=this;$.getJSON(n.url("~/property/getratingandcomment"),{id:this.propertyId},function(i){if(n.json.checkResultErrors(i)){if(i.Status==="NotLoggedIn"){t.$dispatch("commentrating:notloggedin:onready");return}t.ratings=i.Data.ratings.Ratings;t.averageRating=i.Data.ratings.AverageRating;t.roundAverageRating=i.Data.ratings.RoundAverageRating;t.comment=i.Data.comment;t.$dispatch("commentrating:ready")}})},methods:{save:function(t){if(this.comment.Comment&&this.comment.Comment.length>0&&/<[^>]+>/.test(this.comment.Comment)){this.errorMessage="Feltet må ikke indholde html tags";return}var i=this;i.saving=!0;this.comment.Comment===""||i.commentTracked||n.trak.ui.commentRatingBox("Impression - Comment set");$.postJSON(n.url("~/property/setratingandcomment"),{id:this.propertyId,rating:this.ratings,comment:this.comment},function(r){if(i.saving=!1,n.json.checkResultErrors(r)){if(r.Status==="NotLoggedIn"){i.$dispatch("commentrating:notloggedin");return}i.ratings=r.Data.ratings.Ratings;i.averageRating=r.Data.ratings.AverageRating;i.roundAverageRating=r.Data.ratings.RoundAverageRating;i.comment=r.Data.comment;i.expanded=!1;i.$dispatch("commentrating:saved",{averageRating:i.averageRating,roundAverageRating:i.roundAverageRating});n.trak.ui.commentRatingBox("Click on "+t)}else i.errorMessage="Der er sket en fejl, genindlæs venligst siden"})},resetError:function(){this.errorMessage=""}},events:{"starrating:set":function(t){this.starSetTracked[t.name]||(this.starSetTracked[t.name]=!0,n.trak.ui.commentRatingBox("Impression - Star set",t.name))}}})}(bs),function(n,t,i){"use strict";i.q.ready(function(){t.ajaxSetup({cache:!1});i.login.init();i.searchBar.init();i.navBar();i.tip.init()});i.q.afterLoad(function(){i.infobox.init();i.trak.topmenuV2()});i.q.thirdParties(function(){i.kenne.run()})}(window,jQuery,bs),function(n,t,i){"use strict";i.navBar=function(){var n=t(".nav-bar-toggle");if(n.length)n.on("click",function(){t(".header-nav-bar").toggleClass("show")})}}(window,jQuery,bs),function(n,t,i){"use strict";i.searchBar={init:function(){t(".search-bar-wrap").on("transitionend oTransitionEnd webkitTransitionEnd MozTransition",function(){t(".search-bar").removeClass("search-bar-active")});t(".search-bar-btn").on("click",function(){t(".search-bar").hasClass("search-bar-hidden")?i.searchBar.show():i.searchBar.hide()})},hide:function(){i.trak.ui.searchBar("Hide");t(".search-bar").addClass("search-bar-active").addClass("search-bar-hidden")},show:function(){i.trak.ui.searchBar("Show");t(".search-bar").addClass("search-bar-active").removeClass("search-bar-hidden")}}}(window,jQuery,bs),function(n,t,i){"use strict";i.login={referrer:null,init:function(){var n=this;t(".btn-login").on("click",function(){return t("#login-frame").length===0?t(this).hasClass("logged-in")?n.showFrame("LoggedInFrame"):n.showFrame("Frame"):n.removeFrame(),!1})},showFrame:function(n){var r=this,u=this.referrer?{referrer:encodeURI(this.referrer)}:null;i.get("~/Login/"+n,u,function(n){t(".header-nav-bar .content").append(n);t("body").one("click",r.removeFrame)})},removeFrame:function(){t("#login-frame").remove()}}}(window,jQuery,bs),function(n,t,i){"use strict";i.infobox={init:function(n){var r=t.extend({controller:"version2"},n);t(document).on("click.infobox","[data-infobox-id]",function(){var n=t(this),u=n.data("infoboxId");n.on("mouseenter",function(n){return n.preventDefault(),!1});i.get("~/"+r.controller+"/infobox/"+u,function(t){i.tip.hover(n,t,{color:"blue",interactive:!0,closeButton:!0});n.protipToggle()})})}}}(window,jQuery,bs),function(n,t,i){"use strict";i.ChartDemand=i.EventClass.extend({init:function(){this.options={controllerUrl:"~/version2/chartdemand"};this.$chartDemand=t(".chart-demand");this.$municipality=t("#municipality");this.$postalArea=t("#postalarea");this.$propertyType=t("#propertytype");this.setup()},setup:function(){var n=this;if(n.$chartDemand.length>0&&n.$municipality.length>0&&n.$postalArea.length>0){i.q.load(function(){n.$municipality.children().length<=1&&n.getMunicipalities();n.$postalArea.children().length<=1&&n.getPostalAreas()});n.$municipality.on("focus",function(){n.$municipality.children().length<=1&&n.getMunicipalities()}).on("change",function(){i.trak.ui.chartDemandChange("Municipality",t(this).find(":selected").text());n.getPostalAreas();n.$propertyType.val("0");n.getData(t(this).val())});n.$postalArea.on("focus",function(){n.$postalArea.children().length<=1&&n.getPostalAreas()}).on("change",function(){i.trak.ui.chartDemandChange("PostalArea",t(this).find(":selected").text());var r=n.$postalArea.val();r=="alle"&&(r=n.$municipality.val());n.getData(r,t(this).val())});n.$propertyType.on("click",function(){i.trak.ui.chartDemandChange("PropertyType",t(this).find(":selected").text());var r=n.$postalArea.val();r=="alle"&&(r=n.$municipality.val());n.getData(r,t(this).val())})}},getMunicipalities:function(){var n=this;i.getJSON(this.options.controllerUrl+"/GetMunicipalities",function(t){n._appendFragments(n.$municipality,t)})},getPostalAreas:function(){var n=this;i.getJSON(this.options.controllerUrl+"/GetPostalAreas",{municipality:n.$municipality.val()},function(t){n._appendFragments(n.$postalArea,t)})},getData:function(n){i.getJSON(this.options.controllerUrl+"/GetChartDemandData",{geo:n,propertyType:this.$propertyType.val()},function(n){n.TableData.length>0&&(t(".table-chart thead td span").each(function(i){t(this).html(n["Percent"+(i+1)]+"%")}),t(".table-chart .chart").each(function(i){t(this).css({width:n.TableData[i].Percent+"%"})}))})},_appendFragments:function(n,t){var r,u,f,i;if(t.length>0){for(r=document.createDocumentFragment(),n.empty(),u=0;f=t[u];u++)i=document.createElement("option"),i.value=f.Value,i.innerHTML=f.Text,r.appendChild(i);n.append(r)}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.follow=function(n){if(!i.utils.browser.isMobileBrowser()){var r=$("body"),t=$("#tip-box");if(n==undefined||n==="")r.off("mousemove.tipbox"),t.remove();else{t.length===0&&(t=$("<div id='tip-box'><\/div>").appendTo(r));t.text(n).css({"min-width":"auto"}).addClass("ui-tooltip");r.on("mousemove.tipbox",function(n){var i=n.clientY-10,r=n.clientX+15;t.css({top:i,left:r,display:"block"})})}}}}(window,jQuery,bs),function(n,t,i){"use strict";i.tipsystem=new(i.EventClass.extend({init:function(){var n=this;i.q.ready(function(){n.tips=t(".tip-wrap").data("tips");n._setup();n._showPageLoadTip()});i.q.afterLoad(function(){n._showHideWrapper()})},_setup:function(){var r=t(".tip-wrap"),u=null,f=null;r.on("mouseenter",function(){n.clearTimeout(f);f=null;u!=null||r.hasClass("visible")||(u=n.setTimeout(function(){r.stop(!0).animate({left:0},500,function(){t(".tip-accordion").stop(!0).slideDown()});i.trak.ui.tipSystem("MouseEnter","OpenBox")},300))}).on("mouseleave",function(){n.clearTimeout(u);u=null;f!=null||r.hasClass("visible")||(f=n.setTimeout(function(){t(".tip-accordion").stop(!0).slideUp(function(){r.stop(!0).animate({left:-227},500)});i.trak.ui.tipSystem("MouseLeave","CloseBox")},300))});t(".tip-button").on("click",function(){r.hasClass("visible")?(t(".tip-button").attr("title","Klik på overskriften for at holde vinduet åbent"),t(".tip-accordion").stop(!0).slideUp(function(){r.stop(!0).animate({left:-227},500,function(){r.removeClass("visible")})}),i.trak.ui.tipSystem("Click","CloseBox")):(r.addClass("visible"),t(".tip-button").attr("title","Klik for at folde vinduet sammen"),i.trak.ui.tipSystem("Click","OpenBox"))});t(".tip-accordion").accordion({collapsible:!0,heightStyle:"content",activate:function(){i.trak.ui.tipSystem("Click","ClickInsideBox")}})},_showHideWrapper:function(){i.cookie.tipWrapShownToday.get()!=!0&&(t(".tip-wrap").addClass("shown",500),n.setTimeout(function(){t(".tip-wrap").removeClass("shown",500)},1e3),i.cookie.tipWrapShownToday.set())},_showPageLoadTip:function(){var r,u,n,f,i;if(this.tips!=null&&(r=t.grep(this.tips,function(n){return n.PageLoadTip&&n.ShowItAsPopup}),r.length>0)){for(u=Number.POSITIVE_INFINITY,n=null,f=0;i=r[f];f++)i.Priority<u&&(u=i.Priority,n=i);n!=null&&this._showTheTip(n)}},_showTheTip:function(n){t(".tip-wrap").is(":visible")&&(t("<div/>",{title:n.Title}).append(t("<div/>",{html:n.Html})).bsDialog({bsType:"tipDialog",width:430}),n.ShowItAsPopup=!1,i.cookie.tipsShown.set(n.Id))},showTipDialog:function(n){var t=this._getTip(n);t!=null&&t.ShowItAsPopup===!0&&this._showTheTip(t)},getShowItAsPopup:function(n){var t=this._getTip(n);return t!=null&&t.ShowItAsPopup===!0},_getTip:function(n){if(this.tips!=null)for(var i=0,t;t=this.tips[i];i++)if(n===t.Id)return t;return null}}))}(window,jQuery,bs),function(n,t,i){"use strict";i.tip={buttonTemplate:'<div class="{classes}" data-pt-identifier="{identifier}" style="{widthType}:{width}px">{arrow}{icon}<div class="protip-close">x<\/div><div class="protip-content">{content}<\/div><\/div>',init:function(){t("body").on("protiphide",function(n,i){t(i.el.protip).css({left:"0px",top:"0px"})});t.protip({protipTemplate:i.tip.buttonTemplate,observer:!1,selector:i.utils.browser.isMobileBrowser()?".den-kan-vi-ikke-finde":".protip"})},tip:function(r,u,f){var e,o,s;if(i.check.requireNotNullOrUndefined(r,"selector"),i.check.requireNotNullOrUndefined(u,"content"),e=t.extend({width:n.innerWidth<450?220:300,color:"blue",closeButton:!1,position:"bottom",trigger:"sticky",target:"body",classes:null,gravity:null,buttons:{}},f),r instanceof jQuery||(r=t(r)),u instanceof jQuery||(u=t("<div/>",{html:u})),o=[],t.each(e.buttons,function(n,t){if(t!=null)switch(t.type){case"checkbox":o.push("<input type='checkbox' class='cb "+t["class"]+"' id='"+t.id+"' /><label for='"+t.id+"'>"+t.text+"<\/label>");break;default:o.push("<button class='btn btn-s btn-default "+t["class"]+"'>"+t.text+"<\/button>")}}),o.length>0&&u.append(t("<div class='protip-btn-pane'><\/div>").append(o)),r.protipShow({title:u.html(),width:e.width,position:e.position,trigger:e.trigger,target:e.target,gravity:e.gravity,classes:e.color+(e.closeButton?" show-close":"")+(e.classes?" "+e.classes:"")}),s=t(t._protipClassInstance.getItemInstance(r).el.protip),t.each(e.buttons,function(n,t){if(t!=null)s.find("."+t["class"]).on("click.tip",function(){t.callback.call(this,r)})}),e.closeButton)s.find(".protip-close").on("click",function(){r.protipHide();typeof e.closeButton=="function"&&e.closeButton.call()})},promotion:function(r,u,f,e){if(i.check.requireNotNullOrUndefined(r,"id"),i.check.requireNotNullOrUndefined(u,"selector"),!i.cookie.userSettingsSaved.promotion.isDisabled(r)){var o=t.extend({delay:0,position:"top",color:"yellow",trakLabel:"Not Set",closeButton:function(){i.tip.promotionDisable(r);i.trak.ui.promotionTip("Click",o.trakLabel)}},e);n.setTimeout(function(){i.tip.tip(u,f,o);i.trak.ui.promotionTip("Impression",o.trakLabel)},o.delay)}},promotionDisable:function(n){i.cookie.userSettingsSaved.promotion.disable(n)},info:function(n,r,u){var f=t.extend({position:"right"},u);i.tip.tip(n,r,f)},hover:function(n,r,u){var f,e;if(n instanceof jQuery||(n=t(n)),f=t.extend(!0,{width:i.utils.browser.isMobileBrowser()?220:300,interactive:!1,closeButton:!1,color:"red",position:"bottom",trigger:"hover"},u),n.protipSet({title:r,width:f.width,position:f.position,trigger:f.trigger,classes:f.color+(f.closeButton?" show-close":""),interactive:f.interactive}),f.closeButton){e=t(t._protipClassInstance.getItemInstance(n).el.protip);e.find(".protip-close").on("click",function(){i.tip.remove(n)})}},show:function(n,r,u){n instanceof jQuery||(n=t(n));var f=t.extend(!0,{color:"blue",hiddenDialogName:null,continueCallback:null,closeOnBodyClick:!1,position:"bottom",trigger:"sticky",buttons:{"continue":{text:"Fortsæt","class":"btn-continue",callback:function(n){n.protipHide()}},cancel:{text:"Annuller","class":"btn-cancel",callback:function(n){n.protipHide()}}}},u);if(f.hiddenDialogName!==null&&i.cookie.userSettings.hiddenDialog.get(f.hiddenDialogName)===!0){typeof f.continueCallback=="function"&&f.continueCallback.call(this);return}if(f.hiddenDialogName!==null&&(f.buttons.hiddendialog={text:"Vis ikke igen",type:"checkbox","class":"cb-show",id:f.hiddenDialogName,callback:function(){t(this).is(":checked")?i.cookie.userSettings.hiddenDialog.set(f.hiddenDialogName,!0):i.cookie.userSettings.hiddenDialog.set(f.hiddenDialogName,!1)}}),i.tip.tip(n,r,f),f.closeOnBodyClick)t("body").on("click."+f.hiddenDialogName,function(i){var r=t(t._protipClassInstance.getItemInstance(n).el.protip);r.is(i.target)||r.has(i.target).length!==0||(n.protipHide(),t("body").off("click."+f.hiddenDialogName))})},hide:function(n){n instanceof jQuery||(n=t(n));n.protipHide()},remove:function(n){n instanceof jQuery||(n=t(n));var i=t(t._protipClassInstance.getItemInstance(n).el.protip);i.remove()}}}(window,jQuery,bs),function(n,t,i){"use strict";i.FavoriteBox=i.EventClass.extend({init:function(n){this.options=t.extend({promotionTrakLabel:"Not Set"},n);this.setupFavoriteBox()},setupFavoriteBox:function(){var r=this;t("#favorite-wrap").on("click",".favorite-mark input",function(){var n=this.id.replace("favorite-mark_",""),u=i.favoriteMark(this,n);i.get("~/version2/favorite/favoritebox",function(n){t("#favorite-wrap").html(n)});r.trigger("favoritemark_click",{id:n,checked:!1})});t("#favorite-wrap").on("click",".btn-setfavoritemailagent",function(){return r.setFavoriteMailAgent(this),!1});t("#favorite-wrap .btn-setfavoritemailagent").hasClass("i-bell-gray")&&i.tip.promotion("favoritebox","#favorite-wrap .btn-setfavoritemailagent","Opret overvågning på din huskeliste ved at klikke her",{delay:3e3,width:200,position:n.innerWidth<635?"top-left-corner":"top",trakLabel:r.options.promotionTrakLabel,target:".favorite-box"})},setFavoriteMailAgent:function(n){i.services.searches.closeDialogs();var r=t(n),u=function(n){i.services.searches.closeDialogs();i.services.searches.update({controller:"favorites",action:"setMailAgentFavorite",trakLabel:"List",parameters:{active:n},okCallback:function(){n?(i.tip.promotionDisable("favoritebox"),r.removeClass("i-bell-gray").addClass("i-bell-yellow"),r.protipSet({title:"Fjern overvågning"})):(r.removeClass("i-bell-yellow").addClass("i-bell-gray"),r.protipSet({title:"Opret overvågning"}))},errorCallback:function(){i.dialog.error("Genindlæs venligst siden")}})};r.hasClass("i-bell-yellow")?i.services.searches.getSetMailAgentFavoriteDialog(r,function(){u(!1)}):u(!0)}})}(window,jQuery,bs),function(n,t,i){"use strict";i.List=i.EventClass.extend({init:function(n){this.count=n.count;this.preTrakName=n.preTrakName;this.parameters=t.extend({resultId:"",sortKey:""},n.parameters);this.setup()},setup:function(){var n=this;t("#list").on("click",".displaytab .btn",function(){t(".displaytab").data("activeTab",t(this).data("tab"));n.triggerListChange("displaytab");n.preTrakName!=undefined&&i.trak.ui[n.preTrakName+"ViewType"](t(this).data("tab"))}).on("click",".paging .btn",function(){var i=t(this);t(".paging").data("pagenumber",i.data("pagenumber"));n.triggerListChange("paging");i.parent().parent().hasClass("list-pager-bottom")&&n.gotoTop()}).on("click",".list-sorting a",function(){return n.handleSortingClick(this)}).on("click",".gototop",this,function(){return n.gotoTop(),n.preTrakName!=undefined&&i.trak.ui[n.preTrakName+"Top"](t(".displaytab").data("activeTab")),!1});i.q.load(function(){n.setupLive()})},setupLive:function(){var n=this;t(".items-per-page").on("change",function(){n.count>400&&this.value==400&&i.cookie.itemsPerPageDialog.get()==null&&(i.dialog.normal("<div id='comparedialog' title='Søgeresultater'><p>Vi kan desværre højst vise 400 boliger pr. side. Du kan overveje at indsnævre din søgning i venstre side.<\/p><\/div>"),i.cookie.itemsPerPageDialog.set());t(".items-per-page").data("itemsperpage",this.value);n.triggerListChange("itemsperpage")});t(".list-sorting").bsSticky();this.loadImages()},handleSortingClick:function(n){var r=t(n).data("sortkey"),u=t(n).data("sortdescending"),f=t(".list-sorting").data("sortkey");return typeof r=="string"&&r.toUpperCase()===f.toUpperCase()&&(u=!t(".list-sorting").data("sortdescending")),t(".list-sorting").data("sortkey",r),t(".list-sorting").data("sortdescending",u),this.triggerListChange("sorting"),typeof this.preTrakName=="string"&&i.trak.ui[this.preTrakName+"Sorting"](r),!1},updateListView:function(r){t("#list").empty().append(r);this.setupLive();i.trak.pageView();try{n.postMessage&&n.postMessage({type:"bs_list_updated"},"*")}catch(u){}},loadImages:function(){t("img.unveil").unveil()},triggerListChange:function(n){this.trigger("bs_list_onchange",{change:n,parameters:this.getParameters()})},gotoTop:function(){n.scrollTo(0,185)},getParameters:function(){return{displayTab:t(".displaytab").data("active-tab"),itemsPerPage:t(".items-per-page").data("itemsperpage"),pageNumber:t(".paging").data("pagenumber"),sortKey:t(".list-sorting").data("sortkey"),sortDescending:t(".list-sorting").data("sortdescending")}},showSpinner:function(){var n=t(".list-items");n.css("opacity","0.5").append(t("<div/>",{"class":"bs-element-spinner-loader",css:{background:"transparent url("+i.url("~/content/common/img/ajax-loader-48.gif")+") no-repeat 50% 50%","z-index":"9999",position:"absolute",width:"100%",height:"300px",top:"0"}}))},hideSpinner:function(){t(".list-items").css("opacity","1").find(".bs-element-spinner-loader").remove()},setAndRenderAds:function(n,t,i){this._banners=n;this.renderAds(t,i)},renderAds:function(n,t){this._banners!=null&&i.renderAds(this._banners,n||"",t)},updatePropertyCount:function(n){t(".list-tab .property .count").text(n)},updateForeclosureCount:function(n){t(".list-tab .foreclosure .count").text(n)},updateRentalCount:function(n){t(".list-tab .rental .count").text(n)}})}(window,jQuery,bs),function(n,t,i){"use strict";i.list=i.list||{};i.list.listItem=function(n){var i={};return i.$this=t(n),i.$main=t(n).parents(".list-item"),i.$extraInfo=i.$main.find(".list-item-extra-info"),i.$footerA=i.$main.find(".list-item-foot .col"),i.$rememberCheckbox=i.$main.find(".cb-remember"),i.$userRating=i.$main.find(".user-rating"),i.dataModel=i.$main.data("model"),i.thisWereSelectedAndVisible=function(){return i.$this.hasClass("selected")&&i.$extraInfo.is(":visible")}(),i.showExtraInfo=function(n){i.$this.addClass("selected");i.$extraInfo.html(n);i.$extraInfo.slideDown()},i.hideExtraInfo=function(n){i.$extraInfo.slideUp(function(){i.$footerA.removeClass("selected");i.thisWereSelectedAndVisible||typeof n=="function"&&n.call(i)})},i};i.listItems={foreclosure:function(n){return i.list.listItem(n)},property:function(n){return i.list.listItem(n)},sold:function(n){var t=i.list.listItem(n);return t.$comment=t.$main.find(".comment"),t.$commentForm=t.$main.find(".comment-form").children(),t.$commentText=t.$main.find("#Comment"),t.$commentStatus=t.$main.find(".comment-status"),t}}}(window,jQuery,bs),function(n,t,i){"use strict";i.list=i.list||{};i.list.Property=i.List.extend({init:function(n){this.useExternalController=n.useExternalController;this._super(n);this.attachListeners()},attachListeners:function(){var r=this;t("#list").on("click",".list-item-property .salesprices",function(){r.handleSalepriceClick(this)}).on("click",".list-item-property .bbr",function(){r.handleBbrClick(this)}).on("click",".list-item-property .priceinfo",function(){r.handlePriceInfoClick(this)}).on("click",".list-item-property .user-rating",function(){r.handleUserRatingClick(this)}).on("click",".list-item-property .cb-remember",function(n){i.trak.ui.favoriteMark(n.target.checked,r.getParameters().displayTab);r.handleRememberClick(this,n.target.checked)}).on("click",".wish-property",function(){i.trak.ui.wishPropertyPromotion(t(this).data("trakLabel"))});t(".set-mail-agent").on("click",function(){return r.handleSetMailAgentClick(this),!1});if(i.utils.isElementInViewport(t(".gototop")))i.trak.ui.resultListBottom("Impression","Pagination er vist");else t(n).off("DOMContentLoaded.resultlistbottom load.resultlistbottom resize.resultlistbottom scroll.resultlistbottom").on("DOMContentLoaded.resultlistbottom load.resultlistbottom resize.resultlistbottom scroll.resultlistbottom",function(){i.utils.isElementInViewport(t(".gototop"))&&(i.trak.ui.resultListBottom("Impression","Pagination er vist"),t(n).off("DOMContentLoaded.resultlistbottom load.resultlistbottom resize.resultlistbottom scroll.resultlistbottom"))})},setupLive:function(){this._super();var n=t(".featured-block");n.length&&n.featuredBlock();this.setupTip()},setupTip:function(){if(!i.utils.browser.isMobileBrowser()){var n=this,r=t("#list");r.find(".tip-count").each(function(){var r=!0;t(this).one("mouseout",function(){r=!1}).one("mouseover",function(){var f=i.listItems.property(this),u=t(this);i.get((n.useExternalController?"external":"version2/propertyresult")+"/GetPropertyEventStatisticsPropertyRedirectTotal?id="+f.dataModel.Id,function(n){i.tip.hover(u,n);r&&u.protipToggle()})})})}},handleSalepriceClick:function(n){i.trak.ui.resultListItemDetails("Click","Salgspriser");var r=this;i.listItems.property(n).hideExtraInfo(function(){var n=this.dataModel.OisHidden?null:{municipalityNumber:this.dataModel.MunicipalityNumber,oisPropertyNumber:this.dataModel.OisPropertyNumber};t.get(i.url((r.useExternalController?"external":"result")+"/getsaleinfo"),n,this.showExtraInfo)})},handleBbrClick:function(n){i.trak.ui.resultListItemDetails("Click","BBR");var t=this;i.listItems.property(n).hideExtraInfo(function(){var n=this.dataModel.OisHidden?null:{id:this.dataModel.UniqueNumber,municipalityNumber:this.dataModel.MunicipalityNumber,oisPropertyNumber:this.dataModel.OisPropertyNumber};i.get((t.useExternalController?"external":"version2/bbr")+"/getbbrinfo/",n,this.showExtraInfo)})},handlePriceInfoClick:function(n){i.trak.ui.resultListItemDetails("Click","Info om pris");var r=this;i.listItems.property(n).hideExtraInfo(function(){var n={id:this.dataModel.UniqueNumber};t.get(i.url((r.useExternalController?"external":"result")+"/getpartiallyowned/"),n,this.showExtraInfo)})},handleUserRatingClick:function(n){i.trak.ui.resultListItemDetails("Click","Vurder");var t=i.listItems.property(n);t.hideExtraInfo(function(){t.$extraInfo.empty();t.$this.addClass("selected");var n=new i.vue.CommentRating({template:'<div class="box-inner row commentrating"><div class="col--6 col-s-12"><table><tr><td>Generel stand<\/td><td><star-rating :value.sync="ratings.ConditionRating" size="small" name="condition"><\/star-rating><\/td><\/tr><tr><td>Køkken<\/td><td><star-rating :value.sync="ratings.KitchenRating" size="small" name="kitchen"><\/star-rating><\/td><\/tr><tr><td>Beliggenhed<\/td><td><star-rating :value.sync="ratings.LocationRating" size="small" name="location"><\/star-rating><\/td><\/tr><tr><td>Badeværelse<\/td><td><star-rating :value.sync="ratings.BathRating" size="small" name="bath"><\/star-rating><\/td><\/tr><\/table><\/div><div class="col--6 col-s-12"><textarea class="fc" placeholder="Tilføj kommentar eller note til boligen ..." v-model="comment.Comment" @blur="resetError" @focus="resetError"><\/textarea><div class="red" v-if="errorMessage">{{ errorMessage }}<\/div><\/div><div class="col--6">Klik på stjernerne for at vurdere boligen ud fra de forskellige kriterier. Det er kun dig, der kan se vurderingen<\/div><div class="col--6 align-right"><button type="button" class="btn btn-red" @click="save(\'Gem og luk\')" :class="{\'btn-loading\': saving}">Gem og luk<\/button><\/div><\/div>',data:{propertyId:t.dataModel.Id},events:{"commentrating:notloggedin:onready":function(){i.services.searches.getLoginDialog()},"commentrating:notloggedin":function(){i.services.searches.getLoginDialog()},"commentrating:ready":function(){t.$extraInfo.slideDown()},"commentrating:saved":function(n){n.averageRating==null?(t.$userRating.find(".value").text("Vurdér"),t.$userRating.find(".icon-x2").addClass("icon-x2-star-l-empty-yellow").removeClass("icon-x2-star-l-full")):(t.$userRating.find(".value").text(n.roundAverageRating),t.$userRating.find(".icon-x2").addClass("icon-x2-star-l-full").removeClass("icon-x2-star-l-empty-yellow"));t.hideExtraInfo()}}});n.$mount().$appendTo(t.$extraInfo[0])})},handleRememberClick:function(n,t){var u=this,r=i.listItems.property(n);t?i.favorite.add(r.dataModel.Id,function(){r.$rememberCheckbox.prop("checked",!0)},function(){r.$rememberCheckbox.prop("checked",!1)}):i.favorite.remove(r.dataModel.Id,function(){r.$rememberCheckbox.prop("checked",!1);r.hideExtraInfo();u.refreshFavoriteBox();u.trigger("bs_list_favorite_removed",r)})},handleSetMailAgentClick:function(n){var e=this;i.services.searches.closeDialogs();var u=t(n),r=u.data("model"),f=function(n){i.services.searches.closeDialogs();i.services.searches.update({controller:"searches",action:"setMailAgent",trakLabel:"Result"+e.getParameters().displayTab.upperCaseFirst(),parameters:{id:r.ResultId,active:n},okCallback:function(){r.HasMailAgent=!r.HasMailAgent;u.data("model",r);u.find(".text").text(u.data(r.HasMailAgent?"active-text":"inactive-text"))},errorCallback:function(){i.dialog.error("Genindlæs venligst siden")}})};r.HasMailAgent?i.services.searches.getSetMailAgentDialog(u,function(){f(!1)}):(i.filters.lock(),f(!0))},updatePropertyCount:function(n){t(".list-tab .property .count").text(n)},updateForeclosureCount:function(n){t(".list-tab .foreclosure .count").text(n)},updateRentalCount:function(n){t(".list-tab .rental .count").text(n)},refreshFavoriteBox:function(){t("#favorite-wrap .favorite-box").length>0&&i.get("~/version2/favorite/favoritebox",function(n){t("#favorite-wrap").html(n)})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.list=i.list||{};i.list.Foreclosure=i.List.extend({init:function(n){this._super(n);this.attachListeners()},attachListeners:function(){var n=this;t("#list").on("click",".list-item-foreclosure .salesprices",function(){n.handleSalepriceClick(this)}).on("click",".list-item-foreclosure .bbr",function(){n.handleBbrClick(this)})},handleSalepriceClick:function(n){var r=this;i.listItems.foreclosure(n).hideExtraInfo(function(){var n=this.dataModel.OisInformationHidden?null:{municipalityNumber:this.dataModel.MunicipalityNumber,oisPropertyNumber:this.dataModel.OisPropertyNumber};t.get(i.url((r.useExternalController?"external":"version2/result")+"/getsaleinfo"),n,this.showExtraInfo)})},handleBbrClick:function(n){var t=this;i.listItems.foreclosure(n).hideExtraInfo(function(){var n=this.dataModel.OisInformationHidden?null:{id:this.dataModel.UniqueNumber,municipalityNumber:this.dataModel.MunicipalityNumber,oisPropertyNumber:this.dataModel.OisPropertyNumber};i.get((t.useExternalController?"external":"version2/bbr")+"/getbbrinfo/",n,this.showExtraInfo)})}})}(window,jQuery,bs),function(n,t){"use strict";var i={$window:null,elements:[],init:function(){return i.$window==null&&(i.$window=t(n),i.$window.scroll(function(){i.calc()})),i.elements=this.map(function(){return{$element:t(this),$dummy:void 0}}).get(),i.calc(),this},calc:function(){var n=i.$window.scrollTop();i.elements.forEach(function(t){var i=t.$dummy!=undefined?t.$dummy.offset().top:t.$element.offset().top;n<i?t.$dummy!=undefined&&(t.$dummy.remove(),t.$element.removeClass("sticky"),t.$dummy=void 0):t.$dummy==undefined&&(t.$dummy=t.$element.clone(),t.$element.addClass("sticky"),t.$dummy.insertAfter(t.$element))})}};t.fn.bsSticky=function(n){if(i[n])return i[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n!="object"&&n)t.error("Method "+n+" does not exist on jQuery.bsSticky");else return i.init.apply(this,arguments)}}(window,jQuery,bs),function(n){n.widget("ui.bsSlider",n.ui.slider,{_create:function(){var t,i;if(n.ui.slider.prototype._create.call(this),this.element.addClass("bs-slider"),t=this.options,!(t.hideGrid===!0)){var r=(t.max-t.min)/t.step,f=100/r,u=n("<div />",{"class":"bs-slider-grid"});for(i=0;i<=r;i++)n("<span />",{css:{left:f*i+"%"}}).appendTo(u);this.element.append(u)}t.className&&this.element.addClass(t.className);n("<div />",{"class":"bs-slider-bar"}).appendTo(this.element);this._setHandleState()},_slide:function(t,i,r){n.ui.slider.prototype._slide.call(this,t,i,r);this._setHandleState()},_setHandleState:function(){var n=this.options,t;n.range===!0&&n.values&&n.values.length===2&&(t=n.min===n.values[0]&&n.max===n.values[1],this.handles.toggleClass("disabled",t),this.range.toggleClass("disabled",t))}})}(jQuery),function(n){"use strict";var t={init:function(i,r){var u=n.extend({color:"",size:"",visibleNumbers:5},r),f=[],e;return u.color!==""&&f.push("slot-"+u.color),u.size!==""&&f.push("slot-"+u.size),e=f.join(" "),this.each(function(){var f=n(this),r;for(f.data("slotSettings",u),r=u.visibleNumbers;r>0;r--)f.append('<span class="slot-n-'+r+" "+e+'"><\/span>'),(r===4||r===7)&&f.append('<span class="slot-d-'+r+" "+e+'"><\/span>');t.updatePosition(f,i)})},update:function(i){t.updatePosition(n(this),i)},updatePosition:function(n,t){for(var u=n.data("slotSettings"),r=t.toString().split("").reverse(),i=u.visibleNumbers;i>0;i--)n.find(".slot-n-"+i).attr("data-slot-number",r[i-1]||"n"),i==4&&n.find(".slot-d-"+i).attr("data-slot-number",r.length>3?"d":"nd"),i==7}};n.fn.bsSlot=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="number"&&i)n.error("Method "+i+" does not exist on jQuery.bsSlot");else return t.init.apply(this,arguments)}}(jQuery),function(n,t){"use strict";var i={init:function(){return this.each(function(){var n=t(this),i=n.find(".filter-head");i.append('<i class="a a-r-n-d"><\/i><i class="a a-r-n-u"><\/i>');i.on("click",function(){n.toggleClass("closed")})})}};t.fn.bsFilter=function(n){if(i[n])return i[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n!="object"&&n)t.error("Method "+n+" does not exist on jQuery.bsFilter");else return i.init.apply(this,arguments)}}(window,jQuery,bs);bsJquerySliderMethods={init:function(n){var t={suffix:"",className:null},i;return n&&$.extend(t,n),i=bs.utils.browser.isMobileBrowser(),this.each(function(){var n=$(this),o=n.parent().parent(),r=o.data("options"),e=o.attr("id"),u;t.range=!0;t.min=r.defaultMin;t.max=r.defaultMax;t.step=r.defaultStep;var s=e=="YearBuild"?r.displayMin:r.displayMin.toStringWithThousandSeparator(),h=e=="YearBuild"?r.displayMax:r.displayMax.toStringWithThousandSeparator(),f=parseInt(r.min,10);if(f=isNaN(f)?t.min:f,u=parseInt(r.max,10),u=isNaN(u)?t.max:u,t.values=[f,u],i){n.on("mousedown",function(t){bsJquerySliderMethods._sliderMouseDown(n,t)});n.on("touchstart",function(t){bsJquerySliderMethods._sliderMouseDown(n,t)})}n.bsSlider(t);e==="EnergyMarking"?n.append('<div class="bs-slider-energymarking"><span class="em em-a star"><\/span><span class="em em-b"><\/span><span class="em em-c"><\/span><span class="em em-d"><\/span><span class="em em-e"><\/span><span class="em em-f"><\/span><span class="em em-g"><\/span><\/div>'):n.append('<div class="bs-slider-min"><\/div><div class="bs-slider-max"><\/div>');n.bsFilterSlider("updateNumbers",s,h,f,u)})},updateNumbers:function(n,t,i,r){var u=$(this),e=u.parent().parent(),l=e.attr("id"),o=e.data("options"),c=o.defaultMin,s=o.defaultMax,f=o.suffix,h;l!=="EnergyMarking"?(h=c==i&&s==r?"":"active-text",n='<span class="'+h+'">'+(f!=""?n+" "+f:n)+"<\/span>",u.find(".bs-slider-min").html(n+" min."),t='<span class="'+h+'">'+(f!=""?t+" "+f:t)+"<\/span>",t=s==r?t+" +":"Max. "+t,u.find(".bs-slider-max").html(t)):u.find(".bs-slider-energymarking span").each(function(n,t){$(t).toggleClass("inactiv",n<i-1||n>r-1)});e.toggleClass("disabled",c==i&&s==r)},_sliderMouseDown:function(n,t){var i=n.find(".ui-slider-handle");t.target!==i[0]&&t.target!==i[1]&&t.stopImmediatePropagation()}};$.fn.bsFilterSlider=function(n){if(bsJquerySliderMethods[n])return bsJquerySliderMethods[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n!="object"&&n)$.error("Method "+n+" does not exist on jQuery.bsFilterSlider");else return bsJquerySliderMethods.init.apply(this,arguments)},function(n){"use strict";var t={init:function(i){var r=n.extend({width:null,height:null,minTime:1e3,top:null,backgroundcolor:"white",useDisabling:!0},i);return this.each(function(){var i=n(this);i.find(".bs-element-spinner").length>0||(i.append(n("<div/>",{"class":"bs-element-spinner",css:{background:r.backgroundcolor,"z-index":"998",position:"absolute",width:r.width||"100%",height:r.height||"100%",opacity:"0.5",top:r.top}})).append(n("<div/>",{"class":"bs-element-spinner-loader",css:{background:"transparent url("+bs.url("~/content/common/img/ajax-loader-48.gif")+") no-repeat 50% 50%","z-index":"999",position:"absolute",width:r.width||i.width()+"px",height:r.height||i.height()+"px",top:r.top}})).data("bs-element-spinner-running",!0).data("bs-element-spinner-removenow",!1),r.useDisabling&&i.find("input, select").prop("disabled",!0),window.setTimeout(function(){i.data("bs-element-spinner-running",!1);i.data("bs-element-spinner-removenow")==!0&&t._remove(i)},r.minTime))})},remove:function(){return this.each(function(){var i=n(this);i.data("bs-element-spinner-running")==!1?t._remove(i):i.data("bs-element-spinner-removenow",!0)})},_remove:function(n){n.find("input, select").prop("disabled",!1);try{n.find("select").selectmenu("refresh")}catch(t){}n.find(".bs-element-spinner, .bs-element-spinner-loader").remove()}};n.fn.bsElementSpinner=function(i){if(t[i])return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.bsElementSpinner");else return t.init.apply(this,arguments)}}(jQuery),function(n){function t(n){var t=n.match(/\./g);return t!=null?t.length:0}n.fn.numeric=function(){var i=null,r=null;return this.each(function(){n(this).on("keydown",function(t){var r=t.charCode||t.keyCode||0;return i=n(this).val().replace(/\./g,""),r==8||r==9||r==46||r>=37&&r<=40||r>=48&&r<=57||r>=96&&r<=105}).on("keyup",function(u){var e=u.charCode||u.keyCode||0,f=bs.utils.ctrl.getCaretPosition(this),o=n(this).val(),s=t(o);if((e==46||e==8)&&(r=n(this).val().replace(/\./g,""),i==r)){if(e==46)return;if(e==8)return}var l=o.replace(/\./g,""),h=l.toStringWithThousandSeparator(),c=t(h);n(this).val(h);s>c?f=f-1:s<c&&(f=f+1);bs.utils.ctrl.setCaretPosition(this,f)})})}}(jQuery),function(n){n.fn.forceNumeric=function(){return this.each(function(){n(this).keydown(function(n){var t=n.charCode||n.keyCode||0;return t==8||t==9||t==46||t>=37&&t<=40||t>=48&&t<=57||t>=96&&t<=105})})}}(jQuery),function(n){"use strict";n.widget("bs.bsCombobox",{_create:function(){this.wrapper=n("<span>").addClass("bs-combobox ui-selectmenu-button").addClass(this.element.attr("class")).insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton();this.options.disabled&&this.disable()},focus:function(){this.input.focus()},refresh:function(){var n=this.element.children(":selected"),t=n.val()!=undefined?n.text():"";this.input.val(t)},triggerSelect:function(){var n=this.element.children(":selected"),t=n.val()!=undefined?n.text():"",i=n.text();this._trigger("select",null,{item:{value:t,text:i}})},enable:function(){this._super();this.wrapper.removeClass("ui-state-disabled");this.input.prop("readonly",!1);this.input.prop("disabled",!1);this.input.autocomplete("enable")},disable:function(){this._super();this.wrapper.addClass("ui-state-disabled");this.input.prop("readonly",!0);this.input.prop("disabled",!0);this.input.autocomplete("disable")},populate:function(n){for(var t,r=document.createDocumentFragment(),u=0,i;i=n[u];u++)t=document.createElement("option"),t.value=i.Value,t.innerHTML=i.Text,t.selected=i.Selected,r.appendChild(t);this.element.empty().append(r);this.refresh()},_createAutocomplete:function(){var i=this.element.children(":selected"),u=i.val()?i.text():"",f=this.element.css("width"),r=this.element.attr("placeholder"),t=void 0;t=this.input=n("<input>",{val:u,"class":"bs-combobox-input fc fc-m ui-widget ui-widget-content ui-state-default ui-corner-left"}).appendTo(this.wrapper).autocomplete({delay:0,autoFocus:!0,minLength:0,source:n.proxy(this,"_source")}).on("click",function(){var n=t.val();t.autocomplete("search",n!==""?n:"all")}).on("keydown",function(n){switch(n.which){case 40:var i=t.autocomplete("widget").is(":visible");i||t.autocomplete("search","all");default:return}}).on("focus",function(){n(this).select()});t.attr("placeholder",r);!bs.utils.browser.supportsPlaceholder()&&n.fn.placeholder&&(t.attr("placeholder",r),t.placeholder());this._on(this.input,{autocompleteselect:function(n,t){t.item.value!=="not-selectable"?(t.item.option.selected=!0,this._trigger("select",n,{item:{value:t.item.option.value,text:t.item.option.text}})):(t.item.value="",this._trigger("select",n,{item:{value:"",text:""}}))},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var t=this.input,i=!1;n("<a>",{tabIndex:-1,"class":"bs-combobox-toggle"}).appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).on("mousedown",function(){i=t.autocomplete("widget").is(":visible")}).on("click",function(){(t.focus(),i)||t.autocomplete("search","all")})},_source:function(t,i){if(t.term!==""){t.term==="all"&&(t.term="");var u=new RegExp(n.ui.autocomplete.escapeRegex(t.term),"i"),r=this.element.children("option").map(function(){var i=n(this).text();if(i!==""&&(!t.term||u.test(i)))return{label:i,value:i,option:this}});r.length==0&&(r=[{label:this.element.data("bscombobox-noresulttext"),value:"not-selectable"}]);i(r)}},_removeIfInvalid:function(t,i){if(!i.item){var u=this.input.val(),f=u.toLowerCase(),r=!1;(this.element.children("option").each(function(){if(n(this).text().toLowerCase()===f)return this.selected=r=!0,!1}),r)||(this.input.val(""),this.element.val(""))}},_destroy:function(){this.wrapper.remove();this.element.show()}})}(jQuery),function(n,t,i){"use strict";i.comboBox=function(n,i){var r=t("#"+n+"-combobox"),u;return i.disabled=r.children().length<=1,r.bsCombobox(i),u=t("#"+n+"-message"),{isEmpty:function(){var n=r.children();return n.length===0?!0:n.length===1&&n[0].value===""?!0:!1},val:function(n,t){if(n==undefined)return r.val();r.val(n).bsCombobox("refresh");t||r.bsCombobox("triggerSelect")},populate:function(n){r.bsCombobox("populate",n)},toggle:function(){this.isEmpty()?this.disable():this.enable()},populateAndToggle:function(n){this.populate(n);this.toggle()},enable:function(){r.bsCombobox("enable")},disable:function(){r.bsCombobox("disable")},message:function(n){u.html(n)},focus:function(){r.bsCombobox("focus")}}}}(window,jQuery,bs),function(n,t,i){function f(n){return n}function e(n){return decodeURIComponent(n.replace(u," "))}var u=/\+/g,r=n.cookie=function(u,o,s){var p,c,l,a,h,w,v,y;if(o!==i)return s=n.extend({},r.defaults,s),o===null&&(s.expires=-1),typeof s.expires=="number"&&(p=s.expires,c=s.expires=new Date,c.setDate(c.getDate()+p)),o=r.json?JSON.stringify(o):String(o),t.cookie=[encodeURIComponent(u),"=",r.raw?o:encodeURIComponent(o),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("");for(l=r.raw?f:e,a=t.cookie.split("; "),h=0,w=a.length;h<w;h++)if(v=a[h].split("="),l(v.shift())===u)return y=l(v.join("=")),r.json?JSON.parse(y):y;return null};r.defaults={};n.removeCookie=function(t,i){return n.cookie(t)!==null?(n.cookie(t,null,i),!0):!1}}(jQuery,document),function(n,t){"use strict";var i=function(i,r){r.each(function(){var n=t(this),i;n.removeClass("left right");n.position().left>50?n.addClass("left"):n.addClass("right");i=n.prev();i.length&&n.position().top<i.position().top+60&&n.css("margin-top","60px")});t(n).off("resize.timeline")};t.fn.timeline=function(){var u=null,r=this,f=r.find(".tl-item");if(n.innerWidth<=945){f.addClass("left");t(n).on("resize.timeline",function(){u&&n.clearTimeout(u);u=n.setTimeout(function(){n.innerWidth>945&&i(r,f)},100)})}else i(r,f);return r.css("opacity","1"),this}}(window,jQuery),function(n,t,i){"use strict";var r=function(i){function f(i){var r=n(i),u;r.data("featuredTracked")||(r.data("featuredTracked",!0),u=r.data("uniqueNumber"),u!=null&&t.get("~/FeaturedProperties/RegisterCount",{uniqueNumber:u}))}var e=!1,u=n(i),r=u.find(".featured-items");r.on("init",function(){r.css("height","auto")});r.slick({adaptiveHeight:!0,lazyLoad:"ondemand",arrows:!1,autoplaySpeed:4e3});r.on("beforeChange",function(n,t,i,r){e||(e=!0,f(t.$slides[i]));f(t.$slides[r])});u.find(".f-prev").on("click",function(){r.slick("slickPrev");t.trak.ui.resultListFeaturedItem("Click","Previous")});u.find(".f-next").on("click",function(){r.slick("slickNext");t.trak.ui.resultListFeaturedItem("Click","Next")});u.find(".f-prev, .f-next").on("mouseover",function(){r.slick("slickPause")}).on("mouseout",function(){r.slick("slickPlay")});return{checkVisible:function(){t.utils.isElementInViewport(u)?r.slick("slickPlay"):r.slick("slickPause")}}};n.fn.featuredBlock=function(){var t=[],u,f;n(i).off("DOMContentLoaded.featured load.featured resize.featured scroll.featured").on("DOMContentLoaded.featured load.featured resize.featured scroll.featured",function(){for(var n=0,i;i=t[n];n++)i.checkVisible()});for(this.each(function(){t.push(new r(this))}),u=0;f=t[u];u++)f.checkVisible();return this}}(jQuery,bs,window),function(n){n.widget("bs.bsAutocomplete",n.ui.autocomplete,{_create:function(){this._superApply(arguments);bs.utils.browser.isMobileBrowser()&&this.widget().off("mouseenter")}});n.widget("bs.searchAutocomplete",n.ui.autocomplete,{_create:function(){this.lastItem=n("<div class='last-item'><\/div>");this.lastItem.hide().appendTo(".search-bar-input-wrap");this.showLastItem=!1;this.isMobileBrowser=bs.utils.browser.isMobileBrowser();this._superApply(arguments);this.widget().menu("option","items","> :not(.no-menu)")},_renderMenu:function(t,i){var r=this,u="";this.showLastItem=!1;t.addClass("quicksearch");n.each(i,function(i,f){switch(f.CompletionType){case"LastItem":r.options.hideLastItem||(r.lastItem.text(f.Text),r.showLastItem=!0);break;case"NoItem":t.append(n("<li/>",{"class":"no-items"}).data("ui-autocomplete-item",f).append(n("<p/>",{"class":"last",text:f.Text})));break;default:u!==f.CompletionType&&(t.append(n("<li/>",{"class":"no-menu li-place"}).append(n("<p/>",{"class":"place",text:f.CompletionType}))),u=f.CompletionType);r._renderItemData(t,f)}})},_renderItem:function(t,i){var r=n("<li class='quicksearch'><\/li>"),u=this.isMobileBrowser?i.Count:i.Count.of("bolig","boliger")+" til salg",f=this.options.showCount?n("<p/>",{"class":"counter",text:u}):"",e=n("<span/>",{"class":"red-arrow"});return r.append(n("<a/>",{html:i.HtmlText}).append(f,e)),r.appendTo(t),r},_close:function(n){if(this.lastItem.hide(),this.menu.element.is(":visible")){if(bs.utils.browser.isIPad()&&this.term.length>this.options.minLength)return;this.menu.element.hide();this.menu.blur();this.isNewMenu=!0;this._trigger("close",n)}},_suggest:function(){if(this._superApply(arguments),this.showLastItem){var n=this.menu.element.width();this.lastItem.show().css({width:n}).position({of:this.menu.element,my:"left+1 top",at:"left bottom-1",collision:"none"})}}})}(jQuery),function(n){n.widget("ui.bsDialog",n.ui.dialog,{_create:function(){var i,t;if(this.options.bsType==null)throw"Der skal angives en bsType...";this.options.showTitle=this.options.showTitle!=undefined?this.options.showTitle:!0;switch(this.options.bsType){case"blueInfobox":this.options.dialogClass+="border info-dialog";this.options.closeText="×";this.options.minHeight=20;this.options.resizable=!1;this.options.close=function(){n(this).remove()};break;case"tipDialog":this.options.dialogClass+="border tip-dialog";this.options.closeText="X";this.options.minHeight=20;this.options.resizable=!1;this.options.buttons={Ok:function(){n(".tip-dialog").animate({top:n(".tip-wrap").position().top,left:n(".tip-wrap").position().left,height:0,width:0,opacity:0},500)}};this.options.beforeClose=function(){n(".tip-dialog").animate({top:n(".tip-wrap").position().top,left:n(".tip-wrap").position().left,height:0,width:0,opacity:0},500)};this.options.close=function(){n(this).remove()};break;case"dialog":this.options.dialogClass+="border dialog";this.options.closeText="X";this.options.minHeight=20;this.options.resizable=!1;this.options.buttons=this.options.buttons||{Ok:function(){n(this).remove()}};this.options.close=this.options.close||function(){n(this).remove()};break;case"modalWithOk":this.options.modal=!0;this.options.dialogClass+="border";this.options.closeText="X";this.options.resizable=!1;this.options.buttons=this.options.buttons.length==0?{Ok:function(){n(this).bsDialog("close")}}:this.options.buttons;this.options.close=this.options.close||function(){n(this).remove()};break;case"mapToolDialog":this.options.dialogClass+=" border maptool-dialog";this.options.closeText="×";this.options.minHeight=20;this.options.resizable=!1;break;case"foldDialog":this.options.dialogClass+=" border fold-dialog";this.options.closeText="x";this.options.minHeight=20;this.options.resizable=!1;this._focusTabbable=function(){};break;default:throw"Der skal angives en korrekt bsType";}n.ui.dialog.prototype._create.call(this);i!=undefined&&this.uiDialog.data("bsInfoboxCustomInitialClass",i);t=this;this.options.checkboxes!=null&&n.each(this.options.checkboxes,function(i,r){var u=t.element.attr("id")+i,f=t.options.bsType==="blueInfobox"?"":" cb-gray";t.uiButtonSet.append(n("<input/>",{id:u,type:"checkbox","class":"cb"+f}).on("change",function(){r(this)}));t.uiButtonSet.append(n("<label/>",{"for":u,text:i}))})},_createTitlebar:function(){this.options.showTitle&&(this._super(),this.options.bsType==="foldDialog"&&(this.uiDialogTitlebarFold=n("<button type='button'><\/button>").button({text:!1}).addClass("ui-dialog-titlebar-fold arrow arrow-red-bold-up").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarFold,{click:function(){this.element.is(":visible")?(this.element.slideUp(),this.uiDialogTitlebarFold.removeClass("arrow-red-bold-up").addClass("arrow-red-bold-down")):(this.element.slideDown(),this.uiDialogTitlebarFold.removeClass("arrow-red-bold-down").addClass("arrow-red-bold-up"))}})),this.options.printIcon&&(this.uiDialogTitlebarPrint=n("<button type='button'><\/button>").button({text:!1}).addClass("ui-dialog-titlebar-print icon icon-print").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarPrint,{click:function(t){var i=this.element.clone(),r=n("body").find("> *:visible");r.hide();n("body").append(i);i.css("maxHeight","none");window.print();n("body").find(i).remove();r.show();this._trigger("afterPrint",t)}})))},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0;this.opener=n(this.document[0].activeElement);this._size();this.options.positionFixed!=undefined?(this.options.positionFixed.position="fixed",this.widget().css(this.options.positionFixed)):this._position();this._createOverlay();this._moveToTop(null,!0);this._show(this.uiDialog,this.options.show,function(){t.options.bsType!=="mapToolDialog"&&(t._focusTabbable(),t._trigger("focus"))});this._trigger("open")},close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.options.bsType!=="mapToolDialog"&&(this.opener.filter(":focusable").focus().length||n(this.document[0].activeElement).blur()),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},_position:function(){var n=this.uiDialog.is(":visible");n||this.uiDialog.show();this.options.positionFixed!=undefined?(this.options.positionFixed.position="fixed",this.widget().css(this.options.positionFixed)):this.uiDialog.position(this.options.position);n||this.uiDialog.hide()}})}(jQuery);bs=bs||{};bs.cookie={getDomain:function(){return location.host.indexOf("localhost")>-1?"":".boligsiden.dk"},userSettings:{checkboxesChecked:{set:function(){bs.cookie.userSettings.set("checkboxesChecked",$("#search-header-checkboxes input:checked").map(function(){return"#"+this.id}).get().join(","))},get:function(){return bs.cookie.userSettings.get("checkboxesChecked")||null}},checkboxesCheckedV2:{set:function(n){bs.cookie.userSettings.set("checkboxesChecked",n.map(function(){return"#"+this.id}).get().join(","))},get:function(){return bs.cookie.userSettings.get("checkboxesChecked")||null}},checkboxesCheckedForclosure:{set:function(){bs.cookie.userSettings.set("checkboxesCheckedForclosure",$("#search-header-checkboxes input:checked").map(function(){return"#"+this.id}).get().join(","))},get:function(){return bs.cookie.userSettings.get("checkboxesCheckedForclosure")||null}},checkboxesCheckedForclosureV2:{set:function(n){bs.cookie.userSettings.set("checkboxesCheckedForclosure",n.map(function(){return"#"+this.id}).get().join(","))},get:function(){return bs.cookie.userSettings.get("checkboxesCheckedForclosure")||null}},mapPopupPosition:{set:function(n,t){var i=bs.cookie.userSettings.mapPopupPosition.getAll();i[n]=t;bs.cookie.userSettings.set("mapPopupPosition2",i)},getAll:function(){return bs.cookie.userSettings.get("mapPopupPosition2")||{}},get:function(n){return bs.cookie.userSettings.mapPopupPosition.getAll()[n]||null}},mapPopupFilterState:{set:function(n,t){var i=bs.cookie.userSettings.mapPopupFilterState.getAll();i[n]=t;bs.cookie.userSettings.set("mapPopupFilterState2",i)},getAll:function(){return bs.cookie.userSettings.get("mapPopupFilterState2")||{}},get:function(n){return bs.cookie.userSettings.mapPopupFilterState.getAll()[n]||null}},searchHeaderHidden:{set:function(n){bs.cookie.userSettings.set("searchHeaderHidden",n)},get:function(){return bs.cookie.userSettings.get("searchHeaderHidden")||!1}},homeVisits:{increment:function(){var n=bs.cookie.userSettings.homeVisits.get();bs.cookie.userSettings.set("homeVisits",n+1)},get:function(){return bs.cookie.userSettings.get("homeVisits")||0}},hiddenDialog:{set:function(n,t){var i=bs.cookie.userSettings.hiddenDialog.getAll();i[n]=t;bs.cookie.userSettings.set("hiddenDialog",i)},getAll:function(){return bs.cookie.userSettings.get("hiddenDialog")||{}},get:function(n){return bs.cookie.userSettings.hiddenDialog.getAll()[n]||!1}},set:function(n,t){var i=bs.cookie.userSettings.get()||{};i[n]=t;$.cookie.json=!0;$.cookie("UserSettings",i,{path:"/",domain:bs.cookie.getDomain()});$.cookie.json=!1},get:function(n){$.cookie.json=!0;var t=$.cookie("UserSettings");return $.cookie.json=!1,n!=undefined?t!=null&&t[n]!=null?t[n]:null:t}},userSettingsSaved:{infoMessage:{set:function(){bs.cookie.userSettingsSaved.set("InfoMessage",!0)}},mapLayersDropdown:{notShown:function(){return!bs.cookie.userSettingsSaved.get("MapLayersDropDown")},show:function(){bs.cookie.userSettingsSaved.set("MapLayersDropDown",!0)}},mapToolId:{set:function(n){bs.cookie.userSettingsSaved.set("mapToolId",n)},get:function(){return bs.cookie.userSettingsSaved.get("mapToolId")||null}},promotion:{isDisabled:function(n){var t=bs.cookie.userSettingsSaved.get("PromotionIds")||{};return t[n]||!1},disable:function(n){var t=bs.cookie.userSettingsSaved.get("PromotionIds")||{};t[n]=!0;bs.cookie.userSettingsSaved.set("PromotionIds",t)}},set:function(n,t){var i=bs.cookie.userSettingsSaved.get()||{};i[n]=t;$.cookie.json=!0;$.cookie("UserSettingsSaved",i,{path:"/",domain:bs.cookie.getDomain(),expires:365});$.cookie.json=!1},get:function(n){$.cookie.json=!0;var t=$.cookie("UserSettingsSaved")||{};return $.cookie.json=!1,n!=undefined?t!=null&&t[n]!=null?t[n]:null:t}},subscribeNewsLetter:{setExpires:function(n){$.cookie("showSubscribeNewsLetter","false",{path:"/",domain:bs.cookie.getDomain(),expires:n})},show:function(){var n=JSON.parse($.cookie("showSubscribeNewsLetter"));return n==null?!0:n}},itemsPerPageDialog:{set:function(){$.cookie("ItemsPerPageDialog","1",{path:"/",domain:bs.cookie.getDomain()})},get:function(){return $.cookie("ItemsPerPageDialog")}},tipsShown:{set:function(n){$.cookie("TipsShown","",{path:"/",expires:0});var i=bs.cookie.tipsShown.get()||{},t=new Date;i[n]=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();$.cookie.json=!0;$.cookie("TipsShown",i,{path:"/",domain:bs.cookie.getDomain(),expires:700});$.cookie.json=!1},get:function(){$.cookie.json=!0;var n=$.cookie("TipsShown");return $.cookie.json=!1,n}},tipWrapShownToday:{set:function(){$.cookie("TipWrapShownToday",!0,{domain:bs.cookie.getDomain()})},get:function(){return!!$.cookie("TipWrapShownToday")}}};bs=bs||{};bs.dialog={normal:function(n,t){return t=t||{},t.bsType="modalWithOk",$(n).bsDialog(t)},message:function(n,t,i){return(t==undefined||typeof t=="object")&&(i=t,t=n,n=""),bs.dialog.normal("<div title='"+n+"'>"+t+"<\/div>",i)},confirm:function(n,t,i,r){return r=r||{},r.buttons=r.buttons||{},r.buttons.Ok=function(){i.call();$(this).bsDialog("close")},r.buttons.Annuller=function(){$(this).bsDialog("close")},bs.dialog.normal("<div title='"+n+"'>"+t+"<\/div>",r)},error:function(n,t){return bs.dialog.message("Der er sket en fejl",n,t)},infobox:function(n,t,i){var r,u;i=i||{};bs.check.requireNotNullOrUndefined(i.position,"options.position");bs.check.requireNotNullOrUndefined(i.bsArrow,"options.bsArrow");r=t.replace("-","");$("#"+t).length&&$("#"+t).bsDialog("close");u={bsType:"infobox",width:325,close:function(){$("body").off("click."+r);$(this).remove()},buttons:{Ok:function(){$(this).bsDialog("close")}}};$.extend(!0,u,i);$("<div id='"+t+"'>"+n+"<\/div>").bsDialog(u);$("body").on("click."+r,function(n){var i=$("#"+t).parent();i.is(n.target)||i.has(n.target).length!==0||$("#"+t).bsDialog("close")})}},function(n,t){t.favoriteMark=function(i,r,u){var f=n(i).is(":checked");return t.trak.ui.favoriteMark(f,u),f?t.favorite.add(r):t.favorite.remove(r)};t.favorite={settings:{useExternalController:!1},add:function(n,t,i){return this.toggle("add",n,t,i)},remove:function(n,t,i){return this.toggle("remove",n,t,i)},toggle:function(n,i,r,u){return t.settings.IsLoggedOn?(t.getJSON((t.favorite.settings.useExternalController?"favorites/":"version2/favorite/")+n,{id:i},function(n){t.json.checkResultErrors(n)&&(n.Status==="NotLoggedIn"?(t.dialogs.favoriteMarkNotLoggedIn.show(),typeof u=="function"&&u.call()):typeof r=="function"&&r.call())}),!0):(t.dialogs.favoriteMarkNotLoggedIn.show(),typeof u=="function"&&u.call(),!1)}}}(jQuery,bs),function(n,t){t.dialogs={favoriteMarkNotLoggedIn:{show:function(){n('<div title="Log ind og gem bolig"><p>Du skal logge ind i øverste hjørne for at kunne tilføje boligen til din huskeliste og skrive din egen personlige note.<\/p><\/div>').bsDialog({bsType:"modalWithOk"})}},showfavoritesOnMapNotLoggedIn:{show:function(){n('<div title="Få vist din huskeliste på kort"><p>Når du er logget ind, kan du lave en huskeliste med boliger - og få vist huskelisten på kortet. Du kan logge ind og oprette dig som bruger i højre hjørne.<\/p><\/div>').bsDialog({bsType:"modalWithOk",width:350})}},quickSearchWholeDenmarkDialog:{show:function(n,i){t.tip.show(n,"Du søger nu i hele Danmark. Indtast et område i søgefeltet ved siden af, for at præcisere din søgning.",{buttons:{cancel:null,"continue":{callback:function(n){t.tip.hide(n);i.call()}}},hiddenDialogName:"quickSearchWholeDenmarkDialog",continueCallback:i,closeOnBodyClick:!0,position:"bottom"})}},seoSearchWholeDenmarkDialog:{show:function(n){t.tip.show(n,"Indtast et område i søgefeltet ved siden af, for at præcisere din søgning.",{buttons:{cancel:null,"continue":{text:"Ok",callback:function(n){t.tip.hide(n)}}}})}},wholeDenmarkDialog:{show:function(n,i){t.tip.show(n,"Du søger nu i hele Danmark. Vælg område for at præcisere din søgning.",{width:315,hiddenDialogName:"wholeDenmarkDialog",continueCallback:i,closeOnBodyClick:!0,position:"bottom",buttons:{"continue":{callback:function(n){t.tip.hide(n);i.call()}},cancel:{text:"Ret søgning"}}})}},controlChangeTool:{show:function(n){t.tip.show("#searchtools",'Du er ved, at ændre "værktøj". Det betyder at ved klik på kortet ændres det geografiske område.',{buttons:{"continue":{callback:function(i){t.tip.hide(i);n.call()}}},hiddenDialogName:"controlChangeTool",continueCallback:n,position:"left"})}},subscribeNewsLetterReadMore:{isOpen:function(){return n("#subscribe-newsletter-more").length>0},show:function(){t.dialog.normal(n('<div id="subscribe-newsletter-more" title="Tilmeld dig Boligsidens nyhedsbrev"><p>Tilmeld dig Boligsidens nyhedsbrev – så sørger vi for, at du altid ved, hvad der rører sig på boligmarkedet. Vi sender dig de bedste bolignyheder, fortæller dig, når vi har udviklet nye funktioner til vores app til iPhone/iPad og Android eller til www.boligsiden.dk. Har vi konkurrencer, får du det naturligvis også at vide i nyhedsbrevet.<\/p><p>Vi skriver blandt andet om prisudviklingen for villaer, ejerlejligheder og sommerhuse, vi har top 10-lister over fx dyreste sommerhuse og videregiver førende boligøkonomer og advokaters råd til finansiering, boligkøb og privatøkonomi. Derudover kan du møde enkelte boligrelaterede annoncer.<\/p><p>Vi sender nyhedsbrevet ca. en gang hver anden uge, og vi giver naturligvis ikke din e-mailadresse til andre.<\/p><\/div>'),{bsType:"modalWithOk",width:450,close:function(){var t=n(this);window.setTimeout(function(){t.remove()},50)}})}},subscribeNewsLetter:{show:function(){if(t.cookie.subscribeNewsLetter.show()){var i=n("<div id='subscribe-newsletter' class='subscribe' title='Tilmeld dig vores nyhedsbrev' style='overflow: visible;'><span class='picture'>&nbsp;<\/span><div class='description'>Så holder vi dig opdateret med de vigtigste - og nogle gange sjoveste - bolignyheder. Vi fortæller om nye funktioner på vores app og på Boligsiden.dk og meget mere. Du får typisk 2 nyhedsbreve pr. måned. <a href='#' id='subscribe-newsletter-readmore'>Læs mere<\/a><div class='error red'>Det indtastede kunne ikke valideres<\/div><\/div><div class='input'><span class='lbl'>Navn:<\/span><span class='mail'><input id='newsletter-name' type='text' class='fc'><\/span><span class='lbl'>E-mailadresse:<\/span><span class='mail'><input id='newsletter-email' type='email' class='fc'><\/span><\/div><\/div>");i.bsDialog({bsType:"dialog",resizable:!1,draggable:!1,width:450,positionFixed:{left:15,bottom:15,top:"inherit"},show:{effect:"slideDown",duration:1e3,delay:1500},hide:{effect:"slideUp",duration:500},close:function(){n("body").off("click.subscribeNewsletter");t.cookie.subscribeNewsLetter.setExpires(365);n(this).remove()},create:function(){n(this).bsDialog("widget").addClass("subscribe-wrap")},open:function(){n("body").on("click.subscribeNewsletter",function(i){if(!t.dialogs.subscribeNewsLetterReadMore.isOpen()){var r=n("#subscribe-newsletter").parent();r.is(i.target)||r.has(i.target).length!==0||n("#subscribe-newsletter").bsDialog("close")}});n("#subscribe-newsletter-readmore").on("click",function(){t.dialogs.subscribeNewsLetterReadMore.show()})},buttons:[{text:"vis ikke igen","class":"gray",click:function(){t.cookie.subscribeNewsLetter.setExpires(365);n(this).bsDialog("close")}},{text:"tilmeld nyhedsbrev",click:function(){var i=n(this),u=n("#newsletter-name").val(),r=n("#newsletter-email").val(),f=!0;return f=u===""||r===""?!1:t.utils.form.IsEmail(r),f?(i.find(".error").hide(),t.cookie.subscribeNewsLetter.setExpires(365),n.postJSON(t.url("~/version2/home/subscribe"),{name:u,email:r},function(){i.find(".description").text("Tjek! Du er nu tilmeldt Boligsidens nyhedsbrev.");i.find(".lbl,.mail").hide();i.bsDialog("option","buttons",[{text:"Luk",click:function(){n(this).bsDialog("close")}}])})):i.find(".error").show(),!1}}]})}}}}}(jQuery,bs),function(n,t,i){"use strict";i.search=i.search||{};i.search.searchInput={clear:function(){t("#search-bar-input").val("")},setupFocus:function(){var r;t("#search-header-input").on("mouseover",function(){i.follow(t(this).data("title"));n.clearTimeout(r);r=n.setTimeout(function(){i.follow()},3e3)}).on("mouseleave click",function(){n.clearTimeout(r);i.follow()}).on("focus",function(){i.utils.browser.isIPad()&&t("#search-header-input").autocomplete("search")});(i.utils.page.isFrontPage()||i.utils.page.isAgentFront()||i.utils.page.isSeoFront())&&!i.utils.browser.isMobileBrowser()&&t("#search-header-input").focus()},hideAutocompleteList:function(){i.utils.browser.isIPad()&&(t("#search-header-input").autocomplete("option","itemSelected",!0),t("#search-header-input").autocomplete("close"))}}}(window,jQuery,bs),function(n,t,i){"use strict";i.search=i.search||{};i.search.ItemTypes=i.EventClass.extend({init:function(n){this.o=t.extend({numberOfItemTypes:9,saveCheckboxCookie:!0,disallowRemoveLastItem:!1,isSiteForeclosure:!1,showTipAltanTip:!1,showTipResultAltanTip:!1,disableAllCheckboxes:!1},n);this.lastCheckedItemtypes=null;this.setupCheckboxesByCookie();this.o.showTipAltanTip&&(this.o.showTipAltanTip=i.tipsystem.getShowItAsPopup(14));this.o.showTipResultAltanTip&&(this.o.showTipResultAltanTip=i.tipsystem.getShowItAsPopup(15));this.o.disableAllCheckboxes&&this.getAllCheckboxes().prop("disabled",!0);this.attachListeners()},attachListeners:function(){var n=this;t(".search-bar-itemtypes :checkbox").on("click",function(){return n.handleCheckboxClick(this)});t(".search-bar-itemtypes .btn-selectall").on("click",function(){return n.handleSelectAllClick()})},handleSelectAllClick:function(){var n=i.utils.site.isWeb()?"searchItemTypeSelect":i.utils.site.isTvang()?"foreclosureItemTypeSelect":"unknownItemTypeSelect",r,u;this.getAllCheckedCheckboxes().length<this.o.numberOfItemTypes?(r=this.getUnchecked(),this.getAllCheckboxes().prop("checked",!0),t(".search-bar-itemtypes .btn-selectall").text("Fravælg alle"),this.trigger("itemtype_change",{id:r,checked:!0}),i.trak.ui[n]("Click","Vælg alle")):(u=this.getChecked(),this.getAllCheckboxes().prop("checked",!1),t(".search-bar-itemtypes .btn-selectall").text("Vælg alle"),this.trigger("itemtype_change",{id:u,checked:!1}),i.trak.ui[n]("Click","Fravælg alle"))},handleCheckboxClick:function(n){var t=this,r,u;return t.o.disallowRemoveLastItem&&t.getAllCheckedCheckboxes().length<1?!1:(r=n.id.replace("bt",""),u=n.checked,this.trigger("itemtype_change",{id:r,checked:u}),t.setupButton(),t.saveCheckboxCookie(),(t.o.showTipAltanTip||t.o.showTipResultAltanTip)&&(r==="bt300"||r==="bt500")&&u&&(t.o.showTipAltanTip?(i.tipsystem.showTipDialog(14),t.o.showTipAltanTip=!1):t.o.showTipResultAltanTip&&(i.tipsystem.showTipDialog(15),t.o.showTipResultAltanTip=!1)),!0)},getAllCheckboxes:function(){return t(".search-bar-itemtypes :checkbox")},getAllCheckedCheckboxes:function(){return t(".search-bar-itemtypes :checkbox:checked")},setupButton:function(){this.getAllCheckedCheckboxes().length===this.o.numberOfItemTypes?t(".search-bar-itemtypes .btn-selectall").text("Fravælg alle"):t(".search-bar-itemtypes .btn-selectall").text("Vælg alle")},saveCheckboxCookie:function(){this.o.saveCheckboxCookie&&(this.o.isSiteForeclosure?i.cookie.userSettings.checkboxesCheckedForclosureV2.set(this.getAllCheckedCheckboxes()):i.cookie.userSettings.checkboxesCheckedV2.set(this.getAllCheckedCheckboxes()))},setupCheckboxesByCookie:function(){var n=this.o.isSiteForeclosure?i.cookie.userSettings.checkboxesCheckedForclosureV2.get():i.cookie.userSettings.checkboxesCheckedV2.get();this.getAllCheckboxes().prop("checked",!1);n!=null?t(n).prop("checked",!0):t("#bt100,#bt200,#bt300,#bt400,#bt500,#bt600,#bt700,#bt800,#bt900").prop("checked",!0);this.setupButton()},getUnchecked:function(){return this.getAllCheckboxes().not(":checked").map(function(){return this.id.replace("bt","")}).get().join("|")},getChecked:function(){return this.getAllCheckedCheckboxes().map(function(){return this.id.replace("bt","")}).get().join("|")},setChecked:function(n){this.getAllCheckboxes().prop("checked",!1);t(n).each(function(n,i){t("#bt"+i).prop("checked",!0)});this.saveCheckboxCookie();this.setupButton()},setItemType:function(n,i){t("#bt"+n).prop("checked",i);this.saveCheckboxCookie();this.setupButton()},showSpinner:function(){t(".search-bar-itemtypes").parent().bsElementSpinner({top:0,backgroundcolor:"transparent"})},hideSpinner:function(){t(".search-bar-itemtypes").parent().bsElementSpinner("remove")}})}(window,jQuery,bs),function(n,t,i){"use strict";i.search=i.search||{};i.search.Property=i.EventClass.extend({init:function(n){this.o=t.extend({isMap:!1,itemTypesOptions:null,showCount:!0,keepResultInInput:!1,saveSearchOnSelect:!0,hideSearchBarOnSelect:!1},n);this.selectors={searchBarInputBtn:"#search-bar-input-btn",searchBarInput:"#search-bar-input"};this.itemTypes=new i.search.ItemTypes(this.o.itemTypesOptions);this.attachListeners();this.setupAutocomplete()},attachListeners:function(){var n=this;t(n.selectors.searchBarInputBtn).on("click",function(){return n.handleSearchBarInputBtnClick(this),!1});t(document).on("click",".suggestions-list.quick tr",function(){var i=t(this).data("suggestiondata");return n.triggerOnSelect(i.FullText,i.AllItemTypes),t("#suggestions-modal").dialog("close"),t(n.selectors.searchBarInput).val(""),!1})},setupAutocomplete:function(){var r=this;t(r.selectors.searchBarInput).on("keyup",function(n){if(i.utils.isKey(n,13)){var u=t(this);if(u.searchAutocomplete("option","itemSelected")==!1)return r.triggerOnSelect(u.val()),u.searchAutocomplete("close"),!1;t(this).searchAutocomplete("option","itemSelected",!1)}return i.utils.isKey(n,38)||i.utils.isKey(n,40)||t(this).searchAutocomplete("close"),!0}).searchAutocomplete({appendTo:".search-bar-input-wrap",autoFocus:!0,delay:500,minLength:2,showCount:r.o.showCount,itemSelected:!1,source:function(n,u){r.itemTypes.getAllCheckedCheckboxes().length?r.getSearchList(n,u,this):(t("#search-bar-input").removeClass("ui-autocomplete-loading"),i.search.searchInput.clear(),i.dialog.normal("<div title='Vælg boligtype'>Husk at vælge en boligtype<\/div>"))},select:function(u,f){var e=t(this);if(f.item.CompletionType==="NoItem"){f.item.value=e.val();r.triggerOnSelect(e.val());e.searchAutocomplete("option","itemSelected",!0);return}r.o.keepResultInInput&&(f.item.value=f.item.Text);f.item.Text!=="Ingen resultater"&&f.item.Text!=="Fortsæt indtastning for at indsnævre din søgning"?(r.triggerOnSelect(f.item.Text,void 0,f.item.CompletionType),e.searchAutocomplete("option","itemSelected",!0)):e.searchAutocomplete("option","itemSelected",!1);e.blur();r.o.hideSearchBarOnSelect&&(i.searchBar.hide(),n.scrollTo(0,265))}})},triggerOnSelect:function(n,t,r){t&&this.itemTypes.setChecked(["100","200","300","400","500","600","700","800","900"]);var u=this.itemTypes.getChecked();if(u.length===0)return i.dialog.normal("<div title='Vælg boligtype'>Husk at vælge en boligtype<\/div>"),!1;i.trak.ui.searchField(n);this.o.saveSearchOnSelect&&this.saveSearch(n,u,r);this.trigger("on_select",{term:n,itemTypes:u,completionType:r})},saveSearch:function(r,u,f){var e=this;t("#search-bar-input").addClass("ui-autocomplete-loading");t.getJSON(i.url("~/Search/SaveQuickSearch"),{term:r,itemTypes:u,isMap:e.o.isMap,completionType:f},function(f){i.json.checkResultErrors(f)?(e.itemTypes.saveCheckboxCookie(),n.location.href=f.ResultUrlstring):(t("#search-header-input").removeClass("ui-autocomplete-loading"),e.itemTypes.saveCheckboxCookie(),n.location.href=encodeURI(i.url("~/forslag?q="+r+"&i="+u)))})},getSuggestionsForList:function(n,t,r){i.get("~/version2/suggestion/NoResultSuggestionsAjax",{query:n,itemTypes:t},function(n){r.call(this,n)})},getSearchList:function(n,r){var u=this,f=this.itemTypes.getChecked();i.getJSON("~/Search/GetSearchList",{term:n.term,itemTypes:f},function(n){i.utils.browser.isMobileBrowser()||(n&&n.length&&n[0].Text!=="Ingen resultater"?t(u.selectors.searchBarInput).removeClass("ui-autocomplete-loading"):t(u.selectors.searchBarInput).removeClass("ui-autocomplete-loading"));r(n)})},handleSearchBarInputBtnClick:function(n){var r=this,u=t(r.selectors.searchBarInput).val();u===""?i.dialogs.quickSearchWholeDenmarkDialog.show(n,function(){r.triggerOnSelect(u)}):r.triggerOnSelect(u)}})}(window,jQuery,bs),function(n,t,i){"use strict";i.search=i.search||{};i.dialogs.infobox={};i.dialogs.infobox.hideBySelector=function(){};i.search.Advanced=i.EventClass.extend({init:function(n){this.itemTypes=n;this.count=null;this.advancedSearch=null;this.xhr=null;this.attachListeners()},attachListeners:function(){var n=this;t("#advanced-search-button").on("click",function(){t("#advanced-search-modal").length?t("#advanced-search-modal").is(":visible")?n.hideDialog():n.showDialog():n.createSearchAndShowDialog()})},createSearchAndShowDialog:function(){var n=this;i.get("~/version2/advancedsearch/create",function(r){i.json.checkResultErrors(r)?(t("#advanced-search-button").parent().after(r.ViewResult),n.advancedSearch=r.AdvancedSearch,n.setCount(r.Count),i.utils.browser.supportsPlaceholder()||t(".advanced-search input[type='text']").placeholder(),t(".advanced-search input[type='text'].min-max").not("#YearBuild-min, #YearBuild-max").numeric(),t("#YearBuild-min, #YearBuild-max").forceNumeric(),n.setupItemTypes(),n.setupSituationType(),n.setupProjectSale(),n.setupQuickSearch(),n.setupMoreSearch(),n.setupRadiusSearch(),n.setupMinMax(),n.setupEnergyOpenHouse(),n.setupSaveButtons(),n.setupClearSearch(),n.setupForeclosureButton(),n.setupRentalButton(),n.setupFreeText(r.Facilities),n.updateFormFromStorage(),n.showDialog()):i.dialog.error("Der er sket en fejl. Vi har registeret fejlen. Genindlæs venligst siden.")})},updateSearch:function(){i.tip.hide(".goto-map, .goto-list");i.tip.hide("#whole-denmark-dialog");var n=this;this.xhr!=null&&this.xhr.abort();t(".advanced-search .box-no-topgutter").bsElementSpinner({minTime:300,top:0,useDisabling:!1});this.xhr=i.postJSON("~/version2/advancedsearch/update",this.serializeForm(),function(t){i.json.checkResultErrors(t)?(n.advancedSearch=t.AdvancedSearch,n.updateCount(t.Count,t.ForeclosureCount,t.RentalCount),n.handleAddressStatus(t.AddressStatus)):i.dialog.error("Der er sket en fejl i opdatering af søgningen. Vi har registeret fejlen. Genindlæs venligst siden.")}).complete(function(){t(".advanced-search .box-no-topgutter").bsElementSpinner("remove")})},handleAddressStatus:function(n){var f=this,u,r;i.tip.hide("#radius");i.tip.hide("#radius-cities+span");t("#radius-cities").parent().parent().hide();n!=null&&(n.StatusCode===1?this.advancedSearch.SituationType==="radius"&&(t("#radius-street").val()!==""||t("#radius-city").val()!==""||t("#radius-cities").val()!=="")&&i.tip.info("#radius",n.StatusText,{position:"left"}):n.StatusCode===2&&(u=document.createDocumentFragment(),r=document.createElement("option"),r.value="",r.innerHTML="Vælg postnr.",u.appendChild(r),t(n.Cities).each(function(){r=document.createElement("option");r.value=this.City;r.innerHTML=this.PostalId+" "+this.City;u.appendChild(r)}),t("#radius-cities").empty().append(u).parent().parent().show(),i.tip.info("#radius-cities+span",n.StatusText,{position:"bottom-right"})))},saveSearch:function(t){t==="savegotolist"?i.trak.ui.advancedSearch("Result on List"):t==="savegotomap"&&i.trak.ui.advancedSearch("Result on Map");this.advancedSearch.SituationType==="radius"&&i.trak.ui.advancedSearch("RadiusSearch","Interaction");i.postJSON("~/version2/advancedsearch/"+t,this.serializeForm(),function(t){i.json.checkResultErrors(t)?n.location.href=t.Urlstring:i.dialog.error("Der er sket en fejl da søgningen skulle gemmes. Vi har registeret fejlen. Genindlæs venligst siden.")})},itemtypesAdvancedSetChecked:function(){var n=this.itemTypes.getChecked();n!==""&&t(".advanced-search .advanced-itemtypes input").each(function(){var i=this.id.replace("adv-bt","");n.indexOf(i)>-1&&t(this).prop("checked",!0)});t(".advanced-search .advanced-itemtypes input:checked").length>=9&&t(".advanced-search .advanced-itemtypes .btn-selectall").text("Fravælg alle")},itemtypesQuickseachSetChecked:function(){var n=t(".advanced-search .advanced-itemtypes input:checked").map(function(){return this.id.replace("adv-bt","")}).get();this.itemTypes.setChecked(n)},showDialog:function(){var n=this;i.trak.ui.advancedSearch("ShowAdvancedSearch");i.trak.pageView("Advancedsearch");n.itemtypesAdvancedSetChecked();t(".search-bar").addClass("search-bar-active").addClass("search-bar-hidden-advanced");t("#advanced-search-modal").slideDown(1e3,function(){n.updateSearch();n.trigger("dialog_shown")})},hideDialog:function(){i.trak.ui.advancedSearch("HideAdvancedSearch");this.removeInfoIcons();t(".search-bar").addClass("search-bar-active").removeClass("search-bar-hidden-advanced");t("#advanced-search-modal").slideUp(1e3,function(){})},setupMinMax:function(){var n=this;t(".advanced-search input.min-max").on("blur",function(){var r=this.id.split("-")[0];n.checkMinMax(r);t(this).val()!==t(this).data("old-value")&&(n.updateSearch(),i.trak.ui.advancedSearchDetails(r))}).on("focus",function(){t(this).data("old-value",t(this).val());var n=this.id.split("-")[0];i.tip.hide("#"+n+"-max")});t(".advanced-search select.min-max").on("change",function(){var r=this.id.split("-")[0];i.tip.hide(t("#"+r+"-max"));n.checkMinMax(r);n.updateSearch();i.trak.ui.advancedSearchDetails(r)})},setupEnergyOpenHouse:function(){var n=this;t("#EnergyMarking-max, #NextOpenHouseDays-max").on("change",function(){var t=this.id.split("-")[0];n.updateSearch();i.trak.ui.advancedSearchDetails(t)})},setupSaveButtons:function(){var r=this,u=function(t){i.tip.hide(".goto-map, .goto-list");r.noItemsTimeout!=null&&n.clearTimeout(r.noItemsTimeout);i.tip.show(t,"Der er ingen boliger i søgningen!");r.noItemsTimeout=n.setTimeout(function(){i.tip.hide(t)},2e3)},f=function(n,u){if(i.tip.hide(".goto-map, .goto-list"),r.advancedSearch.SituationType==="radius"){r.saveSearch(u);return}if(r.advancedSearch.SituationType==="quicksearch"&&(t("#area-area").val()!==""||t("#area-municipality").val()!=="")){r.saveSearch(u);return}if(r.advancedSearch.SituationType==="morepostal"&&t("#more-postal").val()!==""){r.saveSearch(u);return}if(r.advancedSearch.SituationType==="morecity"&&t("#more-city").val()!==""){r.saveSearch(u);return}i.dialogs.wholeDenmarkDialog.show(n,function(){r.saveSearch(u)})};t(".advanced-search").on("click",".goto-list",function(){return r.count===0?u(t(this)):f(t(this),"savegotolist"),!1}).on("click",".goto-map",function(){return t(this).hasClass("disabled")?!1:(r.count===0?u(t(this)):f(t(this),"savegotomap"),!1)})},setupClearSearch:function(){var n=this;t(".advanced-search #clear-search").on("click",function(){return i.trak.ui.advancedSearch("Nulstil alle valg"),i.sessionStorage.removeItem("AdvancedSearch"),n.removeInfoIcons(),t("#AreaResidential-min, #AreaResidential-max, #AreaParcel-min, #AreaParcel-max,#PaymentCash-min, #PaymentCash-max,#SalesPeriod-min, #SalesPeriod-max,#YearBuild-min, #YearBuild-max,#AreaBasement-min, #AreaBasement-max,#MonthlyExpenses-min, #MonthlyExpenses-max,#area-area,#more-postal,#more-city,#radius-street,#radius-city,#radius-postal").val(""),t("#NextOpenHouseDays-max,#NumberOfFloors-min, #NumberOfFloors-max,#NumberOfRooms-min, #NumberOfRooms-max,#EnergyMarking-max,#Floor-min, #Floor-max,#area-municipality,#radius-radius"),n.freeTextVue.newword="",n.freeTextVue.words=[],t("#projectsale").prop("checked",!1),t(".advanced-search #radius-cities").parent().parent().hide(),n.advancedSearch.SituationType=null,t(".situation-type").find("select").prop("disabled",!1),t(".situation-type").css("opacity","1").find("input, select").prop("disabled",!1),n.updateSearch(),!1})},setupItemTypes:function(){var n=this;t(".advanced-search .advanced-itemtypes .btn-selectall").on("click",function(){t(".advanced-search .advanced-itemtypes input:checked").length<9?(t(".advanced-search .advanced-itemtypes input").prop("checked",!0),t(this).text("Fravælg alle"),i.trak.ui.advancedSearchItemTypeSelect("Click","Vælg alle")):(t(".advanced-search .advanced-itemtypes input").prop("checked",!1),t(this).text("Vælg alle"),i.trak.ui.advancedSearchItemTypeSelect("Click","Fravælg alle"));n.itemtypesQuickseachSetChecked();n.updateSearch()});t(".advanced-search .advanced-itemtypes input").on("change",function(){n.itemtypesQuickseachSetChecked();n.updateSearch();i.trak.ui.advancedSearchItemTypeSelect(this.checked?"Check":"Uncheck",t('label[for="'+this.id+'"]').text())})},setupProjectSale:function(){var n=this;t("#projectsale").on("change",function(){n.updateSearch();i.trak.ui.advancedSearchFacility(this.checked?"Check":"Uncheck",t('label[for="'+this.id+'"]').text())})},setupSituationType:function(){var n=this;t(".advanced-search .situation-type").on("mouseover",function(){if(n.advancedSearch.SituationType!=null&&n.advancedSearch.SituationType!==this.id){var t="Klik her hvis du i stedet ønsker at ";switch(this.id){case"quicksearch":t+="lave en almindelig lynsøgning";break;case"morepostal":t+="søge på et eller flere postnumre";break;case"morecity":t+="søge på en eller byer";break;case"radius":t+="lave en radiussøgning"}i.follow(t)}}).on("mouseout",function(){i.follow()}).on("click",function(){var t=n.advancedSearch.SituationType!=null||this.id==="radius";n.advancedSearch.SituationType!==this.id&&(n.advancedSearch.SituationType=this.id,n.setSituationActive(this),t&&n.updateSearch())})},setSituationActive:function(n){i.follow();t(".situation-type").css("opacity","1").find("input, select").prop("disabled",!1);t(".situation-type").not(n).css("opacity","0.5").find("input, select").prop("disabled",!0)},setupForeclosureButton:function(){var n=this;n.toggleForeclosure();t(".advanced-search #foreclosure").on("click",function(){n.toggleForeclosure();n.updateSearch()})},setupRentalButton:function(){var n=this;n.toggleRental();t(".advanced-search #rental").on("click",function(){n.toggleRental();n.updateSearch()})},toggleForeclosure:function(){t(".foreclosure-count").toggle(t(".advanced-search #foreclosure").is(":checked"))},toggleRental:function(){t(".rental-count").toggle(t(".advanced-search #rental").is(":checked"))},checkMinMax:function(n){var r=t("#"+n+"-min").val(),u=t("#"+n+"-max").val(),f;r=r!=null?parseInt(r.replace(/\./g,""),10):0;u=u!=null?parseInt(u.replace(/\./g,""),10):0;isNaN(r)||isNaN(u)||r>u&&(f=t("#"+n+"-max"),i.tip.info(f,"Minimum kan ikke være større end maksimum"))},serializeForm:function(){var r=this,n=function(n){r.checkMinMax(n);var i=t("#"+n+"-min").val(),u=t("#"+n+"-max").val();return{Min:i!=null?i.replace(/\./g,""):null,Max:u!=null?u.replace(/\./g,""):null}},u=function(){return t(".advanced-itemtypes input:checked").map(function(){return this.id.replace("adv-bt","")}).get().join("|")};return this.advancedSearch.ItemTypes=u(),this.advancedSearch.AreaResidential=n("AreaResidential"),this.advancedSearch.AreaParcel=n("AreaParcel"),this.advancedSearch.NextOpenHouseDays=n("NextOpenHouseDays"),this.advancedSearch.NumberOfFloors=n("NumberOfFloors"),this.advancedSearch.NumberOfRooms=n("NumberOfRooms"),this.advancedSearch.PaymentCash=n("PaymentCash"),this.advancedSearch.SalesPeriod=n("SalesPeriod"),this.advancedSearch.YearBuild=n("YearBuild"),this.advancedSearch.AreaBasement=n("AreaBasement"),this.advancedSearch.EnergyMarking=n("EnergyMarking"),this.advancedSearch.EnergyMarking.Min=this.advancedSearch.EnergyMarking.Max!=""?1:null,this.advancedSearch.Floor=n("Floor"),this.advancedSearch.MonthlyExpenses=n("MonthlyExpenses"),this.advancedSearch.Facilities=t(".facility:checked").map(function(){return t(this).val()}).get(),this.advancedSearch.ProjectSale=t("#projectsale").is(":checked"),this.advancedSearch.AreaArea=t(".advanced-search #area-area").val(),this.advancedSearch.AreaMunicipality=t(".advanced-search #area-municipality").val(),this.advancedSearch.MorePostal=t(".advanced-search #more-postal").val(),this.advancedSearch.MoreCity=t(".advanced-search #more-city").val(),this.advancedSearch.RadiusStreet=t(".advanced-search #radius-street").val(),this.advancedSearch.RadiusPostal=t(".advanced-search #radius-postal").val(),this.advancedSearch.RadiusCity=t(".advanced-search #radius-city").val(),this.advancedSearch.RadiusRadius=t(".advanced-search #radius-radius").val(),this.advancedSearch.MakeForeclosureSearch=t(".advanced-search #foreclosure").is(":checked"),this.advancedSearch.MakeRentalSearch=t(".advanced-search #rental").is(":checked"),this.advancedSearch.FreeTextWords=this.freeTextVue.words,i.sessionStorage.setItem("AdvancedSearch",this.advancedSearch),this.advancedSearch},removeInfoIcons:function(){i.tip.hide(".min-max");i.tip.hide(".goto-map, .goto-list");i.tip.hide(t("#whole-denmark-dialog"));i.tip.hide("#radius");i.tip.hide("#radius-cities+span");i.tip.hide("#free-text-text")},updateFormFromStorage:function(){var n=i.sessionStorage.getItem("AdvancedSearch");n!=null&&(n.SituationType!=null&&(this.advancedSearch.SituationType=n.SituationType,this.setSituationActive(t(".advanced-search .situation-type#"+n.SituationType)[0])),t("#AreaResidential-min").val(n.AreaResidential.Min.toStringWithThousandSeparator()),t("#AreaResidential-max").val(n.AreaResidential.Max.toStringWithThousandSeparator()),t("#AreaParcel-min").val(n.AreaParcel.Min.toStringWithThousandSeparator()),t("#AreaParcel-max").val(n.AreaParcel.Max.toStringWithThousandSeparator()),t("#NumberOfFloors-min").val(n.NumberOfFloors.Min),t("#NumberOfFloors-max").val(n.NumberOfFloors.Max),t("#NumberOfRooms-min").val(n.NumberOfRooms.Min),t("#NumberOfRooms-max").val(n.NumberOfRooms.Max),t("#PaymentCash-min").val(n.PaymentCash.Min.toStringWithThousandSeparator()),t("#PaymentCash-max").val(n.PaymentCash.Max.toStringWithThousandSeparator()),t("#SalesPeriod-min").val(n.SalesPeriod.Min.toStringWithThousandSeparator()),t("#SalesPeriod-max").val(n.SalesPeriod.Max.toStringWithThousandSeparator()),t("#YearBuild-min").val(n.YearBuild.Min),t("#YearBuild-max").val(n.YearBuild.Max),t("#AreaBasement-min").val(n.AreaBasement.Min.toStringWithThousandSeparator()),t("#AreaBasement-max").val(n.AreaBasement.Max.toStringWithThousandSeparator()),t("#EnergyMarking-max").val(n.EnergyMarking.Max),t("#Floor-min").val(n.Floor.Min),t("#Floor-max").val(n.Floor.Max),t("#MonthlyExpenses-min").val(n.MonthlyExpenses.Min.toStringWithThousandSeparator()),t("#MonthlyExpenses-max").val(n.MonthlyExpenses.Max.toStringWithThousandSeparator()),t("#NextOpenHouseDays-max").val(n.NextOpenHouseDays.Max),t("#area-area").val(n.AreaArea),t("#area-municipality").val(n.AreaMunicipality),t("#more-postal").val(n.MorePostal),t("#more-city").val(n.MoreCity),t("#radius-street").val(n.RadiusStreet),t("#radius-city").val(n.RadiusCity),t("#radius-radius").val(n.RadiusRadius),t(".advanced-search #foreclosure").prop("checked",n.MakeForeclosureSearch),t(".advanced-search #rental").prop("checked",n.MakeRentalSearch),t("#projectsale").prop("checked",n.ProjectSale),n.FreeTextWords!=undefined&&(this.freeTextVue.words=n.FreeTextWords),this.toggleForeclosure(),this.toggleRental())},setupQuickSearch:function(){var n=this;t(".advanced-search #area-area").bsAutocomplete({source:i.url("~/advancedsearch/GetQuicksearchList"),select:function(i,r){n.areaAreaUpdating=!0;t(this).val(r.item.value);t(".advanced-search #area-municipality").val("").prop("disabled",!1);n.updateSearch();n.areaAreaUpdating=!1}});t(".advanced-search #area-municipality").on("change",function(){if(n.areaAreaUpdating){n.areaAreaUpdating=!1;return}t(".advanced-search #area-area").val("");n.updateSearch()})},setupFreeText:function(n){var t=this;t.freeTextVue=new i.vue.FreeText({el:"#freetext-app",data:{facilities:n}}).$on("word_added",function(){t.updateSearch()}).$on("word_removed",function(n){i.trak.ui.advancedSearchFreetext("Term removed",n.Name);t.updateSearch()}).$on("facility_clicked",function(n){i.trak.ui.advancedSearchFreetext("Term clicked",n.Name)}).$on("word_typed",function(n){i.trak.ui.advancedSearchFreetext("Term added",n)})},setupMoreSearch:function(){var n=this;t(".advanced-search #more-postal, .advanced-search #more-city").on("blur",function(){t(this).val()!==t(this).data("old-value")&&n.updateSearch()}).on("focus",function(){t(this).data("old-value",t(this).val())})},setupRadiusSearch:function(){var n=this;t(".advanced-search #radius-street, .advanced-search #radius-city").on("blur",function(){t(this).val()!==t(this).data("old-value")&&n.updateSearch()}).on("focus",function(){t(this).data("old-value",t(this).val())});t(".advanced-search #radius-street").bsAutocomplete({source:i.url("~/advancedsearch/getstreetlist"),select:function(){t(this).data("old-value",t(this).val());n.updateSearch()}});t(".advanced-search #radius-radius").on("change",function(){n.updateSearch()});t("#radius-cities").on("click",function(){i.tip.hide("#radius-cities+span")});t("#radius-cities").on("change",function(){t("#radius-city").val(t(this).val());t("#radius-message").text("");n.updateSearch()})},setCount:function(n){this.count=parseInt(n,10);t(".advanced-search .slot").bsSlot(this.count);t(".advanced-search .slot-foreclosure").bsSlot(this.count,{color:"blue"});t(".advanced-search .slot-rental").bsSlot(this.count,{color:"orange"})},updateCount:function(n,i,r){this.count=parseInt(n,10);t(".advanced-search .slot").bsSlot("update",this.count);t(".advanced-search .slot-foreclosure").bsSlot("update",i);t(".advanced-search .slot-rental").bsSlot("update",r)}})}(window,jQuery,bs),function(n,t,i){"use strict";i.search=i.search||{};i.search.Seo=i.EventClass.extend({init:function(n){this.o=t.extend({isMap:!1,itemTypesOptions:null,showCount:!1,keepResultInInput:!1},n);this.selectors={searchBarInputBtn:"#search-bar-input-btn",searchBarInput:"#search-bar-input"};this.attachListeners();this.setupAutocomplete()},attachListeners:function(){var n=this;t(n.selectors.searchBarInputBtn).on("click",function(){return n.submit(),!1})},setupAutocomplete:function(){var n=this;t(n.selectors.searchBarInput).searchAutocomplete({appendTo:".search-bar-input-wrap",autoFocus:!0,delay:500,minLength:2,showCount:n.o.showCount,itemSelected:!1,source:function(t,i){n.getSearchList(t,i,this)},select:function(t,i){i.item.value=i.item.Text;n.submit(i.item)}})},submit:function(r){var u=this;r=r||u.firstItem;r!=null&&r.Text!=="Ingen resultater"?n.location.href=i.url(r.Url):i.dialogs.seoSearchWholeDenmarkDialog.show(t("#search-bar-input-btn"))},getSearchList:function(n,r){var u=this,f=t.trim(n.term);t.getJSON(i.url("~/SeoSearch/GetSearchList"),{term:f},function(n){u.firstItem=n[0];r(n)})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.Include=i.EventClass.extend({init:function(n,i){this.preTrakName=n;this.attachListeners();this.addListener("includechanged",i);t(".foreclosure-slot").bsSlot(0,{color:"blue"});t(".rental-slot").bsSlot(0,{color:"orange"})},attachListeners:function(){var n=this;t("#include-foreclosure").on("click",function(){return n.handleClick(this,"Foreclosure")});t("#include-rental").on("click",function(){return n.handleClick(this,"Rental")});t("#projectsale").on("click",function(){return n.handleClick(this,"ProjectSale")})},handleClick:function(n,r){var e=this,u=t(n),f=u.prop("checked"),o=function(){u.prop("checked",f);var n=(f?"Add":"Remove")+r;e.trigger("includechanged",{commandName:n,commandArguments:""});e.trak(f,r)};return i.filters.isLocked?(i.filters.showLockedMessage(u.parent()).then(o),!1):(o(),!0)},getIsForeclosureChecked:function(){return t("#include-foreclosure").is(":checked")},getIsRentalChecked:function(){return t("#include-rental").is(":checked")},updateForeclosureCount:function(n){n==null?(t(".filters").removeClass("slot-foreclosure"),t(".foreclosure-slot-wrap").hide()):(t(".foreclosure-slot-wrap").show(),t(".filters").addClass("slot-foreclosure"),t(".foreclosure-slot").bsSlot("update",n))},updateRentalCount:function(n){n==null?(t(".filters").removeClass("slot-rental"),t(".rental-slot-wrap").hide()):(t(".filters").addClass("slot-rental"),t(".rental-slot-wrap").show(),t(".rental-slot").bsSlot("update",n))},trak:function(n,t){this.preTrakName&&i.trak.ui[this.preTrakName+"RentForeclosure"](n,t)}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.Slider=i.EventClass.extend({init:function(n,i,r){this.preTrakName=n;this.settings=t.extend({className:null},r);this.attachListeners();i!=undefined&&this.addListener("slidechanged",i)},attachListeners:function(){var n=this;t(".filter .slider").bsFilterSlider({start:function(){if(i.filters.isLocked)return i.filters.showLockedMessage(t(this).parent()),!1},change:function(i,r){n.updateSlide(t(this),r,!0)},slide:function(i,r){n.updateSlide(t(this),r,!1)},className:this.settings.className})},updateSlide:function(n,t,r){var v=n.parent().parent(),a=v.data("options"),f=t.values[0],e=t.values[1],w=a.defaultMin,b=a.defaultMax,o=a.stepValues.split(","),c="",l="",u=v.attr("id"),s=f===w?"":f,h=e===b?"":e,y=u==="YearBuild"?f:f.toStringWithThousandSeparator(),p=u==="YearBuild"?e:e.toStringWithThousandSeparator();o.length>1&&(s=s!==""?parseInt(o[f],10):"",h=h!==""?parseInt(o[e],10):"",y=u==="YearBuild"?parseInt(o[f],10):parseInt(o[f],10).toStringWithThousandSeparator(),p=u==="YearBuild"?parseInt(o[e],10):parseInt(o[e],10).toStringWithThousandSeparator());n.bsFilterSlider("updateNumbers",y,p,f,e);r&&(u==="Floor"||u==="AreaBasement"||u==="MonthlyExpenses"||u==="EnergyMarking"?(c="SetDynamicIntervalValue",u==="EnergyMarking"&&(s===""&&h>0&&(s=1),s>0&&h===""&&(h=7)),l=[s,h,u].join("|")):t.handle.nextSibling.nodeName==="SPAN"?(c="SetIntervalMinValue",l=s+"|"+u):(c="SetIntervalMaxValue",l=h+"|"+u),this.trigger("slidechanged",{commandName:c,commandArguments:l}));typeof this.preTrakName=="string"&&i.trak.ui[this.preTrakName+"SearchDetails"](u)},getSliderValues:function(n){var r=t("#"+n);if(r.length){var u=r.data("options"),i=r.find(".slider").bsSlider("values"),e=u.defaultMin,o=u.defaultMax,f=u.stepValues.split(",");return i[0]==e&&i[1]==o?null:{Min:f[i[0]],Max:f[i[1]]}}throw"getSliderValues kunne ikke finde id: "+n;},setSliderValue:function(n,i){var c=function(n,t){for(var r,i,u=n.length;u--;)r=parseInt(n[u],10),r<=t&&(i===undefined||i<r)&&(i=r);return i?n.indexOf(i.toString()):0},l=function(n,t){for(var r,i,u=n.length;u--;)r=parseInt(n[u],10),r>=t&&(i===undefined||i>r)&&(i=r);return i?n.indexOf(i.toString()):n.length},o=t("#"+n),r,s,h,u,f;if(o.length){if(r=o.data("options"),r.stepValues==="")u=i&&i.Min||r.defaultMin,f=i&&i.Max||r.defaultMax,s=u>=r.defaultMin&&u<=r.defaultMax?u:r.defaultMin,h=f>=r.defaultMin&&f<=r.defaultMax?f:r.defaultMax;else{var e=r.stepValues.split(","),u=i&&i.Min||e[0],f=i&&i.Max||e[e.length-1];s=c(e,u)||r.defaultMin;h=l(e,f)||r.defaultMax}o.find(".slider").bsSlider("values",[s,h])}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.Area=i.EventClass.extend({init:function(n){this.attachListeners();this.addListener("arearemove",n)},attachListeners:function(){var n=this;t(".filter.areas").on("click",".area a",function(){n.removeArea(t(this).parent())})},removeArea:function(n){var r=n.data("area"),i;this.trigger("arearemove",r);n.remove();i=t(".filter .area-wrap");i.children().length==0&&(i.children().remove(),i.append(t("<div/>",{"class":"area",text:"Danmark"})))}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.AreaSelectable=i.EventClass.extend({init:function(n){this.arrows={up:"Luk",down:"Justér"};this.attachListeners();n!=undefined&&this.addListener("areaschanged",n)},refreshDropdowns:function(){var n=this,u,r;t("#area-selectable-county, #area-selectable-municipality, #area-selectable-postal").on("focus",function(){u=t(this).val()}).on("change",function(){var r=t(this),f=r.val(),u=function(){n.addAreaFromDropdown(JSON.parse(f),r);r.val("")};i.filters.isLocked?(i.filters.showLockedMessage(r.closest(".area-add-wrap")).then(u),r.val("")):u()});t("#area-selectable-city").on("change",function(){var r=t(this),f=r.val(),u=function(){n.addCityFromDropdown(JSON.parse(f),r);r.val("")};i.filters.isLocked?(i.filters.showLockedMessage(r.closest(".area-add-wrap")).then(u),r.val("")):u()});t("#area-selectable-postal2").on("change",function(){var r=t(this),f=r.val(),u=function(){n.addPostal2FromDropdown(JSON.parse(f),r);r.val("")};i.filters.isLocked?(i.filters.showLockedMessage(r.closest(".area-add-wrap")).then(u),r.val("")):u()});t("#area-selectable-radius").on("focus",function(){r=t(this).val()}).on("change",function(){var u=t(this),f=this.value,e=function(){u.val(f);var i=t(".filter .area-radius .area").text(),r=i.indexOf(" i en afstand af");r>-1&&(i=i.substr(0,r));f>0&&(i+=" i en afstand af "+u.find(":selected").text()+".");t(".filter .area-radius .area").text(i);n.trigger("radiuschanged",f)};i.filters.isLocked?(i.filters.showLockedMessage(u.closest(".area-add-wrap")).then(e),u.val(r)):e()})},attachListeners:function(){var n=this,r;this.refreshDropdowns();r=t(".filters").not(".filters-on-map");t(".filters-on-map").on("click",".remove-area",function(){var n=t(this),u=function(){var t=n.parent().parent(),i=r.find(".area-item").filter(function(){return n.html()===t.html()});i.find(".remove-area").trigger("click")};i.filters.isLocked?i.filters.showLockedMessage(n.closest(".area-selectable")).then(u):u()});r.on("click",".toggle-area-sub",function(){var r=t(this),u=function(){var t=r.parent().parent(),u=t.find(".area-sub"),f;t.data("areaSubLoaded")==!0?u.is(":visible")?u.slideUp(function(){r.html(n.arrows.down)}):u.slideDown(function(){r.html(n.arrows.up)}):(t.data("areaSubLoaded",!0),f=t.data("area"),i.get("~/version2/filters/GetAreasByArea",f,function(t){i.json.checkResultErrors(t)&&u.html(t.PartialView).slideDown(function(){r.html(n.arrows.up)})}))};return i.filters.isLocked?i.filters.showLockedMessage(t(".area-selectable")).then(u):u(),!1}).on("click",".remove-area",function(){var r=t(this),u=function(){var t=r.parent().parent().data("area"),i,u;r.parent().parent().remove();t.Type=="City"?(i=n.getCities(),n.trigger("citychanged",n.parseCities(i))):t.Type=="PostalAddress"?(u=n.getAreas(),n.trigger("postaladdresschanged",n.parsePostals(u))):n.trigger("areaschanged",n.getAreas());n.trigger("arearemoved",t)};i.filters.isLocked?i.filters.showLockedMessage(r.closest(".area-selectable")).then(u):u()}).on("click",".area-sub input",function(){n.trigger("areaschanged",n.getAreas())})},getAreas:function(){this.copyToAreaSelectableMap();var n=[],i=t(".filters").not(".filters-on-map");return i.find(".area-selectable .area-item").each(function(){var i=t(this),r=i.find(".area-sub").find("input"),u=r.filter(":checked");u.length<r.length?u.each(function(){n.push(t(this).parent().data("area"))}):n.push(i.data("area"))}),n},copyToAreaSelectableMap:function(){var n=t(".filters-on-map"),i=t(".filters").not(".filters-on-map");n.find(".area-selectable").empty().append(i.find(".area-selectable").clone().children())},getCities:function(){var n=[];return t(".area-cities").find(".area-item").each(function(){var i=t(this);n.push(i.data("area"))}),n},addAreaFromDropdown:function(t,r){for(var u=this.getAreas(),f=0,e;e=u[f];f++)if(t.Number==e.Number){i.tip.info(r,t.Name+" er allerede valgt!");n.setTimeout(function(){i.tip.hide(r)},2e3);return}u.push(t);this.trigger("areaschanged",u);this.appendArea(t)},addCityFromDropdown:function(t,r){for(var u=this.getCities(),f=0,e;e=u[f];f++)if(t.Name.toUpperCase()==e.Name.toUpperCase()){i.tip.info(r,t.Name+" er allerede valgt!");n.setTimeout(function(){i.dialogs.infobox.hide(r)},2e3);return}u.push(t);this.trigger("citychanged",this.parseCities(u));this.appendArea(t)},addPostal2FromDropdown:function(t,r){for(var u=this.getAreas(),f=0,e;e=u[f];f++)if(t.Number==e.Number){i.tip.info(r,t.Name+" er allerede valgt!");n.setTimeout(function(){i.tip.hide(r)},2e3);return}u.push(t);this.trigger("postaladdresschanged",this.parsePostals(u));this.appendArea(t)},parseCities:function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].Name);return i.join(", ")},parsePostals:function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].Number);return i.join(",")},setFilterAreaViewResult:function(n){t(".filters").find(".filter.areas").html(n);this.refreshDropdowns()},appendArea:function(n){var u=t("<a/>",{"class":"remove-area tip",text:"×",title:"Slet"}),f=t("<a/>",{"class":"toggle-area-sub",html:this.arrows.down}),r=t("<div/>",{"class":"area"}),e=t("<div/>",{"class":"area-sub"}),i=t("<div/>",{"class":"area-item"});i.data("area",n);i.append(r);switch(n.Type){case"City":r.text(n.Name).append(u);t(".area-cities").append(i);break;case"PostalAddress":r.text(n.Number).append(u);t(".area-postals").append(i);break;case"Postal":r.text(n.Number+" "+n.Name).append(u);t(".area-postals").append(i);break;case"Municipality":r.text(n.Name+" (kommune)").append(f,u);t(".area-municipalities").append(i.append(e));break;case"County":r.text(n.Name+" (landsdel)").append(f,u);t(".area-counties").append(i.append(e))}},printArea:function(n){var r=null,u;switch(n.Type){case i.maps.tool.clickable.type.POSTAL:r=n.Number+" "+n.Name;break;case i.maps.tool.clickable.type.MUNICIPALITY:r=n.Name+" (kommune)";break;case i.maps.tool.clickable.type.COUNTY:r=n.Name}r!=null&&(u=n.Type+"-"+n.Number,t(".area-selectable").append(t("<div/>",{id:u,"class":"area-item","data-area":JSON.stringify(n)}).append(t("<div/>",{"class":"area",text:r}).append(t("<a/>",{text:"×","class":"remove-area"})))))},printAreaDenmark:function(){this.printText("Danmark")},printPolygon:function(){this.printText("Den valgte polygon")},printDynamic:function(){this.printText("Det viste kortudsnit")},printText:function(n){this.removePrint();t(".area-selectable").append(t("<div/>",{"class":"area-item"}).append(t("<div/>",{"class":"area",text:n})))},removePrint:function(){t(".area-selectable").children().remove()},removeAreaPrint:function(n,i){t(".area-selectable").find("#"+n+"-"+i).remove()}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.ItemTypes=i.EventClass.extend({init:function(n,t,i){this.allItemTypes="100|200|300|400|500|600|700|800|900";this.itemTypes=t;this.preTrakName=n||"Unknown";this.loadAutocomplete();this.attachListeners();i!=undefined&&this.addListener("itemtypechanged",i)},attachListeners:function(){var u=this,n,r;if(this.itemTypes!=null)for(n=0;r=this.itemTypes[n];n++)t("#pt"+r.Number).prop("checked",r.Selected);t(".property-types :checkbox").on("click",function(){var n=t(this),f=n.prop("checked"),r=function(){if(n.prop("checked",f),t(".property-types :checkbox:checked").length<1)return!1;u.updateItemTypes(n)};return i.filters.isLocked?(i.filters.showLockedMessage(t(".filter.property-types")).then(r),!1):r()})},updateItemTypes:function(n){var r=n.is(":checked"),u=n.prop("id"),f=r?"AddItemTypes":"RemoveItemType",e=u.replace("pt","");this.trigger("itemtypechanged",{commandName:f,commandArguments:e});i.trak.ui[this.preTrakName+"ItemTypeSelect"](r,t('label[for="'+u+'"]').text())},getCheckedItemTypes:function(){return t(".property-types :checkbox:checked").map(function(){return this.id.replace("pt","")}).get().join("|")},loadAutocomplete:function(){var r=this,n=t(".filter.property-types input.search"),f=t(".filter.property-types .btn"),e=t(".filter.property-types .filter-body"),o=function(t,u){var f=r.getCheckedItemTypes();i.getJSON("~/Search/GetSearchList",{term:t.term,itemTypes:f},function(t){t&&t.length&&t[0].Text!=="Ingen resultater"&&n.removeClass("ui-autocomplete-loading");t.length===1&&t[0].CompletionType==="NoItem"&&(t=[]);u(t)})},u=function(n,t){var u=r.getCheckedItemTypes();u.length===0||(r.trigger("on_quicksearch_select",{term:n,itemTypes:r.getCheckedItemTypes(),completionType:t}),i.trak.ui[r.preTrakName+"QuickSearch"](n))};f.on("click",function(){if(i.filters.isLocked)return i.filters.showLockedMessage(t(".filter.property-types")).then(function(){u(n.val())}),!1;u(n.val())});n.on("blur",function(){}).on("focus",function(){if(i.filters.isLocked)return i.filters.showLockedMessage(t(".filter.property-types")).then(function(){n.focus()}),n.blur(),!1}).on("keyup",function(t){i.utils.isKey(t,13)&&n.searchAutocomplete("option","itemSelected")==!1&&(t.preventDefault(),u(n.val()),n.blur().val("").focus())}).searchAutocomplete({appendTo:e,autoFocus:!0,delay:500,minLength:2,showCount:!1,hideLastItem:!0,itemSelected:!1,source:function(t,i){r.getCheckedItemTypes().length?o(t,i,this):n.removeClass("ui-autocomplete-loading")},select:function(n,i){var r=t(this);if(i.item.CompletionType==="NoItem"){i.item.value=r.val();r.searchAutocomplete("option","itemSelected",!0);return}i.item.Text!=="Ingen resultater"&&i.item.Text!=="Fortsæt indtastning for at indsnævre din søgning"?(u(i.item.Text,i.item.CompletionType),r.searchAutocomplete("option","itemSelected",!0)):r.searchAutocomplete("option","itemSelected",!1)}})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.Facility=i.EventClass.extend({init:function(n,t){this.preTrakName=n||"Unknown";this.attachListeners();t!=undefined&&this.addListener("facilitychanged",t)},attachListeners:function(){var n=this;t("#facilities").multiselect({appendTo:".filters-body",header:!1,position:{my:"left top",at:"left bottom"},noneSelectedText:"Vælg altan, elevator, garage ...",selectedText:"Vælg altan, elevator, garage ...",height:"auto",minWidth:"auto",classes:"multi-select-button",click:function(t,i){n.updateFacilities(i)}});t("#facilities-list").on("click","a",function(){return n.updateFacilitiesFromList(this),!1})},updateFacilities:function(n){this.updateFacilityListAndPosition();this.trigger("facilitychanged",{commandName:n.checked?"AddFacility":"RemoveFacility",commandArguments:n.value});i.trak.ui[this.preTrakName+"Facility"](n.checked,n.text)},updateFacilitiesFromList:function(n){var r=t(n).data("facility-id"),u=t(n).text();t("#facilities option[value='"+r+"']").removeAttr("selected");t("#facilities").multiselect("refresh");this.updateFacilityListAndPosition();this.trigger("facilitychanged",{commandName:"RemoveFacility",commandArguments:r});i.trak.ui[this.preTrakName+"Facility"](!1,u)},updateFacilityListAndPosition:function(){var n=t("#facilities").multiselect("getChecked");t("#facilities-list").html("");n.length?(t("#facilities-list-wrap").show(),t("#facilities-list").append(n.map(function(){return t("<a/>",{id:"facility-"+this.value,title:"Fjern "+this.title+" fra din søgning",text:this.title,href:"#","data-facility-id":this.value}).prop("outerHTML")}).get().join(", "))):t("#facilities-list-wrap").hide();var i=t("#facilities").multiselect("getButton"),r=i.offset(),u=t("#facilities").multiselect("widget");u.css({top:r.top+i.outerHeight(),left:r.left})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filter=i.filter||{};i.filter.FreeText=i.EventClass.extend({init:function(n,t,r){var u=this;this.preTrakName=n||"Unknown";r!=undefined&&this.addListener("onFreeTextChanged",r);this.vue=new i.vue.FreeText({el:"#freetext-app",data:{words1:t.words1,words2:t.words2,facilities:t.facilities,checkFilterLock:!0}});this.vue.$on("word_added",function(n){u.trigger("onFreeTextChanged",{commandName:"AddFreeTextWord",commandArguments:JSON.stringify(n)})}).$on("word_removed",function(n){u.trigger("onFreeTextChanged",{commandName:"RemoveFreeTextWord",commandArguments:JSON.stringify(n)});i.trak.ui[u.preTrakName+"FreeText"]("Term removed",n.Name)}).$on("facility_clicked",function(n){i.trak.ui[u.preTrakName+"FreeText"]("Term clicked",n.Name)}).$on("word_typed",function(n){i.trak.ui[u.preTrakName+"FreeText"]("Term added",n)})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filters=i.filters||{};i.filters.tipElement=null;i.filters.isLocked=!1;i.filters.setupLock=function(n){i.filters.isLocked=n;t(".btn-filter-unlock").on("click",function(){i.filters.unLock();var n=t(this).parents(".filter-lock").hasClass("hidden-m");i.trak.ui.lockAdjustSearch("Click Rediger "+(n?"bottom":"top"))});t(".btn-filter-lock").on("click",function(){i.filters.lock();var n=t(this).parents(".filter-lock").hasClass("hidden-m");i.trak.ui.lockAdjustSearch("Click Gem "+(n?"bottom":"top"))});i.filters.isLocked&&t(".filters").addClass("lock-message");t(t(".filter.filter-lock")[1]).addClass("hidden-m hidden-s")};i.filters.lock=function(){i.filters.isLocked=!0;t(".filter.filter-lock").show().removeClass("unlocked");t(".filters").addClass("lock-message")};i.filters.unLock=function(){i.filters.isLocked=!1;t(".filter.filter-lock").show().addClass("unlocked");t(".filters").addClass("lock-message")};i.filters.removeLockedMessage=function(){i.filters.tipElement&&i.tip.remove(i.filters.tipElement)};i.filters.showLockedMessage=function(n,r){var f,u;return i.filters.removeLockedMessage(),i.trak.ui.lockAdjustSearch("Impression Vist advarsel"),f=t.extend({position:"top",message:"Du er ved at ændre en stjernemarkeret søgning. Vil du fortsætte?"},r),i.filters.tipElement=n,u=t.Deferred(),i.tip.show(n,"<div id='filter-locked-dialog'>"+f.message+"<\/div>",{position:f.position,buttons:{"continue":{text:"Ja",callback:function(n){i.tip.hide(n);i.filters.unLock();u.resolve(!1);i.trak.ui.lockAdjustSearch("Click Ja")}},cancel:{text:"Nej",callback:function(n){i.tip.hide(n);i.filters.lock();u.reject(!0);i.trak.ui.lockAdjustSearch("Click Nej")}}}}),u.promise()};i.Filters=i.EventClass.extend({init:function(n,r){this.options=t.extend({isLocked:!1,preTrakName:null},r);i.filters.setupLock(this.options.isLocked);this.setCount(n);this.setupButtonAndObfuscator()},setupButtonAndObfuscator:function(){var n=this;t(".btn-filter").on("click",function(){t(".filter-obfuscator").addClass("is-visible");t(".filters").addClass("is-visible");t("body").addClass("noscroll");i.trak.ui[n.options.preTrakName+"AdjustSearch"]("Show")});t(".filter-obfuscator, .btn-filter-close").on("click",function(){t(this).hasClass("mappopup")||(i.filters.removeLockedMessage(),t(".filter-obfuscator").removeClass("is-visible"),t(".filters").removeClass("is-visible"),t("body").removeClass("noscroll"),i.trak.ui[n.options.preTrakName+"AdjustSearch"]("Hide"))})},setupSlider:function(n){var t=this;this.sliders=new i.filter.Slider(t.options.preTrakName,function(n){t.triggerFilterChange(n.commandName,n.commandArguments)},n)},triggerFilterChange:function(n,t){this.trigger("bs_filter_onchange",{commandName:n,commandArguments:t})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filters=i.filters||{};i.filters.Property=i.Filters.extend({init:function(n,t){this._super(n,t)},setCount:function(n){this.count=parseInt(n,10);t(".property-slot").bsSlot(this.count,{visibleNumbers:7})},updateCount:function(n){this.count=parseInt(n,10);t(".property-slot").bsSlot("update",this.count)},setupOpenHouse:function(){var r=this,n;t("#NextOpenHouseDays select").on("focus",function(){n=t(this).val()}).on("change",function(){var u=t(this),f=u.val(),e=function(){u.val(f);u.parent().parent().toggleClass("disabled",f==="-1");var n=f+"|NextOpenHouseDays";r.triggerFilterChange("SetIntervalMaxValue",n);i.trak.ui.resultListSearchDetails("NextOpenHouseDays")};if(i.filters.isLocked){i.filters.showLockedMessage(u.parent()).then(e);u.val(n);return}e()})},setupFreeText:function(n){var t=this;this.freeText=new i.filter.FreeText(t.options.preTrakName,n,function(n){t.triggerFilterChange(n.commandName,n.commandArguments)})},setupIncludes:function(){var n=this;this.include=new i.filter.Include(n.options.preTrakName,function(t){n.triggerFilterChange(t.commandName,t.commandArguments)})},setupItemTypes:function(n,t){var r=this;this.itemTypes=new i.filter.ItemTypes(r.options.preTrakName,n,function(n){r.triggerFilterChange(n.commandName,n.commandArguments)});t!=undefined&&(this.itemTypes.allItemTypes=t)},setupAreaSelectable:function(){var n=this;this.areaSelectable=new i.filter.AreaSelectable;this.areaSelectable.addListener("areaschanged",function(t){n.triggerFilterChange("SetSituationSelectableArea",JSON.stringify(t))});this.areaSelectable.addListener("radiuschanged",function(t){n.triggerFilterChange("SetSituationRadius",t)});this.areaSelectable.addListener("citychanged",function(t){n.triggerFilterChange("SetSituationCity",t)});this.areaSelectable.addListener("postaladdresschanged",function(t){n.triggerFilterChange("SetSituationPostal",t)});this.addListener("updatesituationend",function(){n.areaSelectable.refreshDropdowns()})},setupPeriodFilter:function(){var n=this,r;t("#period-filter select").on("focus",function(){r=t(this).val()}).on("change",function(){var u=t(this),e=u.val(),f=function(){u.val(e);var i=n.getPeriod();t(".change-date-wrap").toggle(i.changeType!=="0");n.trigger("bs_filter_period_onchange",i)};i.filters.isLocked?(i.filters.showLockedMessage(u.parent()).then(f),u.val(r)):f()});t(".change-date-wrap").toggle(t("#change-type").val()!=="0")},getPeriod:function(){return{changeDate:t("#change-date").val(),changeType:t("#change-type").val()}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filters=i.filters||{};i.filters.Foreclosure=i.Filters.extend({init:function(n,t){this._super(n,t)},setCount:function(n){this.count=parseInt(n,10);t(".foreclosure-slot").bsSlot(this.count,{visibleNumbers:7,color:"blue"})},updateCount:function(n){this.count=parseInt(n,10);t(".foreclosure-slot").bsSlot("update",this.count)},setupItemTypes:function(n,t){var r=this;this.itemTypes=new i.filter.ItemTypes(r.options.preTrakName,n,function(n){r.triggerFilterChange(n.commandName,n.commandArguments)});t!=undefined&&(this.itemTypes.allItemTypes=t)},setupAreaSelectable:function(){var n=this;this.areaSelectable=new i.filter.AreaSelectable;this.areaSelectable.addListener("areaschanged",function(t){n.triggerFilterChange("SetSituationSelectableArea",JSON.stringify(t))});this.areaSelectable.addListener("radiuschanged",function(t){n.triggerFilterChange("SetSituationRadius",t)});this.areaSelectable.addListener("citychanged",function(t){n.triggerFilterChange("SetSituationCity",t)});this.areaSelectable.addListener("postaladdresschanged",function(t){n.triggerFilterChange("SetSituationPostal",t)});this.addListener("updatesituationend",function(){n.areaSelectable.refreshDropdowns()})},setupPeriodFilter:function(){var n=this,r;t("#period-filter select").on("focus",function(){r=t(this).val()}).on("change",function(){var u=t(this),e=u.val(),f=function(){u.val(e);var i=n.getPeriod();t(".change-date-wrap").toggle(i.changeType!=="0");n.trigger("bs_filter_period_onchange",i)};i.filters.isLocked?(i.filters.showLockedMessage(u.parent()).then(f),u.val(r)):f()});t(".change-date-wrap").toggle(t("#change-type").val()!=="0")},getPeriod:function(){return{changeDate:t("#change-date").val(),changeType:t("#change-type").val()}},setupAuctionDates:function(){var n=this,r;t("#ForeclosureAuctionDays select").on("focus",function(){r=t(this).val()}).on("change",function(){i.filters.isLocked?i.filters.showLockedMessage(t(this).parent()).then(function(){n.trigger("bs_filter_onchange",{})}):n.trigger("bs_filter_onchange",{})})},getForeclosureAuctionDays:function(){var n=t("#ForeclosureAuctionDays select").val();return n==="-1"?null:n},getForeclosureSearchCriteria:function(){return{ForeclosureAuctionDays:this.getForeclosureAuctionDays()}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.filters=i.filters||{};i.filters.Rental=i.Filters.extend({init:function(n,t){this._super(n,t)},setCount:function(n){this.count=parseInt(n,10);t(".rental-slot").bsSlot(this.count,{visibleNumbers:7,color:"orange"})},updateCount:function(n){this.count=parseInt(n,10);t(".rental-slot").bsSlot("update",this.count)},setupItemTypes:function(){},setupAreaSelectable:function(){var n=this;this.areaSelectable=new i.filter.AreaSelectable;this.areaSelectable.addListener("areaschanged",function(t){n.triggerFilterChange("SetSituationSelectableArea",JSON.stringify(t))});this.areaSelectable.addListener("radiuschanged",function(t){n.triggerFilterChange("SetSituationRadius",t)});this.areaSelectable.addListener("citychanged",function(t){n.triggerFilterChange("SetSituationCity",t)});this.areaSelectable.addListener("postaladdresschanged",function(t){n.triggerFilterChange("SetSituationPostal",t)});this.addListener("updatesituationend",function(){n.areaSelectable.refreshDropdowns()})},getPeriod:function(){return{changeDate:t("#change-date").val(),changeType:t("#change-type").val()}},setupRentalSelects:function(){var r=this,n;t("#RentalDaysLeft, #pets-allowed, #purchase-allowed").find("select").on("focus",function(){n=t(this).val()}).on("change",function(){var u=t(this),e=u.val(),f=function(){u.val(e);r.trigger("bs_filter_onchange",{})};i.filters.isLocked?(i.filters.showLockedMessage(u.parent()).then(f),u.val(n)):f()})},getRentalDaysLeft:function(){var n=t("#RentalDaysLeft select").val();return n==="-1"?null:(n=n.split("|"),{Min:n[0],Max:n[1]})},getRentalSearchCriteria:function(){var n=t("#pets-allowed").find("select").val(),i=t("#purchase-allowed").find("select").val();return{MonthlyRent:this.sliders.getSliderValues("MonthlyRent"),Deposit:this.sliders.getSliderValues("Deposit"),RentalDaysLeft:this.getRentalDaysLeft(),PetsAllowed:n=="null"?null:n,PurchaseAllowed:i==="null"?null:i}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.PropertyReportForm=i.EventClass.extend({init:function(){this.attachListeners();this.setupComboBoxes()},attachListeners:function(){var n=this;t("#show-report").on("click",function(){i.trak.ui.propertyReport("Click","Vis rapport");n.showReport()})},setupComboBoxes:function(){var n=this;this.comboBoxes={postal:i.comboBox("postal",{select:function(){n.comboBoxes.postal.message("");n.populateDropdownStreet(null,function(){n.comboBoxes.street.focus();n.populateDropdownHouseNumber(null,function(){})})}}),street:i.comboBox("street",{select:function(){n.comboBoxes.street.message("");n.populateDropdownHouseNumber(null,function(){n.comboBoxes.houseNumber.focus()})}}),houseNumber:i.comboBox("housenumber",{select:function(){n.comboBoxes.houseNumber.message("")}})}},clearValidationMessages:function(){t(".validation-message").html("")},showReport:function(){if(this.checkForm()){var n=this.comboBoxes.houseNumber.val();this.comboBoxes.postal.val("",!0);document.location.href=i.url("~/boligrapport/")+n}},checkForm:function(){var n=!0;return(this.comboBoxes.postal.val()===""||this.comboBoxes.postal.val()==null)&&(this.comboBoxes.postal.message("Vælg postnummer"),n=!1),(this.comboBoxes.street.val()===""||this.comboBoxes.street.val()==null)&&(this.comboBoxes.street.message("Vælg vejnavn"),n=!1),(this.comboBoxes.houseNumber.val()===""||this.comboBoxes.houseNumber.val()==null)&&(this.comboBoxes.houseNumber.message("Vælg husnummer"),n=!1),n},populateDropdownStreet:function(n,r){var u=this,f=u.comboBoxes.postal.val();t.getJSON(i.url("~/address/getstreets"),{postalId:f,selectedId:n},function(n){i.json.checkResultErrors(n)&&(t(".nostreetmessage").toggle(f!==""&&n.Data.length===1&&n.Data[0].Value===""),u.comboBoxes.street.populateAndToggle(n.Data),typeof r=="function"&&r.call())})},populateDropdownHouseNumber:function(n,r){var u=this,f=u.comboBoxes.postal.val(),e=u.comboBoxes.street.val();t.getJSON(i.url("~/address/gethousenumbers"),{postalId:f,street:e,selectedId:n},function(n){i.json.checkResultErrors(n)&&(t(".nohousenumbersmessage").toggle(f!==""&&e!==""&&n.Data.length===1&&n.Data[0].Value===""),u.comboBoxes.houseNumber.populateAndToggle(n.Data),typeof r=="function"&&r.call())})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.Home=i.EventClass.extend({init:function(r){this.options=t.extend({count:0},r);this.search=new i.search.Property;this.advancedSearch=new i.search.Advanced(this.search.itemTypes);this.favoriteBox=new i.FavoriteBox({promotionTrakLabel:"Forsiden Huskeliste"});t(".slot").bsSlot(this.options.count,{size:"large"});this.attachListeners();n.location.href.indexOf("avanceret")>-1&&(n.location.href.indexOf("freetext")>-1&&this.advancedSearch.addListener("dialog_shown",function(){location.hash="freetext-filter"}),n.setTimeout(function(){t("#advanced-search-button").trigger("click")},200));i.get("~/version2/home/clearState");this.setupPromotion()},attachListeners:function(){var n=this;t("#teaser-wrap").on("click","#show-more-searches",function(){return n.updateTable(!0),!1}).on("click","#show-less-searches",function(){return n.updateTable(!1),!1}).on("click",".bell",function(){n.setMailAgent(this)}).on("click",".star",function(){n.pinSearch(this)})},pinSearch:function(n){i.services.searches.closeDialogs();var u=this,f=t(n),r=f.parent().parent().data("model");r.Starred?i.services.searches.getPinSearchDialog(f,r.HasMailAgent,function(){u.updateSearch("pinSearch",{id:r.SearchId,sortOrder:0});i.trak.ui.starMarking("FrontpageRemove")}):(u.updateSearch("pinSearch",{id:r.SearchId,sortOrder:1}),i.trak.ui.starMarking("FrontpageCreate"))},setMailAgent:function(n){i.services.searches.closeDialogs();var u=this,f=t(n),r=f.parent().parent().data("model");r.HasMailAgent?i.services.searches.getSetMailAgentDialog(f,function(){u.updateSearch("setMailAgent",{id:r.SearchId,active:!1})}):u.updateSearch("setMailAgent",{id:r.SearchId,active:!0})},updateSearch:function(n,r){var u=this;t("#teaser-wrap table").bsElementSpinner({top:0});i.services.searches.closeDialogs();i.services.searches.update({controller:"searches",action:n,trakLabel:"HomePage",parameters:r,okCallback:function(){u.updateTable()},errorCallback:function(){i.dialog.error("Der er sket en fejl. Genindlæs venligst siden")},doneCallback:function(){t("#teaser-wrap table").bsElementSpinner("remove")}})},updateTable:function(n){t("#teaser-wrap table").bsElementSpinner({top:0});n=n!=undefined?n:t("#show-more-searches").length>0?!1:!0;t("#teaser-wrap").load(i.url("~/version2/home/PropertySearchTeaserExtended"),{showMax:n})},setupPromotion:function(){var n=t(".promotion-searchteaser");n.is(":visible")&&i.trak.ui.promotionTip("Impression","bs.sitename bs.pagename Mobil Vist");t(".promotion-searchteaser").on("click",".login-user",function(){i.trak.ui.promotionTip("Click","bs.sitename bs.pagename Mobil Login");i.services.searches.getLoginDialog()}).on("click",".create-user",function(){i.trak.ui.promotionTip("Click","bs.sitename bs.pagename Mobil Opret bruger")})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.PropertyResult=i.EventClass.extend({init:function(n){this.options=t.extend({isLocked:!1,count:null,parameters:null,itemTypes:null,freetext:{},preTrakName:"resultList",showSearchBarItemTypesSpinner:i.utils.browser.isMobileBrowser()},n);this.list=null;this.filters=null;this.searchBar=null;this.setupSearchBar();this.setupList();this.setupFilters();this.setupFavoriteBox();this.setupChartDemand();this.updateIncludesCounts()},setupList:function(){var r=this;this.list=new i.list.Property({preTrakName:this.options.preTrakName,count:this.options.count});this.list.addListener("bs_list_onchange",function(u){if(u.change==="displaytab"&&u.parameters.displayTab==="MapTab"){r.saveResultDisplayState(function(){n.location.href=i.url("~/kort/"+r.options.parameters.ResultId)});return}r.updateList(u.parameters);u.change==="displaytab"&&(r.saveResultDisplayState(),u.parameters.displayTab==="GalleryTab"?t("#property-result").addClass("gallery"):t("#property-result").removeClass("gallery"))});t("#list").on("click",".displaytab .btn",function(){return!1})},setupFilters:function(){var n=this;this.filters=new i.filters.Property(this.options.count,{isLocked:this.options.isLocked,preTrakName:this.options.preTrakName});this.filters.setupIncludes();this.filters.setupSlider();this.filters.setupAreaSelectable();this.filters.setupItemTypes(this.options.itemTypes);this.filters.setupPeriodFilter();this.filters.setupOpenHouse();this.filters.setupFreeText(this.options.freetext);this.filters.addListener("bs_filter_onchange",function(t){n.updateSearch(t)});this.filters.itemTypes.addListener("on_quicksearch_select",function(t){n.updateSituationQuickSearch(t.term,t.itemTypes,t.completionType)});this.filters.addListener("bs_filter_period_onchange",function(t){n.updateSearch(t)})},setupSearchBar:function(){this.searchbar=new i.search.Property},setupFavoriteBox:function(){this.favoriteBox=new i.FavoriteBox({promotionTrakLabel:"Resultatliste Huskeliste"});this.favoriteBox.addListener("favoritemark_click",function(n){t("#cb_"+n.id).prop("checked",!1)})},setupChartDemand:function(){var n=new i.ChartDemand},getParameters:function(n){return t.extend({resultId:this.options.parameters.ResultId},this.filters.getPeriod(),this.list.getParameters(),n)},saveResultDisplayState:function(n){i.post("~/version2/propertyresult/saveresultdisplaystate/",this.getParameters(),n)},updateSituationQuickSearch:function(n,i,r){var u=this,f=[n,i,r].join("***");return this.updateSearch({commandName:"SetSituationQuickSearch",commandArguments:f},function(n){t(".situation-address").text(n.SituationAddress);u.filters.areaSelectable.setFilterAreaViewResult(n.FilterAreaViewResult)},function(){u.list.showSpinner();u.getSuggestionsForList(n,i,function(n){u.list.updateListView(n)})}),!0},getSuggestionsForList:function(n,t,r){i.get("~/version2/suggestion/NoResultSuggestionsAjax",{query:n,itemTypes:t},function(n){r.call(this,n)})},updateIncludesCounts:function(){var n=this;n.xhrDoUpdateForeclosure!=undefined&&n.xhrDoUpdateForeclosure.abort();n.xhrDoUpdateRental!=undefined&&n.xhrDoUpdateRental.abort();n.filters.include.getIsForeclosureChecked()?n.xhrDoUpdateForeclosure=i.getJSON("~/version2/foreclosureresult/getcount",{id:n.options.parameters.ResultId},function(t){i.json.checkResultErrors(t)&&(n.filters.include.updateForeclosureCount(t.Count),n.list.updateForeclosureCount(t.Count))}):n.filters.include.updateForeclosureCount(null);n.filters.include.getIsRentalChecked()?n.xhrDoUpdateRental=i.getJSON("~/rentalresult/getcount",{id:n.options.parameters.ResultId},function(t){i.json.checkResultErrors(t)&&(n.filters.include.updateRentalCount(t.Count),n.list.updateRentalCount(t.Count))}):n.filters.include.updateRentalCount(null)},updateList:function(n){var r=this,u=t.extend({resultId:this.options.parameters.ResultId},this.filters.getPeriod(),n);r.xhrUpdateList!=undefined&&r.xhrUpdateList.abort();r.list.showSpinner();r.xhrUpdateList=i.getJSON("~/version2/propertyresult/updatelist",u,function(n){r.list.updateListView(n.ViewResult);r.list.hideSpinner()})},updateSearch:function(n,t,r){var u=this,f=this.getParameters(n);f.pageNumber=1;u.xhrUpdateSearch!=undefined&&u.xhrUpdateSearch.abort();u.list.showSpinner();u.xhrUpdateSearch=i.getJSON("~/version2/propertyresult/updatelist",f,function(n){i.json.checkResultErrors(n)?(u.list.updateListView(n.ViewResult),u.filters.updateCount(n.Count),u.list.updatePropertyCount(n.Count),u.list.hideSpinner(),typeof t=="function"&&t.call(this,n)):(u.list.hideSpinner(),typeof r=="function"&&r.call(this,n));u.updateIncludesCounts()})},sendToAdform:function(t){function i(n){try{adf.addProduct({productid:n,productname:n,categoryid:"Boliger",categoryname:"Boliger",weight:"1",step:adf.Steps.Purchase});adf.track(46226,466752)}catch(t){}}t.length>0&&typeof adf!="undefined"&&t.forEach(function(t){n.setTimeout(function(){i(t)},2)})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.PropertyResultMap=i.EventClass.extend({init:function(n){this.bsMap=null;this.filters=null;this.search=null;this.controller="propertyresult";this.options=t.extend({isUserLoggedOn:!1,isLocked:!1,count:0,controller:"version2/propertyresult",didHaveId:!1,includeForeclosures:!1,includeRentals:!1,itemTypes:null,freetext:{},mapResult:null,parameters:null,polygonMapPoints:null,referrerUrl:null,preTrakName:"map",useUserLocationOnMarker:!0,showSearchBarItemTypesSpinner:i.utils.browser.isMobileBrowser(),mapPosition:this.loadMapStateAndGetMapPosition(n.parameters.ResultId),markerOptions:{popupId:"map-property-popup",controller:"version2/propertyresult",pinType:i.maps.pin.type.RED,userLocation:null}},n);this.setupSearchBar();this.setupFilters();this.setupMap();this.attachListeners();this.options.useUserLocationOnMarker&&(this.options.markerOptions.userLocation=new i.maps.tool.UserLocation(this.bsMap.map));this.options.didHaveId?(this.setupMapResult(this.options.polygonMapPoints),this.mapType="result"):(this.setupMapSearch(),this.mapType="search",i.login.referrer=this.options.referrerUrl);this.setupViewTypeChange()},setupMap:function(){var t={preTrakId:"Default",mapDivId:"full-map",mapResult:this.options.mapResult,favorites:this.options.isUserLoggedOn,filterControl:!0,searchControl:!0,toolControl:!0,toolControlOptions:{layersOptions:{dialogPosition:{my:"left+8 top+15",at:"left bottom",of:"#search-result"}}}},n=i.utils.location.getParameter("heatmap");n!=null&&(t.toolControlOptions.layersOptions.heatmap1={checked:n==="1"},t.toolControlOptions.layersOptions.heatmap9={checked:n==="9"},t.toolControlOptions.layersOptions.heatmap10={checked:n==="10"});this.bsMap=new i.maps.Map(t);n!=null&&this.bsMap.toolControl.activateToolById("layers")},setupSearchBar:function(){this.searchBar=new i.search.Property({isMap:!0})},setupFilters:function(){this.filters=new i.filters.Property(this.options.count,{isLocked:this.options.isLocked,preTrakName:this.options.preTrakName});this.filters.setupIncludes();this.filters.setupSlider();this.filters.setupAreaSelectable();this.filters.setupItemTypes(this.options.itemTypes);this.filters.setupPeriodFilter();this.filters.setupFreeText(this.options.freetext);this.filters.setupOpenHouse()},setupMapResult:function(n){var t=this;this.allowDrawMarkers=!0;n!==null&&this.bsMap.addPolygon(this.bsMap.drawPolygon(n));google.maps.event.addListenerOnce(this.bsMap.map,"idle",function(){t.draw();t.options.includeForeclosures&&t.viewTypeForeclosureActivate();t.options.includeRentals&&t.viewTypeRentalActivate();t.updateToManyText()})},setupMapSearch:function(){var n=i.cookie.userSettingsSaved.mapToolId.get();n==null&&(n=i.maps.tool.toolId.ZOOM);this.bsMap.searchControl.activateTool(n);this.updateToManyText(n)},attachListeners:function(){var r=this;t(".displaytab .btn").on("click",function(){var u=t.extend(r.options.parameters,{DisplayTab:t(this).data("tab")}),f=r.filters.getPeriod();return f.changeDate!=="0"&&(u=t.extend(u,{ChangeDate:f.changeDate,ChangeType:f.changeType})),i.post("~/version2/propertyresult/saveresultdisplaystate/",u,function(){u.DisplayTab!=="MapTab"&&(n.location.href=i.url("~/resultat/"+u.ResultId))}),!1});r.filters.include.addListener("includechanged",function(n){switch(n.commandName){case"AddForeclosure":r.viewTypeForeclosureActivate();break;case"RemoveForeclosure":r.viewTypeForeclosureDectivate();break;case"AddRental":r.viewTypeRentalActivate();break;case"RemoveRental":r.viewTypeRentalDectivate()}});this.filters.itemTypes.addListener("on_quicksearch_select",function(n){r.updateSituationQuickSearch(n.term,n.itemTypes,n.completionType)});this.filters.addListener("bs_filter_onchange",function(n){r.updateSearch(n)});this.filters.addListener("bs_filter_period_onchange",function(n){r.options.parameters.ChangeDate=n.changeDate;r.options.parameters.ChangeType=n.changeType;r.updateSearch()});this.filters.areaSelectable.addListener("arearemoved",function(n){switch(r.bsMap.searchControl.activeToolId){case i.maps.tool.toolId.CLICKABLE:r.bsMap.searchControl.tools.clickable.instance.selectArea(n.Type,n.Number)}});google.maps.event.addListener(this.bsMap.map,"bs_searchcontrol_toolchange",function(n){r.searchControlToolChange(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_zoom_boundschanged",function(n){r.handleZoomBoundsChanged(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_lasso_complete",function(n){r.handlePolygonComplete(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_lasso_reset",function(){r.bsMap.clearMarkers()});google.maps.event.addListener(this.bsMap.map,"bs_tool_polygon_complete",function(n){r.handlePolygonComplete(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_polygon_reset",function(){r.bsMap.clearMarkers()});google.maps.event.addListener(this.bsMap.map,"bs_tool_clickable_areaselected",function(n){r.handleAreaSelected(n)});google.maps.event.addListener(this.bsMap.map,"bounds_changed",function(){r.saveMapState()});google.maps.event.addListener(this.bsMap.map,"maptypeid_changed",function(){r.saveMapState()});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_viewtype_changed",function(n){r.viewtypeChange(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_dialog_close",function(){r.viewtypeChange({type:""})});t(".set-mail-agent").on("click",function(){return r.handleSetMailAgentClick(this),!1})},handlePolygonComplete:function(n){this.filters.areaSelectable.printPolygon();this.allowDrawMarkers=!0;this.updateSearch({commandName:"SetSituationPolygon",commandArguments:i.maps.utils.polygonToString(n.polygon)})},handleZoomBoundsChanged:function(n){this.filters.areaSelectable.printDynamic();var t={Center:{Lat:n.center.lat(),Lng:n.center.lng()},Bounds:{Sw:{Lat:n.bounds.getSouthWest().lat(),Lng:n.bounds.getSouthWest().lng()},Ne:{Lat:n.bounds.getNorthEast().lat(),Lng:n.bounds.getNorthEast().lng()}}};this.updateSearch({commandName:"SetSituationDynamic",commandArguments:JSON.stringify(t)})},handleAreaSelected:function(n){var u=this,r,f,e;this.bsMap.clearMarkers();n.length==0&&this.filters.areaSelectable.printAreaDenmark();(n.length==1||n.length>0&&n[0].Type!==i.maps.tool.clickable.type.POSTAL)&&this.filters.areaSelectable.removePrint();r=t.extend(!0,[],n);t(".filters-body .area-selectable .area-item").each(function(){for(var e,h=t(this),n=h.data("area"),o=n!=null?n.Type:null,s=n!=null?n.Number:null,f=-1,i=0;i<r.length;i++)if(e=r[i],e.Type==o&&e.Number==s){f=i;break}f>=0?r.splice(f,1):u.filters.areaSelectable.removeAreaPrint(o,s)});t.each(r,function(n,t){u.filters.areaSelectable.printArea(t)});f="SetSituationClickable";e=JSON.stringify(n);this.allowDrawMarkers=n.length>0&&n[0].Type===i.maps.tool.clickable.type.POSTAL;this.updateSearch({commandName:f,commandArguments:e})},handleSetMailAgentClick:function(n){var e=this;i.services.searches.closeDialogs();var u=t(n),r=u.data("model"),f=function(n){i.services.searches.closeDialogs();i.services.searches.update({controller:"searches",action:"setMailAgent",trakLabel:"ResultMapTab",parameters:{id:r.ResultId,active:n},okCallback:function(){r.HasMailAgent=!r.HasMailAgent;u.data("model",r);u.find(".text").text(u.data(r.HasMailAgent?"active-text":"inactive-text"))},errorCallback:function(){i.dialog.error("Genindlæs venligst siden")}})};r.HasMailAgent?i.services.searches.getSetMailAgentDialog(u,function(){f(!1)}):(i.filters.lock(),f(!0))},searchControlToolChange:function(n){var u=this,r;i.cookie.userSettingsSaved.mapToolId.set(n);this.bsMap.clearMarkers();this.bsMap.clearPolygons();this.allowDrawMarkers=!1;this.removeZoomChangedListener();n===i.maps.tool.toolId.CLICKABLE?(r=t(".area-selectable .area-item"),google.maps.event.addListenerOnce(this.bsMap.map,"bs_tool_clickable_drawpolygonsend",function(){var n=[];r.each(function(){var i=t(this).data("area"),r,u;i!=null&&(r=i.Type,u=i.Number,r!=undefined&&u!=undefined&&n.push({type:r,number:u}))});n.length>0&&u.bsMap.searchControl.tools.clickable.instance.selectAreas(n)})):n==null&&(this.allowDrawMarkers=!0,this.draw())},draw:function(){function r(){if(n.xhrGetPoints!=null&&n.xhrGetPoints.abort(),n.allowDrawMarkers){n.lastZoomLevel=n.bsMap.map.getZoom();var r=n.getGetPointsParameters();n.xhrGetPoints=i.getJSON("~/"+n.options.controller+"/GetPoints",i.utils.serializeParams(r),function(u){var e,f,o,s;if(n.bsMap.clearMarkers(),i.json.checkResultErrors(u))for(e=0;f=u.Points[e];e++)o=t.extend({infoPointX:f.X,infoPointY:f.Y},r),s=new i.maps.Marker(n.bsMap.map,t.extend(n.options.markerOptions,{parameters:o,mapPoint:f})),n.bsMap.addMarker(s)}).error(function(){})}}var n=this;this.bsMap.searchControl.activeToolId==i.maps.tool.toolId.ZOOM?this.options.count<=3e3?(this.allowDrawMarkers=!0,r()):this.bsMap.clearMarkers():(this.zoomChangedListener==null&&(this.zoomChangedListener=google.maps.event.addListener(this.bsMap.map,"zoom_changed",function(){n.lastZoomLevel!=this.getZoom()&&(n.bsMap.clearMarkers(),n.zoomChangedIdleListener&&google.maps.event.removeListener(n.zoomChangedIdleListener),n.zoomChangedIdleListener=google.maps.event.addListenerOnce(n.bsMap.map,"idle",function(){r()}))})),r())},getParameters:function(n){return n!=undefined?t.extend(this.options.parameters,{CommandName:n.commandName,CommandArguments:n.commandArguments}):this.options.parameters},updateSearch:function(t,r,u){var f=this,e=this.getParameters(t);e.PageNumber=1;n.clearTimeout(f.timeout);f.xhrUpdateSearch!=undefined&&f.xhrUpdateSearch.abort();f.timeout=n.setTimeout(function(){f.xhrUpdateSearch=i.postJSON("~/version2/"+f.controller+"/updatemap",e,function(n){i.json.checkResultErrors(n)?(f.options.count=n.Count,f.filters.updateCount(n.Count),f.options.parameters=n.Parameters,f.draw(),f.updateToManyText(),f.updateViewTypeMarkers(),typeof r=="function"&&r.call(this,n)):typeof u=="function"&&u.call(this,n)})},100)},updateSituationQuickSearch:function(n,r,u){var f=this,e=[n,r,u].join("***");return this.updateSearch({commandName:"SetSituationQuickSearch",commandArguments:e},function(n){t(".situation-address").text(n.SituationAddress);f.filters.areaSelectable.setFilterAreaViewResult(n.FilterAreaViewResult);i.getJSON("~/version2/"+f.controller+"/GetResultCenterAndBounds",f.options.parameters,function(n){if(n.Status=="Ok"){var t=new google.maps.LatLng(n.Zoom.Bounds.Sw.Lat,n.Zoom.Bounds.Sw.Lng),i=new google.maps.LatLng(n.Zoom.Bounds.Ne.Lat,n.Zoom.Bounds.Ne.Lng),r=new google.maps.LatLngBounds(t,i);f.bsMap.map.fitBounds(r)}})},function(){f.getSuggestionsAsModal(n,r)}),!0},getSuggestionsAsModal:function(n,r){t.get(i.url("~/suggestion/NoResultSuggestionsAjax"),{query:n,itemTypes:r,modal:!0},function(n){i.dialog.normal(n,{minWidth:600})})},getGetPointsParameters:function(){return this.bsMap.getMapParameters({resultId:this.options.parameters.ResultId,displayState:this.options.parameters.DisplayState,number:1})},saveMapState:function(){var n={resultId:this.options.parameters.ResultId,zoom:this.bsMap.map.getZoom(),lat:this.bsMap.map.getCenter().lat(),lng:this.bsMap.map.getCenter().lng(),mapTypeId:this.bsMap.map.getMapTypeId()};i.sessionStorage.setItem("bs-map-state",n)},loadMapStateAndGetMapPosition:function(n){var t=i.sessionStorage.getItem("bs-map-state");return t!=undefined&&t.resultId===n&&t.lat!=undefined&&t.lng!=undefined&&t.zoom!=undefined?t:null},removeZoomChangedListener:function(){this.zoomChangedListener!=null&&(google.maps.event.removeListener(this.zoomChangedListener),delete this.zoomChangedListener)},updateToManyText:function(n){var r="Vi kan maksimalt vise 3000 boliger af gangen. Tilpas evt. din søgning.";n==undefined&&(n=this.bsMap.searchControl.activeToolId);switch(n){case i.maps.tool.toolId.ZOOM:r="Vi kan maksimalt vise 3000 boliger af gangen. Tilpas evt. din søgning eller zoom yderligere ind.";break;case i.maps.tool.toolId.CLICKABLE:r="Vi kan maksimalt vise 3000 boliger af gangen. Tilpas evt. din søgning eller fravælg et eller flere områder";break;case i.maps.tool.toolId.LASSO:case i.maps.tool.toolId.POLYGON:r="Vi kan maksimalt vise 3000 boliger af gangen. Tilpas evt. din søgning eller tegn en mindre polygon."}this.options.count>3e3?(t(".map-controls .to-many-text").length===0&&t(t(".map-controls")[0]).append('<div class="to-many-text box sticky"><\/div>'),t(".to-many-text").text(r).show()):t(".to-many-text").hide()},updateViewTypeMarkers:function(){this.viewSelector!=null&&this.viewSelector.showMarkers();this.viewSelectorForeclosure!=null&&this.viewSelectorForeclosure.showMarkers();this.viewSelectorRental!=null&&this.viewSelectorRental.showMarkers()},viewTypeForeclosureActivate:function(){this.viewSelectorForeclosure!=null&&this.viewSelectorForeclosure.enable().showMarkers()},viewTypeForeclosureDectivate:function(){this.viewSelectorForeclosure!=null&&(this.filters.include.updateForeclosureCount(null),this.viewSelectorForeclosure.disable())},viewTypeRentalActivate:function(){this.viewSelectorRental!=null&&this.viewSelectorRental.enable().showMarkers()},viewTypeRentalDectivate:function(){this.viewSelectorRental!=null&&(this.filters.include.updateRentalCount(null),this.viewSelectorRental.disable())},setupViewTypeChange:function(){var n=this;this.viewSelectorRental=new i.maps.ViewSelector2({map:this.bsMap.map,getPointsParameters:{resultId:this.options.parameters.ResultId},controller:"MapViewSelector",action:"GetPointsRental",markerOptions:{popupId:"map-rental-popup",controller:"version2/RentalResult",action:"GetMapPointPopup",pinType:i.maps.pin.type.ORANGE}});this.viewSelectorRental.addListener("showmarkers_end",function(t){n.filters.include.updateRentalCount(t)});this.viewSelectorForeclosure=new i.maps.ViewSelector2({map:this.bsMap.map,getPointsParameters:{resultId:this.options.parameters.ResultId},controller:"MapViewSelector",action:"GetPointsForeclosure",markerOptions:{popupId:"map-foreclosure-popup",controller:"version2/ForeclosureResult",action:"GetMapPointPopup",pinType:i.maps.pin.type.BLUE}});this.viewSelectorForeclosure.addListener("showmarkers_end",function(t){n.filters.include.updateForeclosureCount(t)});this.viewSelector=new i.maps.ViewSelector2({map:this.bsMap.map,getPointsParameters:{resultId:this.options.parameters.ResultId,year:null},controller:"MapViewSelector",markerOptions:{controller:"version2/MapViewSelector"}});this.viewSelector.addListener("showmarkers_begin",function(){n.bsMap.viewControl.tools.viewselector.instance!=null&&n.bsMap.viewControl.tools.viewselector.instance.addAjaxWheel()});this.viewSelector.addListener("showmarkers_end",function(t){n.bsMap.viewControl.tools.viewselector.instance!=null&&(n.bsMap.viewControl.tools.viewselector.instance.setCount(t),n.bsMap.viewControl.tools.viewselector.instance.removeAjaxWheel())})},viewtypeChange:function(n){if(n==null||n.type===""){this.viewSelector.disable();return}var t={year:n.year};switch(n.type){case i.maps.tool.viewSelector.type.ARCHIVE:this.viewSelector.setOptions({getPointsParameters:t,action:"getpointsarchive",markerOptions:{popupId:"map-archive-popup",action:"GetMapPointPopupArchive",pinType:i.maps.pin.type.GREY,userLocation:null}}).enable().showMarkers();break;case i.maps.tool.viewSelector.type.SOLD:this.viewSelector.setOptions({getPointsParameters:t,action:"getpointssold",markerOptions:{popupId:"map-sold-popup",action:"GetMapPointPopupSold",pinType:i.maps.pin.type.BLACK,userLocation:null}}).enable().showMarkers()}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.PropertyPresentation=i.EventClass.extend({init:function(n){this.options=n;this.setupListeners();this.updateCompareCount();this.options.IsThirdPartiesDeactivated||this.setupThirdParties(this.options.ThirdPartyOptions)},setupListeners:function(){var r=this;t("a.propertyImage").on("click",function(){i.trak.el.exitLink(r.options.LinkDomain,"p","is");n.open(i.url(r.options.RedirectLink))});t("div.agent-link").on("click",function(){i.trak.el.exitLink(r.options.LinkDomain,"p","ts");n.open(i.url(r.options.RedirectLink))});t(".picture-link").on("click",function(){i.trak.el.exitLink(r.options.LinkDomain,"p","tf")});t(".video-link").on("click",function(){i.trak.el.exitLink(r.options.LinkDomain,"p","video")});t(".seo-links a").on("click",function(){i.trak.ui.presentationPage("Click",t(this).data("trakLabel"))});t(".agent-snippet .foot a").on("click",function(){i.trak.ui.presentationPage("Click","MoreInfoAgent")});t(".salesperiod-info .foot a").on("click",function(){i.trak.ui.presentationPage("Click","DaysOnBoligsiden")});t(".areapayment-info .foot a").on("click",function(){i.trak.ui.presentationPage("Click","MoreInfoM2Price")});t(".bbr-info-small .foot a").on("click",function(){i.trak.ui.presentationPage("Click","MoreInfoBBR")});t("#chart-demand .foot a").on("click",function(){i.trak.ui.presentationPage("Click","MoreInfoPopIndex")});t(".slot").bsSlot(t("input[id^='chkCompare']").filter(":checked").length,{useLarge:!0});t("input[id^='chkCompare']").change(function(){r.updateCompareCount()});t("#btnCompare").on("click",function(){i.trak.ui.presentationPage("Click","Comparison");var r=t("input[id^='chkCompare']:checked").map(function(){return t(this).data("uniqueNumber")}).get();r.length<2||r.length>5?i.dialog.normal("<div id='comparedialog' title='Sammenlign boliger'><p>Du skal vælge mellem 2 og 5 boliger til sammenligning.<\/p><\/div>"):n.location=i.url("~/sammenlign/")+r.join("+")+"/"});t(".remem input").on("click",function(){var r=t(this).parent().data("propertyId"),u=t(this).is(":checked"),n=!1;return u?(n=i.favorite.add(r),i.trak.ui.favoriteMark(!0,"PresentationPage")):(n=i.favorite.remove(r),i.trak.ui.favoriteMark(!1,"PresentationPage")),n});t(".showExtendedPrices").on("click",function(){return t(".pricesExtended").toggle(),t(this).toggleClass("up down"),t(this).html((t(this).hasClass("up")?"Færre":"Flere")+" informationer"),i.trak.ui.presentationPage("Click","MoreInfoPrice"),!1});t(".show-extended-previussales").on("click",function(){var n=t(".previus-sales-box");return n.find(".hide").toggle(),n.find(".split").toggleClass("last"),t(this).toggleClass("up down").html("Se "+(t(this).hasClass("up")?"færre":"alle")+" tidligere salgspriser"),i.trak.ui.presentationPage("Click","MoreInfoPreviusSales"),!1});t(".tip-white").tooltip({tooltipClass:"white",track:!0})},setupMap:function(){this.presentationMap=new i.maps.PresentationMapLarge({preTrakId:"presentationPage",mapPosition:this.options.MapPosition,showUserLocations:!0,mapChannel:"bolig_presentationpage"})},updateCompareCount:function(){var n=t("input[id^='chkCompare']"),i=n.filter(":checked").length;t(".slot").bsSlot("update",i);i>=5?n.filter(":not(':checked')").prop("disabled",!0):n.filter(":not(':checked')").prop("disabled",!1)},setupThirdParties:function(n){i.q.afterLoad(function(){i.trak.ui.presentationPageShownByChainName(n.AgentChainName);i.trak.ui.presentationPageType(n.ItemTypeName);n.IsFibiaOnline&&i.trak.ui.fibia("Impression","PresentationPage - "+n.UniqueNumber)});i.q.thirdParties(function(){i.renderAds([{id:"bannerHeader",cu:n.BannerHeaderCu},{id:"bannerRight",cu:n.BannerRightCu},{id:"EAS-fif-sticky-right",cu:"18196"}],n.BannerInfo.Targeting,n.BannerInfo.PageViewId);i.kenne.getFinancing(n.Id)})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.PropertyReportHome=i.EventClass.extend({init:function(){this.attachListeners();this.form=new i.PropertyReportForm;this.search=new i.search.Property},attachListeners:function(){var n=this;t(".previus-report").on("click",function(){i.trak.ui.propertyReport("Click","Tidligere rapport")});t("#reportlist-wrap").on("click","#reportlist-toggle",function(){return n.handleReportListToggleClick(this),!1})},handleReportListToggleClick:function(n){var r=t(n),u=r.find(".a").hasClass("a-w-b-d")?30:3;t.getJSON(i.url("~/version2/propertyreport/getreportlist"),{count:u},function(n){i.json.checkResultErrors(n)&&t("#reportlist-wrap").html(n.Data)})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.PropertyReportReport=i.EventClass.extend({init:function(r){this.options=t.extend({propertyId:null,reportParameters:null,municipalityAndOisNumber:null,controller:"version2/propertyreport",itemTypeNumber:null,mapPosition:null,zoom:15,markerOptions:{popupId:"map-property-popup-small",smallPopup:!0,controller:"version2/propertyreport",pinType:i.maps.pin.type.RED,userLocation:null,appendTo:"#map",containment:"#map"}},r);console.log(r);this.$window=t(n);this.$mapDiv=t("#map");this.timelineLoaded=!1;this.mapandfactsLoaded=!1;this.attachListeners();this.setupCheckboxes();this.setupSliders();this.form=new i.PropertyReportForm;this.search=new i.search.Property},attachListeners:function(){var n=this;t(".list-tab-propertyreport .btn").on("click",function(){n.xhrGetTimeline!=undefined&&n.xhrGetTimeline.abort();var r=t(this),u=r.data("tabId");r.attr("aria-selected")!==!0&&(t(".list-tab-propertyreport .btn").attr("aria-selected","false"),r.attr("aria-selected","true"),t(".page-wrapper").attr("data-page-wrapper-selected",u),u==="timeline"&&n.setupTimeline(),u==="mapandfacts"&&i.maps.loadScript("boligrapport",function(){n.setupMap()}))});t(".box-collapsible .box-header").on("click",function(){var n=t(this).parent();n.hasClass("box-collapsed")?(n.removeClass("box-collapsed"),n.find("> div").not(".box-header").show()):(n.addClass("box-collapsed"),n.find("> div").not(".box-header").hide())});t("#feedback").on("click",function(){i.dialog.message("Feedback","Send ideer og spørgsmål til  <a href='mailto:post@boligsiden.dk'>post@boligsiden.dk<\/a>")})},isInView:function(){var n=this.$mapDiv,t=this.$window,i=t.scrollTop(),u=i+t.height(),r=n.offset().top,f=r+n.height();return f>=i&&r<=u},setupMap:function(){var r=this;if(!this.mapandfactsLoaded){this.mapandfactsLoaded=!0;this.bsMap=new i.maps.Map({preTrakId:"Default",mapDivId:"map",mapPosition:{lat:this.options.mapPosition.LatLng.Lat,lng:this.options.mapPosition.LatLng.Lng,zoom:this.options.zoom},makeMapGray:!0,viewControlOptions:{activateToolId:"viewselector",viewselectorOptions:{checkedType:i.maps.tool.viewSelector.type.SOLD}},onTilesLoaded:function(){r.marker=new google.maps.Marker({position:new google.maps.LatLng(parseFloat(r.options.mapPosition.LatLng.Lat),parseFloat(r.options.mapPosition.LatLng.Lng)),icon:i.maps.pin.getActive({count:1,pinType:i.maps.pin.type.RED}),map:r.bsMap.map,zIndex:9999});r.draw()}});this.setupViewTypeChange();google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_viewtype_changed",function(n){r.viewtypeChange(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_dialog_close",function(){r.viewtypeChange({type:""})});t("#save-search").on("click",function(){var t=r.getSituation();i.getJSON(r.options.controller+"/savesearch",t,function(t){i.json.checkResultErrors(t)?n.location.href=t.Data.Url:alert("Ej, her kan vi ikke viderestille, vi har jo ikke nogen boliger")})})}},setupTimeline:function(){var r=this;r.timelineLoaded||(r.xhrGetTimeline=i.getJSON("~/version2/propertyreport/gettimeline",r.getMunicipalityAndOisNumber(),function(u){if(r.timelineLoaded=!0,i.json.checkResultErrors(u)){t(".timeline-wrap").html(u.Data.View);t(".timeline").timeline();t(".goto-top").on("click",function(){n.scrollTo(0,0)})}}))},getMunicipalityAndOisNumber:function(){return{municipalityAndOisNumber:this.options.municipalityAndOisNumber}},setEstimatedValues:function(){var n=this.getAllParameters();i.postJSON("~/version2/propertyreport/GetPriceEstimate",n,function(n){if(i.json.checkResultErrors(n)){var r=n.Data.Estimate;t("#price-estimate").text(r.Estimate);t("#price-range").css({left:r.RangeLeftInPercent+"%",width:r.RangeWidthInPercent+"%"})}else console.error("Fejl",n)})},setupCheckboxes:function(){var n=this;t("input:checkbox").on("click",function(){var f=t(this).is(":checked"),r=t(this).parent().parent(),e=r.find(".topic").text().trim(),u;f?(r.removeClass("disabled"),i.trak.ui.propertyReport("Check",e)):(r.addClass("disabled"),i.trak.ui.propertyReport("Uncheck",e));u=r.find(".slider");u.length&&u.bsSlider("option","disabled",!f);n.setEstimatedValues()})},setupSliders:function(){var n=this;t(".slider").each(function(){var r=t(this),u=r.data("sliderOptions"),f=r.parents("tr").find(".topic").text().trim();r.bsSlider({disabled:u.disabled,min:0,max:u.steps.length-1,value:u.value,hideGrid:!0,className:"bs-slider-assessment",change:function(){n.setEstimatedValues();i.trak.ui.propertyReportTrakOnce("Interaction",f)}})})},getAllParameters:function(){var n=this;return t(".objective-item").each(function(){var i=t(this);n.options.reportParameters.ObjectiveItems[this.id].Checked=i.prop("checked")}),t(".subjective-item").each(function(){var i=t(this),r=i.parent().parent().find(".slider"),u=r.bsSlider("value");n.options.reportParameters.SubjectiveItems[this.id].Checked=i.prop("checked");n.options.reportParameters.SubjectiveItems[this.id].Value=u}),this.options.reportParameters},draw:function(){function r(){n.xhrGetPoints!=null&&n.xhrGetPoints.abort();n.lastZoomLevel=n.bsMap.map.getZoom();var r=t.extend(n.getSituation(),n.bsMap.getMapParameters());n.xhrGetPoints=i.getJSON(n.options.controller+"/getpoints",i.utils.serializeParams(r),function(u){var e,f,o,s;if(n.bsMap.clearMarkers(),i.json.checkResultErrors(u))for(e=0;f=u.Points[e];e++)o=t.extend({infoPointX:f.X,infoPointY:f.Y},r),s=new i.maps.Marker(n.bsMap.map,t.extend(n.options.markerOptions,{parameters:o,mapPoint:f})),n.bsMap.addMarker(s)}).error(function(){})}var n=this;this.zoomChangedListener==null&&(this.zoomChangedListener=google.maps.event.addListener(this.bsMap.map,"zoom_changed",function(){n.bsMap.clearMarkers();n.zoomChangedIdleListener&&google.maps.event.removeListener(n.zoomChangedIdleListener);n.zoomChangedIdleListener=google.maps.event.addListenerOnce(n.bsMap.map,"idle",function(){r()})}));r()},getSituation:function(){if(this.searchMapParameters==null){var n=this.bsMap.getMapParameters();this.searchMapParameters={maxX:n.maxLng,minX:n.minLng,maxY:n.maxLat,minY:n.minLat,itemTypeNumber:this.options.itemTypeNumber}}return this.searchMapParameters},setupViewTypeChange:function(){var n=this;this.viewSelector=new i.maps.ViewSelector2({map:this.bsMap.map,controller:"version2/propertyreport",markerOptions:{controller:"version2/propertyreport"}});this.viewSelector.addListener("showmarkers_begin",function(){n.bsMap.viewControl.tools.viewselector.instance!=null&&n.bsMap.viewControl.tools.viewselector.instance.addAjaxWheel()});this.viewSelector.addListener("showmarkers_end",function(t){n.bsMap.viewControl.tools.viewselector.instance!=null&&(n.bsMap.viewControl.tools.viewselector.instance.setCount(t),n.bsMap.viewControl.tools.viewselector.instance.removeAjaxWheel())})},viewtypeChange:function(n){if(n==null||n.type===""){this.viewSelector.disable();return}var t=this.getSituation();t.year=n.year;switch(n.type){case i.maps.tool.viewSelector.type.ARCHIVE:this.viewSelector.setOptions({getPointsParameters:t,action:"getpointsarchive",markerOptions:{popupId:"map-archive-popup-small",smallPopup:!0,action:"GetMapPointPopupArchive",pinType:i.maps.pin.type.GREY,userLocation:null,appendTo:"#map",containment:"#map"}}).enable().showMarkers();break;case i.maps.tool.viewSelector.type.SOLD:this.viewSelector.setOptions({getPointsParameters:t,action:"getpointssold",markerOptions:{popupId:"map-sold-popup-small",smallPopup:!0,action:"GetMapPointPopupSold",pinType:i.maps.pin.type.BLACK,userLocation:null,appendTo:"#map",containment:"#map"}}).enable().showMarkers()}}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.ForeclosureResult=i.EventClass.extend({init:function(n){this.options=t.extend({isLocked:!1,count:null,parameters:null,itemTypes:null,preTrakName:"foreclosureResultList",showSearchBarItemTypesSpinner:i.utils.browser.isMobileBrowser()},n);this.list=null;this.filters=null;this.search=null;this.setupSearchBar();this.setupList();this.setupFilters()},setupList:function(){var r=this;this.list=new i.list.Foreclosure({preTrakName:this.options.preTrakName,count:this.options.count});this.list.addListener("bs_list_onchange",function(u){if(u.change==="displaytab"&&u.parameters.displayTab==="MapTab"){r.saveResultDisplayState(function(){n.location.href=i.url("~/kort/auktioner/"+r.options.parameters.ResultId)});return}r.updateList(u.parameters);u.change==="displaytab"&&(r.saveResultDisplayState(),u.parameters.displayTab==="GalleryTab"?t("#foreclosure-result").addClass("gallery"):t("#foreclosure-result").removeClass("gallery"))});t("#list").on("click",".displaytab .btn",function(){return!1})},setupFilters:function(){var n=this;this.filters=new i.filters.Foreclosure(this.options.count,{isLocked:this.options.isLocked,preTrakName:this.options.preTrakName});this.filters.setupSlider({className:"ui-slider-blue"});this.filters.setupAreaSelectable();this.filters.setupItemTypes(this.options.itemTypes);this.filters.setupPeriodFilter();this.filters.setupAuctionDates();this.filters.addListener("bs_filter_onchange",function(t){n.updateSearch(t)});this.filters.addListener("bs_filter_period_onchange",function(t){n.updateSearch(t)})},setupSearchBar:function(){this.searchBar=new i.search.Property},getParameters:function(n){return t.extend({resultId:this.options.parameters.ResultId},this.filters.getPeriod(),this.list.getParameters(),n)},saveResultDisplayState:function(n){i.post("~/version2/foreclosureresult/saveresultdisplaystate/",this.getParameters(),n)},updateSituationQuickSearch:function(n,i,r){var u=this,f=[n,i,r].join("***");return this.updateSearch({commandName:"SetSituationQuickSearch",commandArguments:f},function(n){t(".situation-address").text(n.SituationAddress);u.filters.areaSelectable.setFilterAreaViewResult(n.FilterAreaViewResult)},function(){u.list.showSpinner();u.getSuggestionsForList(n,i,function(n){u.list.updateListView(n)})}),!0},getSuggestionsForList:function(n,t,r){i.get("~/version2/suggestion/NoResultSuggestionsAjax",{query:n,itemTypes:t},function(n){r.call(this,n)})},updateList:function(n){var r=this,u=t.extend({resultId:this.options.parameters.ResultId},this.filters.getPeriod(),n);r.xhrUpdateList!=undefined&&r.xhrUpdateList.abort();r.list.showSpinner();r.xhrUpdateList=i.getJSON("~/version2/foreclosureresult/updatelist",u,function(n){r.list.updateListView(n.ViewResult);r.list.hideSpinner()})},updateSearch:function(n,t,r){var u=this,f=this.getParameters(n);f.pageNumber=1;f.ForeclosureSearchCriteria=this.filters.getForeclosureSearchCriteria();u.xhrUpdateSearch!=undefined&&u.xhrUpdateSearch.abort();u.list.showSpinner();u.xhrUpdateSearch=i.postJSON("~/version2/foreclosureresult/updatelist",f,function(n){i.json.checkResultErrors(n)?(u.list.updateListView(n.ViewResult),u.filters.updateCount(n.Count),u.list.updateForeclosureCount(n.Count),u.list.hideSpinner(),typeof t=="function"&&t.call(this,n)):(u.list.hideSpinner(),typeof r=="function"&&r.call(this,n))})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.ForeclosureResultMap=i.page.PropertyResultMap.extend({init:function(n){this.bsMap=null;this.filters=null;this.searchBar=null;this.controller="foreclosureresult";this.options=t.extend({isLocked:!1,count:0,controller:"version2/foreclosureresult",itemTypes:null,mapResult:null,parameters:null,polygonMapPoints:null,referrerUrl:null,preTrakName:"map",useUserLocationOnMarker:!0,showSearchBarItemTypesSpinner:i.utils.browser.isMobileBrowser(),mapPosition:this.loadMapStateAndGetMapPosition(n.parameters.ResultId),markerOptions:{popupId:"map-foreclosure-popup",controller:"version2/foreclosureresult",pinType:i.maps.pin.type.BLUE,userLocation:null}},n);this.setupSearchBar();this.setupFilters();this.setupMap();this.attachListeners();this.options.useUserLocationOnMarker&&(this.options.markerOptions.userLocation=new i.maps.tool.UserLocation(this.bsMap.map));this.setupMapResult(this.options.polygonMapPoints);this.mapType="result"},setupMap:function(){this.bsMap=new i.maps.Map({preTrakId:"Default",mapDivId:"full-map",mapResult:this.options.mapResult,favorites:this.options.isUserLoggedOn,filterControl:!0,searchControl:!1,toolControl:!0,toolControlOptions:{layersOptions:{dialogPosition:{my:"left+8 top+15",at:"left bottom",of:"#search-result"}}}})},setupSearchBar:function(){this.searchBar=new i.search.Property({isMap:!0})},setupFilters:function(){this.filters=new i.filters.Foreclosure(this.options.count,{isLocked:this.options.isLocked,preTrakName:this.options.preTrakName});this.filters.setupSlider({className:"ui-slider-blue"});this.filters.setupAreaSelectable();this.filters.setupItemTypes(this.options.itemTypes);this.filters.setupPeriodFilter();this.filters.setupAuctionDates()},setupMapResult:function(n){var t=this;this.allowDrawMarkers=!0;n!==null&&this.bsMap.addPolygon(this.bsMap.drawPolygon(n));google.maps.event.addListenerOnce(this.bsMap.map,"idle",function(){t.draw()})},attachListeners:function(){var r=this;t(".displaytab .btn").on("click",function(){var u=t.extend(r.options.parameters,{DisplayTab:t(this).data("tab")}),f=r.filters.getPeriod();return f.changeDate!=="0"&&(u=t.extend(u,{ChangeDate:f.changeDate,ChangeType:f.changeType})),i.post("~/version2/foreclosureresult/saveresultdisplaystate/",u,function(){u.DisplayTab!=="MapTab"&&(n.location.href=i.url("~/auktioner/"+u.ResultId))}),!1});this.filters.addListener("bs_filter_onchange",function(n){r.updateSearch(n)});this.filters.addListener("bs_filter_period_onchange",function(n){r.options.parameters.ChangeDate=n.changeDate;r.options.parameters.ChangeType=n.changeType;r.updateSearch()});google.maps.event.addListener(this.bsMap.map,"bounds_changed",function(){r.saveMapState()});google.maps.event.addListener(this.bsMap.map,"maptypeid_changed",function(){r.saveMapState()});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_viewtype_changed",function(n){r.viewtypeChange(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_dialog_close",function(){r.viewtypeChange({type:""})})},draw:function(){function r(){if(n.xhrGetPoints!=null&&n.xhrGetPoints.abort(),n.allowDrawMarkers){n.lastZoomLevel=n.bsMap.map.getZoom();var r=t.extend(n.getGetPointsParameters(),{ForeclosureSearchCriteria:n.filters.getForeclosureSearchCriteria()});n.xhrGetPoints=i.getJSON("~/"+n.options.controller+"/GetPoints",i.utils.serializeParams(r),function(u){var e,f,o,s;if(n.bsMap.clearMarkers(),i.json.checkResultErrors(u))for(e=0;f=u.Points[e];e++)o=t.extend({infoPointX:f.X,infoPointY:f.Y},r),s=new i.maps.Marker(n.bsMap.map,t.extend(n.options.markerOptions,{parameters:o,mapPoint:f})),n.bsMap.addMarker(s)}).error(function(){})}}var n=this;this.zoomChangedListener==null&&(this.zoomChangedListener=google.maps.event.addListener(this.bsMap.map,"zoom_changed",function(){n.lastZoomLevel!=this.getZoom()&&(n.bsMap.clearMarkers(),n.zoomChangedIdleListener&&google.maps.event.removeListener(n.zoomChangedIdleListener),n.zoomChangedIdleListener=google.maps.event.addListenerOnce(n.bsMap.map,"idle",function(){r()}))}));r()},getParameters:function(n){var i=t.extend(this.options.parameters,{ForeclosureSearchCriteria:this.filters.getForeclosureSearchCriteria()});return n!=undefined?t.extend(i,{CommandName:n.commandName,CommandArguments:n.commandArguments}):i},updateToManyText:function(){}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.RentalResult=i.EventClass.extend({init:function(n){this.options=t.extend({isLocked:!1,count:null,parameters:null,itemTypes:null,preTrakName:"rentalResultList",showSearchBarItemTypesSpinner:i.utils.browser.isMobileBrowser()},n);this.list=null;this.filters=null;this.search=null;this.setupSearchBar();this.setupList();this.setupFilters()},setupList:function(){var r=this;this.list=new i.List({preTrakName:this.options.preTrakName,count:this.options.count});this.list.addListener("bs_list_onchange",function(u){if(u.change==="displaytab"&&u.parameters.displayTab==="MapTab"){r.saveResultDisplayState(function(){n.location.href=i.url("~/kort/lejeboliger/"+r.options.parameters.ResultId)});return}r.updateList(u.parameters);u.change==="displaytab"&&(r.saveResultDisplayState(),u.parameters.displayTab==="GalleryTab"?t("#rental-result").addClass("gallery"):t("#rental-result").removeClass("gallery"))});t("#list").on("click",".displaytab .btn",function(){return!1})},setupFilters:function(){var n=this;this.filters=new i.filters.Rental(this.options.count,{isLocked:this.options.isLocked,preTrakName:this.options.preTrakName});this.filters.setupSlider({className:"ui-slider-orange"});this.filters.setupAreaSelectable();this.filters.setupRentalSelects();this.filters.addListener("bs_filter_onchange",function(t){n.updateSearch(t)})},setupSearchBar:function(){this.searchBar=new i.search.Property},getParameters:function(n){return t.extend({resultId:this.options.parameters.ResultId},this.filters.getPeriod(),this.list.getParameters(),n)},saveResultDisplayState:function(n){i.post("~/version2/rentalresult/saveresultdisplaystate/",this.getParameters(),n)},updateSituationQuickSearch:function(n,i,r){var u=this,f=[n,i,r].join("***");return this.updateSearch({commandName:"SetSituationQuickSearch",commandArguments:f},function(n){t(".situation-address").text(n.SituationAddress);u.filters.areaSelectable.setFilterAreaViewResult(n.FilterAreaViewResult)},function(){u.list.showSpinner();u.getSuggestionsForList(n,i,function(n){u.list.updateListView(n)})}),!0},getSuggestionsForList:function(n,t,r){i.get("~/version2/suggestion/NoResultSuggestionsAjax",{query:n,itemTypes:t},function(n){r.call(this,n)})},updateList:function(n){var r=this,u=t.extend({resultId:this.options.parameters.ResultId},this.filters.getPeriod(),n);r.xhrUpdateList!=undefined&&r.xhrUpdateList.abort();r.list.showSpinner();r.xhrUpdateList=i.getJSON("~/version2/rentalresult/updatelist",u,function(n){r.list.updateListView(n.ViewResult);r.list.hideSpinner()})},updateSearch:function(n,t,r){var u=this,f=this.getParameters(n);f.pageNumber=1;f.RentalSearchCriteria=this.filters.getRentalSearchCriteria();u.xhrUpdateSearch!=undefined&&u.xhrUpdateSearch.abort();u.list.showSpinner();u.xhrUpdateSearch=i.postJSON("~/version2/rentalresult/updatelist",f,function(n){i.json.checkResultErrors(n)?(u.list.updateListView(n.ViewResult),u.filters.updateCount(n.Count),u.list.updateRentalCount(n.Count),u.list.hideSpinner(),typeof t=="function"&&t.call(this,n)):(u.list.hideSpinner(),typeof r=="function"&&r.call(this,n))})}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.RentalResultMap=i.page.PropertyResultMap.extend({init:function(n){this.bsMap=null;this.filters=null;this.searchBar=null;this.controller="rentalresult";this.options=t.extend({isLocked:!1,count:0,controller:"version2/rentalresult",itemTypes:null,mapResult:null,parameters:null,polygonMapPoints:null,referrerUrl:null,preTrakName:"map",useUserLocationOnMarker:!0,showSearchBarItemTypesSpinner:i.utils.browser.isMobileBrowser(),mapPosition:this.loadMapStateAndGetMapPosition(n.parameters.ResultId),markerOptions:{popupId:"map-rental-popup",controller:"version2/rentalresult",pinType:i.maps.pin.type.ORANGE,userLocation:null}},n);this.setupSearchBar();this.setupFilters();this.setupMap();this.attachListeners();this.options.useUserLocationOnMarker&&(this.options.markerOptions.userLocation=new i.maps.tool.UserLocation(this.bsMap.map));this.setupMapResult(this.options.polygonMapPoints);this.mapType="result"},setupMap:function(){this.bsMap=new i.maps.Map({preTrakId:"Default",mapDivId:"full-map",mapResult:this.options.mapResult,favorites:this.options.isUserLoggedOn,filterControl:!0,searchControl:!1,toolControl:!0,toolControlOptions:{layersOptions:{dialogPosition:{my:"left+8 top+15",at:"left bottom",of:"#search-result"}}}})},setupSearchBar:function(){this.searchBar=new i.search.Property({isMap:!0})},setupFilters:function(){this.filters=new i.filters.Rental(this.options.count,{isLocked:this.options.isLocked,preTrakName:this.options.preTrakName});this.filters.setupSlider({className:"ui-slider-orange"});this.filters.setupAreaSelectable();this.filters.setupItemTypes(this.options.itemTypes);this.filters.setupRentalSelects()},setupMapResult:function(n){var t=this;this.allowDrawMarkers=!0;n!==null&&this.bsMap.addPolygon(this.bsMap.drawPolygon(n));google.maps.event.addListenerOnce(this.bsMap.map,"idle",function(){t.draw()})},attachListeners:function(){var r=this;t(".displaytab .btn").on("click",function(){var u=t.extend(r.options.parameters,{DisplayTab:t(this).data("tab")}),f=r.filters.getPeriod();return f.changeDate!=="0"&&(u=t.extend(u,{ChangeDate:f.changeDate,ChangeType:f.changeType})),i.post("~/version2/rentalresult/saveresultdisplaystate/",u,function(){u.DisplayTab!=="MapTab"&&(n.location.href=i.url("~/lejeboliger/"+u.ResultId))}),!1});this.filters.addListener("bs_filter_onchange",function(n){r.updateSearch(n)});this.filters.addListener("bs_filter_period_onchange",function(n){r.options.parameters.ChangeDate=n.changeDate;r.options.parameters.ChangeType=n.changeType;r.updateSearch()});google.maps.event.addListener(this.bsMap.map,"bounds_changed",function(){r.saveMapState()});google.maps.event.addListener(this.bsMap.map,"maptypeid_changed",function(){r.saveMapState()});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_viewtype_changed",function(n){r.viewtypeChange(n)});google.maps.event.addListener(this.bsMap.map,"bs_tool_viewselector_dialog_close",function(){r.viewtypeChange({type:""})})},draw:function(){function r(){if(n.xhrGetPoints!=null&&n.xhrGetPoints.abort(),n.allowDrawMarkers){n.lastZoomLevel=n.bsMap.map.getZoom();var r=t.extend(n.getGetPointsParameters(),{RentalSearchCriteria:n.filters.getRentalSearchCriteria()});n.xhrGetPoints=i.getJSON("~/"+n.options.controller+"/GetPoints",i.utils.serializeParams(r),function(u){var e,f,o,s;if(n.bsMap.clearMarkers(),i.json.checkResultErrors(u))for(e=0;f=u.Points[e];e++)o=t.extend({infoPointX:f.X,infoPointY:f.Y},r),s=new i.maps.Marker(n.bsMap.map,t.extend(n.options.markerOptions,{parameters:o,mapPoint:f})),n.bsMap.addMarker(s)}).error(function(){})}}var n=this;this.zoomChangedListener==null&&(this.zoomChangedListener=google.maps.event.addListener(this.bsMap.map,"zoom_changed",function(){n.lastZoomLevel!=this.getZoom()&&(n.bsMap.clearMarkers(),n.zoomChangedIdleListener&&google.maps.event.removeListener(n.zoomChangedIdleListener),n.zoomChangedIdleListener=google.maps.event.addListenerOnce(n.bsMap.map,"idle",function(){r()}))}));r()},getParameters:function(n){var i=t.extend(this.options.parameters,{RentalSearchCriteria:this.filters.getRentalSearchCriteria()});return n!=undefined?t.extend(i,{CommandName:n.commandName,CommandArguments:n.commandArguments}):i},updateToManyText:function(){}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.PresentationV2=i.EventClass.extend({init:function(n){this.options=t.extend({municipalityNumber:null,oisPropertyNumber:null,itemType:null,mapPosition:null,archiveUniqueNumber:null},n);this.municipalityAndOisNumber={municipalityNumber:this.options.municipalityNumber,oisPropertyNumber:this.options.oisPropertyNumber};this.searchBar=new i.search.Seo;this.setupVueInstance();this.setupListeners()},setupListeners:function(){var n=this},setupVueInstance:function(){var r=this,u=new VueRouter;u.map({"/":{component:{timelineLoaded:!1,template:"<div class='box'><div class='box-header'>Tidslinjen for denne bolig<\/div><div class='box-inner'>Tidslinjen viser de væsentligste begivenheder for boligen. Tidslinjen starter ved det seneste opførelsesår og viser derudover udbuds- og salgstidspunkter.<\/div><\/div><div class='timeline-wrap'>{{{timelineView}}}<\/div>",data:function(){return{timelineView:"<div class='row'><div class='col--12' style='margin-top: 15px'>Henter tidslinjen...<\/div><\/div>"}},ready:function(){var u=this,f=r.municipalityAndOisNumber;f.archiveUniqueNumber=r.options.archiveUniqueNumber;this.xhrGetTimeline=i.getJSON("~/version2/presentationv2/gettimeline",f,function(r){i.json.checkResultErrors(r)?(u.timelineView=r.Data.View,Vue.nextTick(function(){if(t(".timeline").length){u.timelineLoaded=!0;t(".timeline").timeline();t(".goto-top").on("click",function(){n.scrollTo(0,0)})}})):(u.timelineView="Vi kunne ikke hente tidslinjen",u.timelineLoaded=!0)})},attached:function(){if(!this.timelineLoaded&&t(".timeline").length){this.timelineLoaded=!0;t(".timeline").timeline();t(".goto-top").on("click",function(){n.scrollTo(0,0)})}}}},"/bbr":{component:{template:"<div class='box'><div class='box-header'>BBR<\/div><div class='box-inner' v-if='!$refs.asyncTest'>Henter...<\/div><bbr v-ref:async-test='v-ref:async-test'><\/bbr><\/div>",components:{bbr:function(n){t.get(i.url("~/version2/presentationv2/BbrDetails"),r.municipalityAndOisNumber,function(t){n({template:t,data:function(){return{showAll:!1}}})})}}}},"/kort":{component:{template:"<div class='box'><div class='box-header'>Kort <div class='box-header-buttons'><button class='btn btn-s btn-default' id='save-search'>Find boliger til salg i nærområdet<\/button><\/div><\/div><div class='box-inner'>På kortet kan du se, hvor den konkrete bolig ligger. Desuden vises solgte boliger i nærområdet. Klik på knappen, hvis du vil se boliger til salg i nærområdet.<\/div><div id='map'><\/div>",ready:function(){i.maps.loadScript("boligens_side",function(){r.options.mapDivId="map";r.options.itemTypeNumber=r.options.itemType;r.map=new i.maps.PresentationV2Map(r.options)})},attached:function(){r.map&&google.maps.event.trigger(r.map.map,"resize")}}},"/statistik":{component:{template:"<div class='box'><div class='box-header'>Områdestatistik<div class='box-header-buttons'> <a :href='markedindexlink' class='btn btn-s btn-default'>Se flere statistikker<\/a><\/div><\/div><div class='box-inner'>Nedenfor kan du se udviklingen på boligmarkedet det seneste år. Udbudspris og liggetid omhandler boliger, der er til salg. Salgspris og salgstid omhandler solgte boliger.<\/div><\/div><div class='row page-break-after'><div class='col--6 col-s-12'><chart statistic-type='AdvertisedPricePerSquareMeter' :areas='areas' :property-types='propertyTypes'><\/chart><\/div><div class='col--6 col-s-12'><chart statistic-type='SalesPricePerSquareMeter' :areas='areas' :property-types='propertyTypes'><\/chart><\/div><\/div><div class='row page-break-after'><div class='col--6 col-s-12'><chart statistic-type='AdvertisedDuration' :areas='areas' :property-types='propertyTypes'><\/chart><\/div><div class='col--6 col-s-12'><chart statistic-type='SalesDuration' :areas='areas' :property-types='propertyTypes2'><\/chart><\/div><\/div>",components:{chart:i.vue.Chart},data:function(){return{areas:["m"+r.options.municipalityNumber,"a1"],propertyTypes:[{0:1,100:1,200:2,300:3,400:4,500:5,600:6,700:7,800:8,900:9}[r.options.itemType]],propertyTypes2:[{0:10,100:10,200:10,300:3,400:4,500:0,600:0,700:0,800:0,900:0}[r.options.itemType]],propertyTypesFull:[{0:"House",100:"House",200:"TerraceHouse",300:"FreeholdFlat",400:"HolidayHouse",500:"PartiallyOwned",600:"CountryHouse",700:"FullYearPlot",800:"HolidayPlot",900:"ApartmentHouse"}[r.options.itemType]]}},computed:{markedindexlink:function(){var n="&areas="+this.areas.join("&areas="),t="&propertyTypes="+this.propertyTypesFull.join("&propertyTypes=");return"http://markedsindeks.boligsiden.dk/?statisticType=AdvertisedPrice"+n+t}}}},"*":{component:{template:"<div class='box'>&nbsp;<\/div>"}}});this.vueInstance=Vue.extend({methods:{trak:function(n){i.trak.event("bs.pagename","Click on tab",n.target.innerHTML)}}});u.start(this.vueInstance,"#presentationv2-app")}})}(window,jQuery,bs),function(n,t,i){"use strict";i.page=i.page||{};i.page.Suggestion=i.EventClass.extend({init:function(){this.search=new i.search.Property}})}(window,jQuery,bs);Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t&&n?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i}),function(n,t,i){"use strict";i.services=i.services||{};i.services.searches=new(i.EventClass.extend({init:function(){this.tips=[]},renameSearch:function(n,t){return i.check.requireNotNullOrUndefined(n.id,"parameters.id"),i.check.requireNotNullOrUndefined(n.newName,"parameters.newName"),this.xhrRenameSearch&&this.xhrRenameSearch.abort(),this.xhrRenameSearch=i.getJSON("~/searches/renamesearch",n,t)},deleteSearch:function(n,t){return i.check.requireNotNullOrUndefined(n.id,"parameters.id"),this.xhrDeleteSearch&&this.xhrDeleteSearch.abort(),this.xhrDeleteSearch=i.getJSON("~/searches/deletesearch",n,t)},pinSearch:function(n,t){return i.check.requireNotNullOrUndefined(n.id,"parameters.id"),i.check.requireNotNullOrUndefined(n.sortOrder,"parameters.sortOrder"),this.xhrPinSearch&&this.xhrPinSearch.abort(),this.xhrPinSearch=i.getJSON("~/searches/pinsearch",n,t)},setMailAgent:function(n,t){return i.check.requireNotNullOrUndefined(n.id,"parameters.id"),i.check.requireNotNullOrUndefined(n.active,"parameters.active"),this.xhrSetMailAgent&&this.xhrSetMailAgent.abort(),this.xhrSetMailAgent=i.getJSON("~/searches/setmailagent",n,t)},setMailAgentFavorite:function(n,t){return i.check.requireNotNullOrUndefined(n.active,"parameters.active"),this.xhrSetMailAgentFavorite&&this.xhrSetMailAgentFavorite.abort(),this.xhrSetMailAgentFavorite=i.getJSON("~/favorites/setmailagent",n,t)},setMailAgentWishProperty:function(n,t){return i.check.requireNotNullOrUndefined(n.active,"parameters.active"),this.xhrSetMailAgentWishProperty&&this.xhrSetMailAgentWishProperty.abort(),this.xhrSetMailAgentWishProperty=i.getJSON("~/wishproperty/setmailagent",n,t)},trak:function(n,t,r){switch(n){case"setMailAgent":i.check.requireNotNullOrUndefined(r,"trakLabel");i.trak.ui.alert((t.active?"Activate":"Deactivate")+"Search"+r);break;case"setMailAgentFavorite":i.check.requireNotNullOrUndefined(r,"trakLabel");i.trak.ui.alert((t.active?"Activate":"Deactivate")+"Favorite"+r);break;case"setMailAgentWishProperty":i.check.requireNotNullOrUndefined(r,"trakLabel");i.trak.ui.alert((t.active?"Activate":"Deactivate")+"WishProperty"+r)}},update:function(n){i.check.requireNotNullOrUndefined(n.controller,"options.controller");i.check.requireNotNullOrUndefined(n.action,"options.action");i.check.requireNotNullOrUndefined(n.parameters,"options.parameters");i.check.requireNotNullOrUndefined(n.okCallback,"options.okCallback");i.check.requireNotNullOrUndefined(n.errorCallback,"options.errorCallback");var t=this;this[n.action](n.parameters,function(r){if(i.json.checkResultErrors(r))if(r.Status===i.json.status.NotLoggedIn)t.getLoginDialog();else switch(r.Data){case"FacebookUserEmailDeclined":t.getFacebookUserEmailDeclinedDialog(function(){});break;case"FacebookUserEmailGrantedNoEmail":t.getFacebookUserEmailGrantedNoEmailDialog(function(){});break;case"ExceededMaxAgents":t.getExceededMaxAgentsDialog();break;case"NoAgreement":t.getAgreementConfirmDialog(n.controller,n.agreementDialog,function(){i.getJSON("~/"+n.controller+"/CreateMailAgentConsent",function(r){i.json.checkResultErrors(r)?t.update(n):n.errorCallback.call()})});break;default:n.okCallback.call();t.trak(n.action,n.parameters,n.trakLabel)}else n.errorCallback.call();n.doneCallback!=undefined&&n.doneCallback.call()})},getAgreementConfirmDialog:function(n,r,u){var e=r!=undefined?r:n,o=t("<p/>",{html:"<a href='http://bolignyheder.boligsiden.dk/information/overvaagning/' target='_blank'>Læs mere om overvågning<\/a>."}),f=t("<div/>",{title:"Accept"}),s;return e==="searches"?(t("<p/>",{text:"Du er ved at oprette en overvågning af din søgning, og vi vil fremover sende dig en e-mail dagligt, hvis der er information om:"}).appendTo(f),t("<ul/>").append(t("<li/>",{text:"nye boliger"})).append(t("<li/>",{text:"prisændringer i din søgning"})).appendTo(f),t("<p/>",{html:"Du kan til enhver tid afmelde overvågningen."}).appendTo(f),o.appendTo(f)):e==="favorites"?(t("<p/>",{text:"Du er ved at oprette en overvågning af din huskeliste, og vi vil fremover sende dig en e-mail dagligt, hvis der er information om:"}).appendTo(f),t("<ul/>").append(t("<li/>",{text:"prisændringer"})).append(t("<li/>",{text:"nye åbent hus-arrangementer"})).append(t("<li/>",{text:"boliger, der ikke længere er til salg på din huskeliste"})).appendTo(f),t("<p/>",{html:"Du kan til enhver tid afmelde overvågningen."}).appendTo(f),o.appendTo(f)):e==="wishproperty"?(t("<p/>",{text:"Du er ved at oprette en overvågning af dine ønskeboliger, og vi vil fremover sende dig en e-mail, hvis der er information om:"}).appendTo(f),t("<ul/>").append(t("<li/>",{text:"ønskebolig ændringer"})).appendTo(f),t("<p/>",{html:"Du kan til enhver tid afmelde overvågningen."}).appendTo(f),o.appendTo(f)):e==="wishpropertyExtended"&&(t("<p/>",{text:"Du har tilføjet din første ønskebolig – vil du oprette en overvågning af den med det samme? Så vil vi fremover sende dig en e-mail, hvis:"}).appendTo(f),t("<ul/>").append(t("<li/>",{text:"boligen kommer til salg"})).append(t("<li/>",{text:"boligen kommer på tvangsauktion"})).append(t("<li/>",{text:"der kommer prisændringer"})).append(t("<li/>",{text:"boligen ikke længere er til salg"})).appendTo(f),t("<p/>",{html:"Overvågningen gælder alle de ønskeboliger, der står på din ønskeboligliste. Du kan til enhver tid afmelde overvågningen."}).appendTo(f),t("<p/>",{html:"Du kan til enhver tid afmelde overvågningen."}).appendTo(f),o.appendTo(f)),s={buttons:{}},s.buttons["Ja tak, opret overvågning"]=function(){u.call();t(this).bsDialog("close")},s.buttons["Nej tak"]=function(){t(this).bsDialog("close")},i.dialog.normal(f,s)},closeDialogs:function(){for(var n=0,r;r=this.tips[n];n++)i.tip.remove(r);t("#rename-search").bsDialog("destroy");t("#delete-search").bsDialog("destroy");t("#pinsearch").bsDialog("destroy");t("#setmailagentfavorite").bsDialog("destroy");t("#setmailagentwishproperty").bsDialog("destroy")},getExceededMaxAgentsDialog:function(){var n=t("<div/>",{title:"Wow – du er vild med overvågning!"}).append(t("<div/>",{text:"Men du kan maksimalt overvåge 30 søgninger, og det gør du allerede. Hvis du vil overvåge denne søgning, skal du først afmelde overvågningen på en af dine andre søgninger."}));i.dialog.normal(n,{width:330})},getFacebookUserEmailDeclinedDialog:function(){var n=t("<div/>",{title:"Må vi bruge din e-mailadresse?"}).append(t("<iframe/>",{width:270,height:100,src:i.settings.LoginSiteUrlstring+"/FacebookFrameGetEmail.aspx"}));i.dialog.normal(n,{width:300,height:200,buttons:{Luk:function(){t(this).bsDialog("close")}}})},getFacebookUserEmailGrantedNoEmailDialog:function(){var n=t("<div/>",{title:"Vi skal bruge din e-mailadresse"}).append(t("<iframe/>",{width:270,height:100,src:i.settings.LoginSiteUrlstring+"/FacebookFrameGetEmail.aspx"}));i.dialog.normal(n,{width:300,height:200,buttons:{Luk:function(){t(this).bsDialog("close")}}})},getLoginDialog:function(){t("<div title='Log ind'><\/div>").append(t("<iframe/>",{width:295,height:480,src:i.settings.LoginSiteUrlstring+"/LogonFrameDialog.aspx"})).bsDialog({bsType:"modalWithOk",width:330,height:540,buttons:{}})},getRenameSearchDialog:function(r,u,f,e,o){var s=t(e),h;this.tips.push(s);h=t("<div id='rename-search' title='Navngiv søgning'><p><b>Navngiv denne søgning:<\/b><\/p><p>"+r+"<\/p><p><input type='text' class='fc newName' value='"+u+"'/><\/p><\/div>");s.one("protipshow",function(){t("input.newName").on("keypress",function(n){if(i.utils.isKey(n,13)){var r=t("input.newName").val();o.call(this,r)}}).focus();n.setTimeout(function(){t("input.newName").focus()},200)});i.tip.show(s,h,{position:"top-right-corner",buttons:{"continue":{text:"Gem",callback:function(n){var r=t("input.newName").val();o.call(this,r);i.tip.remove(n)}},cancel:{text:"Ryd",callback:function(n){o.call(this,"");i.tip.remove(n)}},clear:{text:"Annuller",callback:function(n){i.tip.remove(n)}}}})},getDeleteSearchDialog:function(n,i,r,u,f){i&&(n=i+" ("+n+")");var e=t("<div/>",{id:"delete-search",title:"Slet søgning?"}).append(t("<p/>",{html:"<b>Vil du slette denne søgning?<\/b>"})).append(t("<p/>",{text:n}));r.Starred&&e.append(t("<p/>",{html:"<b>Bemærk<\/b>: Du sletter en søgning med stjernemarkering"}));r.HasMailAgent&&e.append(t("<p/>",{html:"<b>Bemærk<\/b>: Du sletter en søgning med overvågning"}));this.getDialog(e,u,f)},getSetMailAgentDialog:function(n,i){var r=t("<div/>",{id:"setmailagent"}).append(t("<p/>",{html:"<b>Afmeld overvågning<\/b>"})).append(t("<p/>",{html:"Når du afmelder overvågning, får du ikke længere e-mails om ændringer i din søgning. Vil du afmelde overvågning af denne søgning?"}));this.getDialog(r,n,i)},getSetMailAgentFavoriteDialog:function(n,i){var r=t("<div/>",{id:"setmailagentfavorite"}).append(t("<p/>",{html:"<b>Afmeld overvågning<\/b>"})).append(t("<p/>",{html:"Når du afmelder overvågning, får du ikke længere e-mails om ændringer i din huskeliste. Vil du afmelde overvågning af din huskeliste?"}));this.getDialog(r,n,i)},getSetMailAgentWishPropertyDialog:function(n,i){var r=t("<div/>",{id:"setmailagentwishproperty"}).append(t("<p/>",{html:"<b>Afmeld overvågning<\/b>"})).append(t("<p/>",{html:"Når du afmelder overvågning, får du ikke længere e-mails om ændringer i dine ønskeboliger. Vil du afmelde overvågning af dine ønskeboliger?"}));this.getDialog(r,n,i)},getPinSearchDialog:function(n,i,r){var u=t("<div/>",{id:"pinsearch"}).append(t("<p/>",{html:i?"<b>Fjern stjernemarkering og afmeld overvågning?<\/b>":"<b>Fjern stjernemarkering<\/b>"})).append(t("<p/>",{html:i?"Når du fjerner stjernemarkeringen, afmelder du også overvågningen af søgningen, og du vil ikke længere modtage e-mails om ændringer i din søgning. Vil du fjerne stjernemarkering og afmelde overvågning af denne søgning?":"Når du fjerner stjernemarkeringen, kan søgningen forsvinde fra listen, hvis du har flere end 30 søgninger. Vil du fjerne stjernemarkeringen?"}));this.getDialog(u,n,r)},getDialog:function(n,r,u){var f=t(r);this.tips.push(f);i.tip.show(f,n,{position:"top-right-corner",buttons:{"continue":{text:"Ja",callback:function(n){i.tip.hide(n);u.call(this)}},cancel:{text:"Nej"}}})}}))}(window,jQuery,bs)